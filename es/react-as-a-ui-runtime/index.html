<!DOCTYPE html><html lang="es"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/Personal-Blog/2.8bee379ac3150e408f97.css">@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:url(/Personal-Blog/static/merriweather-400-l-8796b7875d52e9cb9b280211e8d3f82d.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:url(/Personal-Blog/static/montserrat-900-l-5751237264c0468be0d48ad1cea75b90.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}body{--pink:#ffa7c4;background-color:var(--bg)}body.light{--bg:#fff;--header:var(--pink);--textNormal:#222;--textTitle:#222;--textLink:#d23669;--hr:rgba(0,0,0,0.2);--inlineCode-bg:rgba(255,229,100,0.2);--inlineCode-text:#1a1a1a}body.dark{-webkit-font-smoothing:antialiased;--bg:#282c35;--header:#fff;--textNormal:hsla(0,0%,100%,0.88);--textTitle:#fff;--textLink:var(--pink);--hr:hsla(0,0%,100%,0.2);--inlineCode-bg:#373c49;--inlineCode-text:#e6e6e6}body:lang(ar) article,body:lang(fa) article{direction:rtl}body:lang(ar) .language-text,body:lang(ar) article .translations,body:lang(ar) article pre,body:lang(fa) .language-text,body:lang(fa) article .translations,body:lang(fa) article pre{direction:ltr}body:lang(ar) .language-text,body:lang(fa) .language-text{display:inline-block}body:lang(ar) blockquote,body:lang(fa) blockquote{border-left:unset;border-right:.32813rem solid rgba(0,0,0,.9);padding-right:1.42188rem;padding-left:unset;margin-left:.75rem;margin-right:-1.75rem}body:lang(fa) article,body:lang(fa) header>h1{font-family:Vazir}body:lang(ar) article,body:lang(ar) header>h1{font-family:Cairo,sans-serif}body:lang(ko) article,body:lang(ko) header{word-break:keep-all}code[class*=language-],pre[class*=language-]{color:#fff;background:none;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;-webkit-font-feature-settings:normal;font-feature-settings:normal;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;margin-bottom:0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{overflow:auto;padding:1.3125rem}pre[class*=language-]::selection{background:#27292a}pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:hsla(0,0%,100%,.15)}:not(pre)>code[class*=language-]{border-radius:.3em;background:var(--inlineCode-bg);color:var(--inlineCode-text);padding:.15em .2em .05em;white-space:normal}.token.attr-name{color:#addb67;font-style:italic}.token.comment{color:#809393}.token.string,.token.url{color:#addb67}.token.variable{color:#d6deeb}.token.number{color:#f78c6c}.token.builtin,.token.char,.token.constant,.token.function{color:#82aaff}.token.punctuation{color:#c792ea}.token.doctype,.token.selector{color:#c792ea;font-style:"italic"}.token.class-name{color:#ffcb8b}.token.keyword,.token.operator,.token.tag{color:#ffa7c4}.token.boolean{color:#ff5874}.token.property{color:#80cbc4}.token.namespace{color:#b2ccd6}pre[data-line]{padding:1em 0 1em 3em;position:relative}.gatsby-highlight-code-line{background-color:#022a4b;display:block;padding-right:1em;padding-left:1.25em;border-left:.25em solid #ffa7c4}.gatsby-highlight,.gatsby-highlight-code-line{margin-right:-1.3125rem;margin-left:-1.3125rem}.gatsby-highlight{margin-bottom:1.75rem;border-radius:10px;background:#011627;-webkit-overflow-scrolling:touch;overflow:auto}@media (max-width:672px){.gatsby-highlight{border-radius:0}}.gatsby-highlight pre[class*=language-]{float:left;min-width:100%}.react-toggle{touch-action:pan-x;display:inline-block;position:relative;cursor:pointer;background-color:transparent;border:0;padding:0;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}.react-toggle-screenreader-only{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.react-toggle-track{width:50px;height:24px;padding:0;border-radius:30px;background-color:#0f1114;transition:all .2s ease}.react-toggle-track-check{position:absolute;width:17px;height:17px;left:5px;top:0;bottom:0;margin-top:auto;margin-bottom:auto;line-height:0;opacity:0;transition:opacity .25s ease}.react-toggle--checked .react-toggle-track-check,.react-toggle-track-x{opacity:1;transition:opacity .25s ease}.react-toggle-track-x{position:absolute;width:17px;height:17px;right:5px;top:0;bottom:0;margin-top:auto;margin-bottom:auto;line-height:0}.react-toggle--checked .react-toggle-track-x{opacity:0}.react-toggle-thumb{position:absolute;top:1px;left:1px;width:22px;height:22px;border-radius:50%;background-color:#fafafa;box-sizing:border-box;transition:all .5s cubic-bezier(.23,1,.32,1) 0ms;-webkit-transform:translateX(0);transform:translateX(0)}.react-toggle--checked .react-toggle-thumb{-webkit-transform:translateX(26px);transform:translateX(26px);border-color:#19ab27}.react-toggle--focus .react-toggle-thumb{box-shadow:0 0 2px 3px #ffa7c4}.react-toggle:active .react-toggle-thumb{box-shadow:0 0 5px 5px #ffa7c4}</style><style data-href="/Personal-Blog/component---src-templates-blog-post-js.77da55083c18bdb7fbef.css">@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:url(/Personal-Blog/static/merriweather-400-i-l-9a3ea56a5f449980432ace5972181ef6.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:url(/Personal-Blog/static/merriweather-700-l-e24e02bb044cb07539a3a6bd12348d14.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:url(/Personal-Blog/static/merriweather-700-i-l-ad085ede31afcc5585ff34869b1cd029.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.formkit-form *{box-sizing:border-box}.formkit-form legend{border:none;font-size:inherit;margin-bottom:10px;padding:0;position:relative;display:table}.formkit-form fieldset{border:0;padding:.01em 0 0;margin:0;min-width:0}.formkit-form body:not(:-moz-handler-blocked) fieldset{display:table-cell}.formkit-form p{color:inherit;font-size:inherit;font-weight:inherit}.formkit-form[data-format="slide in"],.formkit-form[data-format=modal]{display:none}.formkit-form .formkit-checkboxes,.formkit-form .formkit-input,.formkit-form .formkit-select{width:100%}.formkit-form .formkit-button,.formkit-form .formkit-submit{border:0;border-radius:5px;color:#fff;cursor:pointer;display:inline-block;text-align:center;font-size:15px;font-weight:500;margin-bottom:15px;overflow:hidden;padding:0;position:relative;vertical-align:middle}.formkit-form .formkit-button:focus,.formkit-form .formkit-button:hover,.formkit-form .formkit-submit:focus,.formkit-form .formkit-submit:hover{outline:none}.formkit-form .formkit-button:focus>span,.formkit-form .formkit-button:hover>span,.formkit-form .formkit-submit:focus>span,.formkit-form .formkit-submit:hover>span{background-color:#dc658d}.formkit-form .formkit-button>span,.formkit-form .formkit-submit>span{display:block;transition:all .3s ease-in-out;padding:12px 24px}.formkit-form .formkit-input{background:#fff;font-size:15px;padding:12px;border:1px solid #e3e3e3;flex:1 0 auto;line-height:1.4;margin:0;transition:border-color .3s ease-out}.formkit-form .formkit-input:focus{outline:none;border-color:#1677be;transition:border-color .3s ease}.formkit-form .formkit-input::-webkit-input-placeholder{color:#848585}.formkit-form .formkit-input:-ms-input-placeholder{color:#848585}.formkit-form .formkit-input::-ms-input-placeholder{color:#848585}.formkit-form .formkit-input::placeholder{color:#848585}.formkit-form [data-group=dropdown]{position:relative;display:inline-block;width:100%}.formkit-form [data-group=dropdown]:before{content:"";top:calc(50% - 2.5px);right:10px;position:absolute;pointer-events:none;border-color:#4f4f4f transparent transparent;border-style:solid;border-width:6px 6px 0;height:0;width:0;z-index:999}.formkit-form [data-group=dropdown] select{height:auto;width:100%;cursor:pointer;color:#333;line-height:1.4;margin-bottom:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:15px;padding:12px 25px 12px 12px;border:1px solid #e3e3e3;background:#fff}.formkit-form [data-group=dropdown] select:focus{outline:none}.formkit-form [data-group=checkboxes]{text-align:left;margin:0}.formkit-form [data-group=checkboxes] [data-group=checkbox]{margin-bottom:10px}.formkit-form [data-group=checkboxes] [data-group=checkbox] *{cursor:pointer}.formkit-form [data-group=checkboxes] [data-group=checkbox]:last-of-type{margin-bottom:0}.formkit-form [data-group=checkboxes] [data-group=checkbox] input[type=checkbox]{display:none}.formkit-form [data-group=checkboxes] [data-group=checkbox] input[type=checkbox]+label:after{content:none}.formkit-form [data-group=checkboxes] [data-group=checkbox] input[type=checkbox]:checked+label:after{border-color:#fff;content:""}.formkit-form [data-group=checkboxes] [data-group=checkbox] input[type=checkbox]:checked+label:before{background:#10bf7a;border-color:#10bf7a}.formkit-form [data-group=checkboxes] [data-group=checkbox] label{position:relative;display:inline-block;padding-left:28px}.formkit-form [data-group=checkboxes] [data-group=checkbox] label:after,.formkit-form [data-group=checkboxes] [data-group=checkbox] label:before{position:absolute;content:"";display:inline-block}.formkit-form [data-group=checkboxes] [data-group=checkbox] label:before{height:16px;width:16px;border:1px solid #e3e3e3;background:#fff;left:0;top:3px}.formkit-form [data-group=checkboxes] [data-group=checkbox] label:after{height:4px;width:8px;border-left:2px solid #4d4d4d;border-bottom:2px solid #4d4d4d;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);left:4px;top:8px}.formkit-form .formkit-alert{background:#f9fafb;border:1px solid #e3e3e3;border-radius:5px;flex:1 0 auto;list-style:none;margin:25px auto;padding:12px;text-align:center;width:100%}.formkit-form .formkit-alert:empty{display:none}.formkit-form .formkit-alert-success{background:#d3fbeb;border-color:#10bf7a;color:#0c905c}.formkit-form .formkit-alert-error{background:#fde8e2;border-color:#f2643b;color:#ea4110}.formkit-form .formkit-spinner{display:flex;height:0;width:0;margin:0 auto;position:absolute;top:0;left:0;right:0;overflow:hidden;text-align:center;transition:all .3s ease-in-out}.formkit-form .formkit-spinner>div{margin:auto;width:12px;height:12px;background-color:#fff;opacity:.3;border-radius:100%;display:inline-block;-webkit-animation:formkit-bouncedelay-formkit-form-data-uid-4a352cb1fd- 1.4s ease-in-out infinite both;animation:formkit-bouncedelay-formkit-form-data-uid-4a352cb1fd- 1.4s ease-in-out infinite both}.formkit-form .formkit-spinner>div:first-child{-webkit-animation-delay:-.32s;animation-delay:-.32s}.formkit-form .formkit-spinner>div:nth-child(2){-webkit-animation-delay:-.16s;animation-delay:-.16s}.formkit-form .formkit-submit[data-active] .formkit-spinner{opacity:1;height:100%;width:50px}.formkit-form .formkit-submit[data-active] .formkit-spinner~span{opacity:0}@-webkit-keyframes formkit-bouncedelay-formkit-form-data-uid-4a352cb1fd-{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes formkit-bouncedelay-formkit-form-data-uid-4a352cb1fd-{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}.formkit-form{box-shadow:0 2px 15px 0 rgba(210,214,220,.5);max-width:700px;overflow:hidden}.formkit-form [data-style=full]{width:100%;display:block}.formkit-form .formkit-header{margin-top:0;margin-bottom:20px;font-family:inherit}.formkit-form .formkit-subheader{margin:15px 0}.formkit-form .formkit-column{background-size:cover;background-repeat:no-repeat;background-position:50%;padding:20px}.formkit-form .formkit-column:nth-child(2){border-top:1px solid #e9ecef}.formkit-form .formkit-field{margin:0 0 15px}.formkit-form .formkit-input,.formkit-form .formkit-submit{width:100%}.formkit-form .formkit-guarantee{font-size:13px;margin:0 0 15px}.formkit-form .formkit-guarantee>p{margin:0}.formkit-form .formkit-powered-by{color:#7d7d7d;display:block;font-size:12px;margin-bottom:0;text-align:center}.formkit-form .formkit-powered-by[data-active=false]{opacity:.5}.formkit-form[min-width~="600"] [data-style=full],.formkit-form[min-width~="700"] [data-style=full],.formkit-form[min-width~="800"] [data-style=full]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.formkit-form[min-width~="600"] .formkit-submit,.formkit-form[min-width~="700"] .formkit-submit,.formkit-form[min-width~="800"] .formkit-submit{width:auto}.formkit-form[min-width~="600"] .formkit-column,.formkit-form[min-width~="700"] .formkit-column,.formkit-form[min-width~="800"] .formkit-column{padding:40px}.formkit-form[min-width~="600"] .formkit-column:nth-child(2),.formkit-form[min-width~="700"] .formkit-column:nth-child(2),.formkit-form[min-width~="800"] .formkit-column:nth-child(2){border-top:none}</style><meta name="generator" content="Gatsby 2.0.91"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" title="Dan Abramov&#x27;s Overreacted Blog RSS Feed" href="/Personal-Blog/rss.xml"/><link rel="shortcut icon" href="/Personal-Blog/icons/icon-48x48.png"/><link rel="manifest" href="/Personal-Blog/manifest.webmanifest"/><title data-react-helmet="true">React como un ¬´runtime¬ª para interfaces de usuario ‚Äî Personal Blog</title><meta data-react-helmet="true" name="theme-color" content="#282c35"/><meta data-react-helmet="true" name="description" content="Una descripci√≥n detallada del modelo de programaci√≥n de React."/><meta data-react-helmet="true" property="og:url" content="https://overreacted.io/es/react-as-a-ui-runtime/"/><meta data-react-helmet="true" property="og:title" content="React como un ¬´runtime¬ª para interfaces de usuario"/><meta data-react-helmet="true" property="og:description" content="Una descripci√≥n detallada del modelo de programaci√≥n de React."/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@yufusunlu"/><meta data-react-helmet="true" name="twitter:title" content="React como un ¬´runtime¬ª para interfaces de usuario"/><meta data-react-helmet="true" name="twitter:description" content="Una descripci√≥n detallada del modelo de programaci√≥n de React."/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:inherit;font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);border-left-color:inherit;opacity:0.8;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:var(--hr);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"‚Äî ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:var(--textLink);text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}a.anchor{box-shadow:none;}a.anchor svg[aria-hidden="true"]{stroke:var(--textLink);}p code{font-size:1rem;}h1 code, h2 code, h3 code, h4 code, h5 code, h6 code{font-size:inherit;}li code{font-size:1rem;}blockquote.translation{font-size:1em;}</style><link as="script" rel="preload" href="/Personal-Blog/component---src-templates-blog-post-js-5ff9d93420b5b2cefece.js"/><link as="script" rel="preload" href="/Personal-Blog/app-4c2cfdca2a1a25fe0c85.js"/><link as="script" rel="preload" href="/Personal-Blog/0-b197e8c6c7ff26484233.js"/><link as="script" rel="preload" href="/Personal-Blog/2-1e35639783e3cf8f44c8.js"/><link as="script" rel="preload" href="/Personal-Blog/1-1b550cd61a5e170131aa.js"/><link as="script" rel="preload" href="/Personal-Blog/webpack-runtime-5d7b005a53ad7d835132.js"/><link as="fetch" rel="preload" href="/Personal-Blog/static/d/315/path---es-react-as-a-ui-runtime-46-f-8b9-HB3kIfdLp4DAToYDwd57lafiw.json" crossorigin="use-credentials"/></head><body class="light"><script>
              (function() {
                window.__onThemeChange = function() {};
                function setTheme(newTheme) {
                  window.__theme = newTheme;
                  preferredTheme = newTheme;
                  document.body.className = newTheme;
                  window.__onThemeChange(newTheme);
                }

                var preferredTheme;
                try {
                  preferredTheme = localStorage.getItem('theme');
                } catch (err) { }

                window.__setPreferredTheme = function(newTheme) {
                  setTheme(newTheme);
                  try {
                    localStorage.setItem('theme', newTheme);
                  } catch (err) {}
                }

                var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
                darkQuery.addListener(function(e) {
                  window.__setPreferredTheme(e.matches ? 'dark' : 'light')
                });

                setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
              })();
            </script><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div style="color:var(--textNormal);background:var(--bg);transition:color 0.2s ease-out, background 0.2s ease-out;min-height:100vh"><div style="margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem"><header style="display:flex;justify-content:space-between;align-items:center;margin-bottom:2.625rem"><h3 style="font-family:Montserrat, sans-serif;margin-top:0;margin-bottom:0;height:42px;line-height:2.625rem"><a style="box-shadow:none;text-decoration:none;color:rgb(255, 167, 196)" href="/Personal-Blog/">Personal Blog</a></h3><div style="height:24px"></div></header><main><article><header><h1 style="color:var(--textTitle)">React como un ¬´runtime¬ª para interfaces de usuario</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.4rem">February 2, 2019<!-- --> ‚Ä¢ üç±üç±üç± 39 min read</p><div class="translations"><p style="font-size:0.9em;border:1px solid var(--hr);border-radius:0.75em;padding:0.75em;background:var(--inlineCode-bg);word-break:keep-all;font-family:system-ui, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;,
    &quot;Roboto&quot;, &quot;Oxygen&quot;, &quot;Ubuntu&quot;, &quot;Cantarell&quot;, &quot;Fira Sans&quot;,
    &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif"><span><span>Translated by readers into: </span><b>Espa√±ol</b> ‚Ä¢ <a href="/Personal-Blog/fr/react-as-a-ui-runtime/">Fran√ßais</a> ‚Ä¢ <a href="/Personal-Blog/zh-hans/react-as-a-ui-runtime/">ÁÆÄ‰Ωì‰∏≠Êñá</a> ‚Ä¢ <a href="/Personal-Blog/ko/react-as-a-ui-runtime/">ÌïúÍµ≠Ïñ¥</a></span><br/><br/><a href="/Personal-Blog/react-as-a-ui-runtime/">Read the original</a> ‚Ä¢ <a href="https://github.com/gaearon/overreacted.io/edit/master/src/pages/react-as-a-ui-runtime/index.es.md" target="_blank" rel="noopener noreferrer">Improve this translation</a> ‚Ä¢ <a href="/Personal-Blog/es">View all translated posts</a> </p></div></header><div><p>La mayor√≠a de los tutoriales introducen a React como una biblioteca de interfaces de usuario (IU). Tiene l√≥gica porque React <em>es</em> una biblioteca de IU. ¬°Eso es literalmente lo que dice el eslogan!</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/Personal-Blog/static/0429fcb4a2f2022852afc698ff8968f1/74bd4/react.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 500px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 29.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABEElEQVQY011Qy07DMBD0v1CniRM7dt4Pp01VWgmQOKEeekKCA0hIFUcOSIgfH9amDaWH0c4+ZrxeFiY5zjGPswlBqMCvIvCZ8Ajm8t/MpcZxdmkYyoKECubmAcv3b1S7J8Iz6v0L8vs95pH2c9I0MKWFLnqorJ2MWSBoE2H+QEVOm8jxDv3rB+zbJ4bDF5rHA8ztDjxMEcnSmzitM4nTyhsnugaTpoai19K8hc47z11T0pAQGkrliGMDlZKJrrw4qyxh8BqHhOpClcQ7MFP2aPoV+sV6QjesMYwb1N2IjnLXt8trLFZbtNbxDey49bmrO41QhT8DO32V0218PPIpP4v8OOu2dBvN6Ps8+u2dbvoDB8/AqO9EOdcAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="React homepage screenshot: "A JavaScript library for building user interfaces""
        title=""
        src="/Personal-Blog/static/0429fcb4a2f2022852afc698ff8968f1/74bd4/react.png"
        srcset="/Personal-Blog/static/0429fcb4a2f2022852afc698ff8968f1/309d6/react.png 148w,
/Personal-Blog/static/0429fcb4a2f2022852afc698ff8968f1/fe30e/react.png 295w,
/Personal-Blog/static/0429fcb4a2f2022852afc698ff8968f1/74bd4/react.png 500w"
        sizes="(max-width: 500px) 100vw, 500px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>He escrito antes sobre los desaf√≠os de crear <a href="/Personal-Blog/the-elements-of-ui-engineering/">interfaces de usuario</a>. Pero este art√≠culo trata a React de una manera distinta, m√°s como un <a href="https://en.wikipedia.org/wiki/Runtime_system" target="_blank" rel="nofollow noopener noreferrer"><em>runtime</em></a> (tambi√©n llamado entorno en tiempo de ejecuci√≥n).</p>
<p><strong>Este art√≠culo no te ense√±ar√° nada sobre la creaci√≥n de interfaces de usuario.</strong> Pero podr√≠a ayudarte a entender el modelo de programaci√≥n de React con mayor profundidad.</p>
<hr>
<p><strong>Nota: Si est√°s <em>aprendiendo</em> React, consulta en cambio <a href="https://reactjs.org/docs/getting-started.html#learn-react" target="_blank" rel="nofollow noopener noreferrer">la documentaci√≥n</a>.</strong></p>
<p><font size="60">‚ö†Ô∏è</font></p>
<p><strong>Esta es una inmersi√≥n profunda, NO ES un art√≠culo adecuado para principiantes.</strong> En este art√≠culo describo la mayor parte del modelo de programaci√≥n de React desde la base. No explico c√≥mo usarlo, solo como funciona.</p>
<p>Est√° dirigido a programadores experimentados y personas que trabajan en otras bibliotecas de IU y han preguntado sobre algunas decisiones en React en que se han adoptado t√©rminos medios. ¬°Espero que les resulte √∫til!</p>
<p><strong>Muchas personas llegan a utilizan React por a√±os sin pensar acerca de la mayor√≠a de estos temas.</strong> Esta es definitivamente una visi√≥n de React centrada en la programaci√≥n, m√°s que, digamos, <a href="http://mrmrs.cc/writing/2016/04/21/developing-ui/" target="_blank" rel="nofollow noopener noreferrer">centrada en el dise√±o</a>. Pero no creo haga da√±o tener recursos para ambas.</p>
<p>Pasada ya la advertencia, ¬°continuemos!</p>
<hr>
<h2 id="√°rbol-anfitri√≥n"><a href="#%C3%A1rbol-anfitri%C3%B3n" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>√Årbol anfitri√≥n</h2>
<p>Algunos programas dan como resultado n√∫meros, otros, poemas. Los diferentes lenguajes y sus <em>runtimes</em> a menudo est√°n optimizados para un conjunto particular de casos de uso y React no es la excepci√≥n.</p>
<p>Los programas de React generalmente dan como resultado <strong>un √°rbol que puede cambiar con el tiempo</strong>. Puede ser un <a href="https://www.npmjs.com/package/react-dom" target="_blank" rel="nofollow noopener noreferrer">√°rbol DOM</a>, una <a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/Devpedia-CocoaApp/View%20Hierarchy.html" target="_blank" rel="nofollow noopener noreferrer">jerarqu√≠a de iOS</a>, un √°rbol de <a href="https://react-pdf.org/" target="_blank" rel="nofollow noopener noreferrer">primitivas PDF</a>, o incluso de <a href="https://reactjs.org/docs/test-renderer.html" target="_blank" rel="nofollow noopener noreferrer">objetos JSON</a>. Sin embargo, lo que queremos generalmente es representar alguna IU con √©l. Lo llamaremos √°rbol <em>anfitri√≥n</em>, porque es parte del <em>entorno anfitri√≥n</em> fuera de React (como DOM o iOS). El √°rbol anfitri√≥n a menudo tiene <a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild" target="_blank" rel="nofollow noopener noreferrer">su</a> <a href="https://developer.apple.com/documentation/uikit/uiview/1622616-addsubview" target="_blank" rel="nofollow noopener noreferrer">propia</a> API imperativa. React es una capa encima de ella.</p>
<p>¬øEntonces para qu√© sirve React? Muy abstractamente, te ayuda a escribir un programa que manipula predeciblemente un √°rbol anfitri√≥n complejo en respuesta a eventos externos como interacciones, respuestas de la red, temporizadores, etc.</p>
<p>Una herramienta especializada funciona mejor que una gen√©rica cuando puede imponer y tomar provecho de algunas restricciones. React se basa en dos principios:</p>
<ul>
<li>
<p><strong>Estabilidad.</strong> El √°rbol anfitri√≥n es relativamente estable y la mayor√≠a de las actualizaciones no cambian radicalmente su estructura general. Si una aplicaci√≥n reorganizara todos sus elementos interactivos resultando en una combinaci√≥n completamente diferente cada segundo, ser√≠a dif√≠cil de usar. ¬øD√≥nde fue a parar ese bot√≥n? ¬øPor qu√© est√° bailando mi pantalla?</p>
</li>
<li>
<p><strong>Regularidad.</strong> El √°rbol anfitri√≥n se puede dividir en patrones de IU que lucen y se comportan de manera consistente (como botones, listas, avatares) y no formas aleatorias.</p>
</li>
</ul>
<p><strong>Estos principios resultan ser ciertos para la mayor√≠a de las IU.</strong> Sin embargo, React no es adecuado cuando no hay ¬´patrones¬ª estables en la salida. Por ejemplo, React puede ayudarte a escribir un cliente de Twitter, pero no ser√° muy √∫til para un <a href="https://www.youtube.com/watch?v=Uzx9ArZ7MUU" target="_blank" rel="nofollow noopener noreferrer">salvapantallas de tuber√≠as en 3D</a>.</p>
<h2 id="instancias-anfitrionas"><a href="#instancias-anfitrionas" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Instancias anfitrionas</h2>
<p>El √°rbol anfitri√≥n est√° formado por nodos. Los llamaremos ¬´instancias anfitrionas¬ª.</p>
<p>En el entorno DOM, las instancias anfitrionas son nodos DOM comunes (como los objetos que obtienes al llamar a <code class="language-text">document.createElement(&#39;div&#39;)</code>). En iOS, las instancias anfitrionas podr√≠an ser valores que identifiquen de manera √∫nica desde Javascript una vista nativa.</p>
<p>Las instancias anfitrionas tienen sus propias propiedades (p. ej. <code class="language-text">domNode.className</code> o <code class="language-text">view.tintColor</code>). Podr√≠an tambi√©n contener otras instancias anfitrionas como hijas.</p>
<p>(Esto no tiene nada que ver con React, lo que hago es describir los entornos anfitriones).</p>
<p>Generalmente hay una API para manipular las instancias anfitrionas. Por ejemplo, el DOM proporciona entre otras API <code class="language-text">appendChild</code>, <code class="language-text">removeChild</code>, <code class="language-text">setAttribute</code>. En las aplicaciones React, generalmente no se llama a estas API. Ese es trabajo de React.</p>
<h2 id="renderizador"><a href="#renderizador" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Renderizador</h2>
<p>Un <em>renderizador</em> le ense√±a a React a hablar con un entorno anfitri√≥n en espec√≠fico y manejar sus instancias anfitrionas. React DOM, React Native, e incluso <a href="https://mobile.twitter.com/vadimdemedes/status/1089344289102942211" target="_blank" rel="nofollow noopener noreferrer">Ink</a> son renderizadores de React. Tambi√©n t√∫ puedes <a href="https://github.com/facebook/react/tree/master/packages/react-reconciler" target="_blank" rel="nofollow noopener noreferrer">crear tu propio renderizador de React</a>.</p>
<p>Los renderizadores de React pueden funcionar en uno o dos modos.</p>
<p>La mayor√≠a de los renderizadores se escriben para utilizar el modo de ¬´mutaci√≥n¬ª. Este modelo es c√≥mo funciona el DOM: podemos crear un nodo, establecer sus propiedades y luego a√±adir o eliminar hijos de √©l. Las instancias anfitrionas son completamente mutables.</p>
<p>React tambi√©n puede funcionar en un modo ¬´persistente¬ª. Este modo es para entornos anfitriones que no proporcionan m√©todos como <code class="language-text">appendChild()</code> pero en su lugar clonan el √°rbol padre y siempre reemplazan el hijo del nivel superior. La inmutabilidad al nivel del √°rbol anfitri√≥n hace m√°s f√°cil el uso de multihilo. <a href="https://facebook.github.io/react-native/blog/2018/06/14/state-of-react-native-2018" target="_blank" rel="nofollow noopener noreferrer">React Fabric</a> toma provecho de ello.</p>
<p>Como usuario de React, nunca tienes que pensar acerca de estos modos. Solo quiero resaltar que React no es solo un adaptador de un modo a otro. Su utilidad es ortogonal al paradigma de API de vista de bajo nivel al que est√° enfocado.</p>
<h2 id="elementos-de-react"><a href="#elementos-de-react" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Elementos de React</h2>
<p>En el entorno anfitri√≥n, una instancia anfitriona (como un nodo DOM) es el bloque de construcci√≥n m√°s peque√±o. En React, el bloque de construcci√≥n m√°s peque√±o es un <em>elemento de React</em>.</p>
<p>Un elemento de React es un objeto plano de Javascript. Puede <em>describir</em> una instancia anfitriona.</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// JSX es az√∫car sint√°ctica para estos objetos.</span>
<span class="token comment">// &lt;button className="blue" /></span>
<span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">'button'</span><span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span> className<span class="token punctuation">:</span> <span class="token string">'blue'</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Un elemento de React es ligero y no tiene una instancia anfitriona vinculada a √©l. Repito, es meramente una <em>descripci√≥n</em> de lo que quieres ver en pantalla.</p>
<p>Al igual que las instancias anfitrionas, los elementos de React pueden formar un √°rbol:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// JSX es az√∫car sint√°ctica para estos objetos.</span>
<span class="token comment">// &lt;dialog></span>
<span class="token comment">//   &lt;button className="blue" /></span>
<span class="token comment">//   &lt;button className="red" /></span>
<span class="token comment">// &lt;/dialog></span>
<span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">'dialog'</span><span class="token punctuation">,</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    children<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'button'</span><span class="token punctuation">,</span>
      props<span class="token punctuation">:</span> <span class="token punctuation">{</span> className<span class="token punctuation">:</span> <span class="token string">'blue'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'button'</span><span class="token punctuation">,</span>
      props<span class="token punctuation">:</span> <span class="token punctuation">{</span> className<span class="token punctuation">:</span> <span class="token string">'red'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p><em>(Nota: He omitido <a href="/Personal-Blog/why-do-react-elements-have-typeof-property/">algunas propiedades</a> que no son importantes para esta explicaci√≥n.)</em></p>
<p>Sin embargo, recuerda que <strong>los elementos de React no tienen su propia identidad persistente.</strong> Est√°n pensados para ser recreados y desechados todo el tiempo.</p>
<p>Los elementos de React son inmutables. Por ejemplo, no puedes cambiar los hijos o una propiedad de un elemento de React. Si quieres renderizar algo distinto luego, lo <em>describir√°s</em> con un nuevo √°rbol de elementos de React creado desde cero.</p>
<p>Me gusta pensar en los elementos de React como fotogramas de una pel√≠cula. Capturan c√≥mo se debe ver la IU en un instante espec√≠fico de tiempo. No cambian.</p>
<h2 id="punto-de-entrada"><a href="#punto-de-entrada" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Punto de entrada</h2>
<p>Cada renderizador de React tiene un ¬´punto de entrada¬ª. Es la API que nos permite decirle a React que renderice un √°rbol de elementos de React en particular dentro de una instancia anfitriona que lo contenga.</p>
<p>Por ejemplo, el punto de entrada de React DOM es <code class="language-text">ReactDOM.render</code>:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token comment">// { type: 'button', props: { className: 'blue' } }</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>blue<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'container'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Cuando decimos <code class="language-text">ReactDOM.render(reactElement, domContainer)</code>, lo que queremos decir es: <strong>¬´Querido React, haz que el √°rbol anfitri√≥n <code class="language-text">domContainer</code> tenga una correspondencia con <code class="language-text">reactElement</code>¬ª.</strong></p>
<p>React buscar√° en el atributo <code class="language-text">reactElement.type</code> (en nuestro ejemplo, <code class="language-text">&#39;button&#39;</code>) y le pedir√° al renderizador de React DOM que cree una instancia anfitriona para √©l y le asigne las propiedades:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// En alg√∫n lugar del renderizador de ReactDOM (simplificado)</span>
<span class="token keyword">function</span> <span class="token function">createHostInstance</span><span class="token punctuation">(</span>reactElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">let</span> domNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>reactElement<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  domNode<span class="token punctuation">.</span>className <span class="token operator">=</span> reactElement<span class="token punctuation">.</span>props<span class="token punctuation">.</span>className<span class="token punctuation">;</span></span>  <span class="token keyword">return</span> domNode<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>En nuestro ejemplo, lo que har√° React es:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="gatsby-highlight-code-line"><span class="token keyword">let</span> domNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">domNode<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'blue'</span><span class="token punctuation">;</span></span>
domContainer<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>domNode<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Si un elemento de React tiene elementos hijos en <code class="language-text">reactElement.props.children</code>, React crear√° recursivamente instancias anfitrionas tambi√©n para ellos en el primer renderizado.</p>
<h2 id="conciliaci√≥n"><a href="#conciliaci%C3%B3n" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conciliaci√≥n</h2>
<p>¬øQu√© ocurre si llamamos a <code class="language-text">ReactDOM.render()</code> dos veces dentro del mismo contenedor?</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
<span class="gatsby-highlight-code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>blue<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span></span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'container'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ... luego ...</span>

<span class="token comment">// ¬øDeber√≠a esto *reemplazar la instancia anfitriona</span>
<span class="token comment">// o solo actualizar una propiedad en una existente?</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
<span class="gatsby-highlight-code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>red<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span></span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'container'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Repito, el trabajo de React es <em>hacer que el √°rbol anfitri√≥n se corresponda con el √°rbol de elementos de React proporcionado</em>. El proceso de averiguar <em>qu√©</em> hacer al √°rbol de instancias anfitrionas en respuesta a la nueva informaci√≥n se denomina en ocasiones <a href="https://reactjs.org/docs/reconciliation.html" target="_blank" rel="nofollow noopener noreferrer">conciliaci√≥n</a>.</p>
<p>Hay dos v√≠as de hacerlo. Una versi√≥n simplificada de React podr√≠a eliminar completamente el √°rbol existente y recrearlo desde cero.</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">let</span> domContainer <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'container'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Limpiar el √°rbol</span>
domContainer<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token comment">// Crear el nuevo √°rbol de instancias anfitrionas</span>
<span class="token keyword">let</span> domNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
domNode<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
domContainer<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>domNode<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Pero en el DOM, esto es lento y pierde informaci√≥n importante como el foco, la selecci√≥n, el estado de la navegaci√≥n, etc. En su lugar, queremos que React haga algo como esto:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">let</span> domNode <span class="token operator">=</span> domContainer<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>
<span class="token comment">// Actualizar instancias anfitrionas existentes</span>
domNode<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span></code></pre></div>
<p>En otras palabras, React necesita decidir cu√°ndo <em>actualizar</em> una instancia anfitriona existente para hacerla corresponder con un nuevo elemento de React y cu√°ndo crear una <em>nueva</em>.</p>
<p>Esto genera una pregunta de <em>identidad</em>. El elemento de React puede ser diferente cada vez, pero, ¬øcu√°ndo hace referencia conceptualmente a la misma instancia anfitriona?</p>
<p>En nuestro ejemplo es sencillo. Hab√≠amos renderizado un <code class="language-text">&lt;button&gt;</code> como primero (y √∫nico) hijo, y queremos renderizar un <code class="language-text">&lt;button&gt;</code> en el mismo lugar otra vez. Ya tenemos una instancia anfitriona <code class="language-text">&lt;button&gt;</code>, entonces, ¬øpara qu√© recrearla? Sencillamente reutilic√©mosla.</p>
<p>Esto est√° bastante cerca de como React lo analiza.</p>
<p><strong>Si un tipo de elemento en el mismo lugar en el √°rbol ¬´coincide¬ª entre el renderizado anterior y el pr√≥ximo, React reutiliza la instancia anfitriona existente.</strong></p>
<p>Aqu√≠ hay un ejemplo con comentarios que muestra a grandes rasgos lo que hace React:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// let domNode = document.createElement('button');</span>
<span class="token comment">// domNode.className = 'blue';</span>
<span class="token comment">// domContainer.appendChild(domNode);</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>blue<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'container'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="gatsby-highlight-code-line"><span class="token comment">// ¬øSe puede reutilizar la instancia anfitriona? ¬°S√≠! (button ‚Üí button)</span></span><span class="gatsby-highlight-code-line"><span class="token comment">// domNode.className = 'red';</span></span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>red<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'container'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="gatsby-highlight-code-line"><span class="token comment">// ¬øSe puede reutilizar la instancia anfitriona? ¬°No! (button ‚Üí p)</span></span><span class="token comment">// domContainer.removeChild(domNode);</span>
<span class="token comment">// domNode = document.createElement('p');</span>
<span class="token comment">// domNode.textContent = 'Hello';</span>
<span class="token comment">// domContainer.appendChild(domNode);</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'container'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="gatsby-highlight-code-line"><span class="token comment">// ¬øSe puede reutilizar la instancia anfitriona? ¬°S√≠! (p ‚Üí p)</span></span><span class="gatsby-highlight-code-line"><span class="token comment">// domNode.textContent = 'Goodbye';</span></span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Goodbye</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'container'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>La misma heur√≠stica se usa para √°rboles hijos. Por ejemplo, cu√°ndo actualizamos un <code class="language-text">&lt;dialog&gt;</code> con dos <code class="language-text">&lt;button&gt;</code>s dentro, React primero decide si reutiliza el <code class="language-text">&lt;dialog&gt;</code> y luego repite este proceso de decisi√≥n para cada hijo.</p>
<h2 id="condiciones"><a href="#condiciones" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Condiciones</h2>
<p>Si React solo reutiliza instancias anfitrionas cuando los tipos de los elementos ¬´coinciden¬ª entre actualizaciones, ¬øc√≥mo podemos renderizar contenido condicional?</p>
<p>Digamos que queremos mostrar primero solo un campo de entrada, pero luego renderizar un mensaje antes de √©l:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// Primer renderizado</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dialog</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token punctuation">/></span></span><span class="token plain-text"></span>
<span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dialog</span><span class="token punctuation">></span></span><span class="token punctuation">,</span>
  domContainer
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Pr√≥ximo renderizado</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dialog</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="gatsby-highlight-code-line"><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">I was just added here!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token punctuation">/></span></span><span class="token plain-text"></span>
<span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dialog</span><span class="token punctuation">></span></span><span class="token punctuation">,</span>
  domContainer
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>En este ejemplo, la instancia anfitriona del <code class="language-text">&lt;input&gt;</code> tendr√≠a que ser recreada. React recorrer√≠a el √°rbol del elemento, compar√°ndolo con la versi√≥n anterior:</p>
<ul>
<li>
<p><code class="language-text">dialog ‚Üí dialog</code>: ¬øSe puede reutilizar la instancia anfitriona? <strong>S√≠, el tipo coincide.</strong></p>
<ul>
<li><code class="language-text">input ‚Üí p</code>: ¬øSe puede reutilizar la instancia anfitriona? <strong>No, ¬°el tipo cambi√≥!</strong> Necesitamos eliminar el <code class="language-text">input</code> existente y crear una nueva instancia anfitriona <code class="language-text">p</code>.</li>
<li><code class="language-text">(nothing) ‚Üí input</code>: Se necesita crear una nueva instancia anfitriona <code class="language-text">input</code>.</li>
</ul>
</li>
</ul>
<p>El c√≥digo de actualizaci√≥n ejecutado por React ser√≠a algo como:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="gatsby-highlight-code-line"><span class="token keyword">let</span> oldInputNode <span class="token operator">=</span> dialogNode<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">dialogNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>oldInputNode<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="token keyword">let</span> pNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pNode<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'I was just added here!'</span><span class="token punctuation">;</span>
dialogNode<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>pNode<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="gatsby-highlight-code-line"><span class="token keyword">let</span> newInputNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">dialogNode<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>newInputNode<span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre></div>
<p>Esto no es lo mejor, porque <em>conceptualmente</em> <code class="language-text">&lt;input&gt;</code> no ha sido <em>reemplazado</em> por <code class="language-text">&lt;p&gt;</code>, simplemente se movi√≥. No queremos perder su selecci√≥n, el estado del foco y el contenido al recrear el DOM.</p>
<p>Si bien este problema tiene una soluci√≥n sencilla (a la que llegaremos en un minuto), no ocurre frecuentemente en las aplicaciones de React. Es interesantes ver por qu√©.</p>
<p>En la pr√°ctica, raramente llamar√≠as directamente a <code class="language-text">ReactDOM.render</code>. En cambio, las aplicaciones de React tienden a dividirse en funciones como esta:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Form</span><span class="token punctuation">(</span><span class="token punctuation">{</span> showMessage <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>showMessage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    message <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">I was just added here!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dialog</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>message<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dialog</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Este ejemplo no presenta los problemas que acabamos de describir. Puede que sea m√°s f√°cil ver por qu√© si usamos notaci√≥n de objetos en lugar de JSX. Observa el √°rbol de elementos hijo de <code class="language-text">dialog</code>.</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Form</span><span class="token punctuation">(</span><span class="token punctuation">{</span> showMessage <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>showMessage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    message <span class="token operator">=</span> <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'p'</span><span class="token punctuation">,</span>
      props<span class="token punctuation">:</span> <span class="token punctuation">{</span> children<span class="token punctuation">:</span> <span class="token string">'I was just added here!'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> <span class="token string">'dialog'</span><span class="token punctuation">,</span>
    props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      children<span class="token punctuation">:</span> <span class="token punctuation">[</span></span><span class="gatsby-highlight-code-line">        message<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">        <span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'input'</span><span class="token punctuation">,</span> props<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line">      <span class="token punctuation">]</span></span>    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><strong>Sin importar si <code class="language-text">showMessage</code> es <code class="language-text">true</code> o <code class="language-text">false</code>, <code class="language-text">&lt;input&gt;</code> es el segundo hijo y no cambia su posici√≥n en el √°rbol entre renderizados.</strong></p>
<p>Si <code class="language-text">showMessage</code> cambia de <code class="language-text">false</code> a <code class="language-text">true</code>, React recorrer√≠a el √°rbol del elemento, compar√°ndolo con la versi√≥n anterior:</p>
<ul>
<li>
<p><code class="language-text">dialog ‚Üí dialog</code>: ¬øSe puede reutilizar la instancia anfitriona? <strong>S√≠, el tipo coincide.</strong></p>
<ul>
<li><code class="language-text">(null) ‚Üí p</code>: Se necesita insertar una nueva instancia anfitriona <code class="language-text">p</code>.</li>
<li><code class="language-text">input ‚Üí input</code>: ¬øSe puede reutilizar la instancia anfitriona? <strong>S√≠, el tipo coincide.</strong></li>
</ul>
</li>
</ul>
<p>Y el c√≥digo ejecutado por React ser√≠a similar a este:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">let</span> inputNode <span class="token operator">=</span> dialogNode<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>
<span class="token keyword">let</span> pNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pNode<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'I was just added here!'</span><span class="token punctuation">;</span>
dialogNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>pNode<span class="token punctuation">,</span> inputNode<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Ahora no se perdi√≥ el estado de la entrada.</p>
<h2 id="listas"><a href="#listas" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Listas</h2>
<p>La comparaci√≥n del tipo del elemento en la misma posici√≥n en el √°rbol generalmente es suficiente para decidir si reutilizar o recrear la instancia anfitriona correspondiente.</p>
<p>Pero esto solo funciona bien si las posiciones de los hijos son est√°ticas y no cambian su orden. En nuestro ejemplo previo, aun cuando <code class="language-text">message</code> podr√≠a ser un ¬´hueco¬ª, todav√≠a sab√≠amos que ah√≠ el campo de entrada va despu√©s del mensaje, y que no hay otros hijos.</p>
<p>Con listas din√°micas, no podemos estar seguros si el orden ser√° siempre el mismo:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">ShoppingList</span><span class="token punctuation">(</span><span class="token punctuation">{</span> list <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">=></span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">
          You bought </span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><span class="token plain-text">
          Enter how many do you want: </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token punctuation">/></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Si la <code class="language-text">list</code> de nuestros art√≠culos de compra se reorganiza, React ver√° que todos los elementos <code class="language-text">p</code> e <code class="language-text">input</code> dentro tienen el mismo tipo y no sabr√° moverlos. (Desde el punto de vista de React, los <em>elementos en s√≠</em> cambiaron, no el orden).</p>
<p>El c√≥digo que ejecuta React para reorganizar 10 elementos podr√≠a ser algo como:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> pNode <span class="token operator">=</span> formNode<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> textNode <span class="token operator">=</span> pNode<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>
  textNode<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'You bought '</span> <span class="token operator">+</span> items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Por lo que, en lugar de <em>reordenarlos</em>, React efectivamente <em>actualizar√≠a</em> cada uno de ellos. Esto puede crear problemas de rendimiento y posibles errores. Por ejemplo, el contenido del primer campo de entrada permanecer√≠a reflejado en el primer campo de entrada despu√©s del ordenamiento, ¬°aun cuando conceptualmente puedan hacer referencia a productos diferentes en tu lista de compra!</p>
<p><strong>Es por esto que React te molesta pidi√©ndote que especifiques una propiedad especial llamada <code class="language-text">key</code> (llave) cada vez que incluyes un arreglo de elementos en tu salida:</strong></p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">ShoppingList</span><span class="token punctuation">(</span><span class="token punctuation">{</span> list <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token punctuation">{</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">=></span> <span class="token punctuation">(</span>
<span class="gatsby-highlight-code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>productId<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span></span><span class="token plain-text">          You bought </span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="token plain-text">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><span class="token plain-text"></span>
<span class="token plain-text">          Enter how many do you want: </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token punctuation">/></span></span><span class="token plain-text"></span>
<span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Una llave le dice a React que debe considerar a un elemento <em>conceptualmente</em> el mismo a√∫n si entre renderizados tiene una <em>posici√≥n</em> diferente dentro de su elemento padre.</p>
<p>Cuando React ve <code class="language-text">&lt;p key=&quot;42&quot;&gt;</code> dentro de un <code class="language-text">&lt;form&gt;</code>, comprobar√° si el renderizado anterior tambi√©n ten√≠a <code class="language-text">&lt;p key=&quot;42&quot;&gt;</code> dentro del mismo <code class="language-text">&lt;form&gt;</code>. Esto funciona incluso si los hijos de <code class="language-text">&lt;form&gt;</code> cambiaron su orden. React reutilizar√° la instancia anfitriona anterior con la misma llave si existe y reordenar√° correspondientemente a los hermanos.</p>
<p>Observa que la llave es solo relevante dentro de un elemento React padre en particular, como un <code class="language-text">&lt;form&gt;</code>. React no intentar√° hacer ¬´coincidir¬ª elementos con las mismas llaves entre diferentes padres. (React no tiene una v√≠a idiom√°tica para mover una instancia anfitriona entre diferentes padres sin recrearla).</p>
<p>¬øQu√© valor es bueno para una llave? Una forma f√°cil de responderlo es preguntarse: <strong>¬øCu√°ndo <em>dir√≠as</em> que un elemento es el ¬´mismo¬ª incluso si cambi√≥ el orden?</strong> Por ejemplo, en nuestra lista de compras, el ID del producto lo identifica de manera √∫nica entre sus hermanos.</p>
<h2 id="componentes"><a href="#componentes" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Componentes</h2>
<p>Ya hemos visto funciones que devuelven elementos de React:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Form</span><span class="token punctuation">(</span><span class="token punctuation">{</span> showMessage <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>showMessage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    message <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">I was just added here!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dialog</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>message<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dialog</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Son llamadas <em>componentes</em>. Nos permiten crear nuestro propio paquete de botones, avatares, comentarios, etc. Los componentes son el elemento esencial en React.</p>
<p>Los componentes toman un argumento (un objeto <em>hash)</em>. Contiene ¬´props¬ª (diminutivo de ¬´propiedades¬ª). Aqu√≠, <code class="language-text">showMessage</code> es una prop. Son como argumentos nombrados. </p>
<h2 id="pureza"><a href="#pureza" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pureza</h2>
<p>Se asume que los componentes de React son puros con respecto a sus props.</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Button</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// üî¥ No funciona</span>
  props<span class="token punctuation">.</span>isActive <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>En general, la mutaci√≥n no es idiom√°tica en React. (Hablaremos luego m√°s acerca de la forma idiom√°tica de actualizar la IU en respuesta a eventos).</p>
<p>Sin embargo, no hay ning√∫n problema con la <em>mutaci√≥n local</em>:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">FriendList</span><span class="token punctuation">(</span><span class="token punctuation">{</span> friends <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">let</span> items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> friends<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> friend <span class="token operator">=</span> friends<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">    items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Friend</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>friend<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span> <span class="token attr-name">friend</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>friend<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>items<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Creamos <code class="language-text">items</code> <em>mientras se renderiza</em> y ning√∫n otro componente lo ¬´vio¬ª, por lo que podemos mutarlo tanto como queramos antes de entregarlo como parte del renderizado resultante. No hay necesidad de hacer malabares en tu c√≥digo para evitar mutaciones locales.</p>
<p>De manera similar, no hay problema con la inicializaci√≥n diferida a pesar de no ser completamente ¬´pura¬ª:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">ExpenseForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Est√° bien si no afecta a otros componentes:</span>
  SuperCalculator<span class="token punctuation">.</span><span class="token function">initializeIfNotReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Contin√∫a leyendo...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Mientras que la llamada a un componente en m√∫ltiples ocasiones sea segura y no afecte el renderizado de otros componentes, a React no le importa si es 100% puro en el sentido estricto de la palabra dentro de la programaci√≥n funcional (PF). <a href="https://stackoverflow.com/questions/1077412/what-is-an-idempotent-operation" target="_blank" rel="nofollow noopener noreferrer">La idempotencia</a> es m√°s importante para React que la pureza.</p>
<p>Con eso dicho, los efectos secundarios que son directamente visibles al usuario no est√°n permitidos en los componentes de React. Dicho de otra forma, el simple hecho de <em>llamar</em> a una funci√≥n componente no deber√≠a por s√≠ mismo producir un cambio en la pantalla.</p>
<h2 id="recursividad"><a href="#recursividad" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Recursividad</h2>
<p>¬øC√≥mo <em>utilizamos</em> componentes desde otros componentes? Los componentes son funciones, por lo que <em>podr√≠amos</em> llamarlos:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">let</span> reactElement <span class="token operator">=</span> <span class="token function">Form</span><span class="token punctuation">(</span><span class="token punctuation">{</span> showMessage<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>reactElement<span class="token punctuation">,</span> domContainer<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Sin embargo, esta <em>no</em> es la forma idiom√°tica de usar componentes en el <em>runtime</em> de React.</p>
<p>En cambio, la forma idiom√°tica de usar un componente es con el mismo mecanismo que hemos visto anteriormente: Elementos de React. <strong>Esto significa que no tienes que invocar directamente la funci√≥n del componente, sino dejar a React que lo haga luego por ti</strong>:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// { type: Form, props: { showMessage: true } }</span>
<span class="token keyword">let</span> reactElement <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Form</span> <span class="token attr-name">showMessage</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>reactElement<span class="token punctuation">,</span> domContainer<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Y en alg√∫n sitio dentro de React, tu componente ser√° llamado:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// En alg√∫n lugar dentro de React</span>
<span class="token keyword">let</span> type <span class="token operator">=</span> reactElement<span class="token punctuation">.</span>type<span class="token punctuation">;</span> <span class="token comment">// Form</span>
<span class="token keyword">let</span> props <span class="token operator">=</span> reactElement<span class="token punctuation">.</span>props<span class="token punctuation">;</span> <span class="token comment">// { showMessage: true }</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">type</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Whatever Form returns</span></code></pre></div>
<p>Por convenci√≥n, los nombres de las funciones componente se escriben con inicial may√∫scula. Cuando el transformador de JSX ve <code class="language-text">&lt;Form&gt;</code> y no <code class="language-text">&lt;form&gt;</code>, hace al <code class="language-text">type</code> mismo del objeto un identificador y no una cadena:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token punctuation">/></span></span><span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'form' string</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Form</span> <span class="token punctuation">/></span></span><span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Form function</span></code></pre></div>
<p>No hay un mecanismo global de registro, literalmente nos referimos a <code class="language-text">Form</code> por el nombre cuando escribimos <code class="language-text">&lt;Form /&gt;</code>. Si form no existe en el √°mbito local, ver√°s un error de Javascript como lo har√≠as normalmente con un nombre de variable incorrecto.</p>
<p><strong>Bien, ¬øentonces qu√© hace React cuando un tipo de elemento es una funci√≥n? Llama a tu componente, y le pregunta qu√© elemento quiere <em>ese</em> componente renderizar.</strong></p>
<p>Este proceso contin√∫a recursivament y se describe con mayor detalle <a href="https://reactjs.org/blog/2015/12/18/react-components-elements-and-instances.html" target="_blank" rel="nofollow noopener noreferrer">aqu√≠</a>. Resumiendo, luce as√≠:</p>
<ul>
<li><strong>T√∫:</strong> <code class="language-text">ReactDOM.render(&lt;App /&gt;, domContainer)</code></li>
<li>
<p><strong>React:</strong> Oye <code class="language-text">App</code>, ¬øqu√© renderizas?</p>
<ul>
<li><code class="language-text">App</code>: Renderizo un <code class="language-text">&lt;Layout&gt;</code> con <code class="language-text">&lt;Content&gt;</code> dentro.</li>
</ul>
</li>
<li>
<p><strong>React:</strong> Oye <code class="language-text">Layout</code>, ¬øqu√© renderizas?</p>
<ul>
<li><code class="language-text">Layout</code>: Renderizo mis hijos en un <code class="language-text">&lt;div&gt;</code>. Mi hijo era <code class="language-text">&lt;Content&gt;</code>, as√≠ que supongo que va dentro dentro del <code class="language-text">&lt;div&gt;</code>.</li>
</ul>
</li>
<li>
<p><strong>React:</strong> Oye <code class="language-text">&lt;Content&gt;</code>, ¬øqu√© renderizas?</p>
<ul>
<li><code class="language-text">Content</code>: Renderizo un <code class="language-text">&lt;article&gt;</code> con alg√∫n texto y un <code class="language-text">&lt;Footer&gt;</code> dentro.</li>
</ul>
</li>
<li>
<p><strong>React:</strong> Oye <code class="language-text">&lt;Footer&gt;</code>, ¬øqu√© renderizas?</p>
<ul>
<li><code class="language-text">Footer</code>: Renderizo un <code class="language-text">&lt;footer&gt;</code> con alg√∫n texto m√°s.</li>
</ul>
</li>
<li><strong>React:</strong> Bien, aqu√≠ va:</li>
</ul>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// Estructura DOM resultante</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span><span class="token punctuation">></span></span><span class="token plain-text">
    Some text
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">></span></span><span class="token plain-text">some more text</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre></div>
<p>Por eso es que decimos que la conciliaci√≥n es recursiva. Cuando React recorre el √°rbol de elementos, puede encontrarse un elemento cuyo <code class="language-text">type</code> es un componente. Lo llamar√° y seguir√° descendiendo hacia abajo del √°rbol de elementos de React devueltos. Eventualmente se nos acabar√°n los componentes y React sabr√° qu√© cambiar en el √°rbol anfitri√≥n.</p>
<p>Las mismas reglas de conciliaci√≥n que ya discutimos funcionan tambi√©n aqu√≠. Si el <code class="language-text">type</code> en la misma posici√≥n (determinado por el √≠ndice y opcionalmente <code class="language-text">key</code>) cambia, React se deshacer√° las instancias anfitrionas dentro y las recrear√°.</p>
<h2 id="inversi√≥n-de-control"><a href="#inversi%C3%B3n-de-control" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Inversi√≥n de control</h2>
<p>Podr√≠as estarte preguntando: ¬øPor qu√© no llamamos a los componentes directamente? ¬øPor qu√© escribir <code class="language-text">&lt;Form /&gt;</code> y no <code class="language-text">Form()</code>?</p>
<p><strong>React puede hacer mejor su trabajo si ¬´tiene conocimiento¬ª sobre tus componentes, m√°s que si solo viera el √°rbol de elementos de React despu√©s de llamarlos recursivamente.</strong></p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// üî¥ React no tiene idea que Layout y Article existen.</span>
<span class="token comment">// Los est√°s llamando.</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token function">Layout</span><span class="token punctuation">(</span><span class="token punctuation">{</span> children<span class="token punctuation">:</span> <span class="token function">Article</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  domContainer
<span class="token punctuation">)</span>

<span class="token comment">// ‚úÖ React sabe que Layout y Article existen.</span>
<span class="token comment">// React los llama.</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Layout</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Article</span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Layout</span><span class="token punctuation">></span></span><span class="token punctuation">,</span>
  domContainer
<span class="token punctuation">)</span></code></pre></div>
<p>Este es un ejemplo cl√°sico de <a href="https://en.wikipedia.org/wiki/Inversion_of_control" target="_blank" rel="nofollow noopener noreferrer">inversi√≥n de control</a>. Hay algunas propiedades interesantes que obtenemos al dejar a React tomar el control de la llamada de nuestros componentes:</p>
<ul>
<li>
<p><strong>Los componentes se vuelven m√°s que funciones.</strong> React puede aumentar las funciones de los componentes con caracter√≠sticas como <em>el estado local</em> que est√°n vinculadas a la identidad del componente en el √°rbol. Un buen <em>runtime</em> proporciona abstracciones fundamentales que coinciden con el problema en cuesti√≥n. Como ya mencionamos, React est√° orientado espec√≠ficamente a programas que renderizan √°rboles de IU y responden a interacciones. Si llamas a los componentes directamente, tendr√≠as que construir estas caracter√≠sticas t√∫ mismo.</p>
</li>
<li>
<p><strong>Los tipos de componentes participan en la conciliaci√≥n.</strong> Al dejar a React llamar a tus componentes, tambi√©n le dices m√°s acerca de la estructura conceptual de tu √°rbol. Por ejemplo, cuando cambias de renderizar <code class="language-text">&lt;Feed&gt;</code> a la p√°gina de <code class="language-text">&lt;Profile&gt;</code>, React no intentar√° reutilizar instancias anfitrionas dentro de ellos (justo como cuando reemplazas <code class="language-text">&lt;button&gt;</code> con un <code class="language-text">&lt;p&gt;</code>). Todo el estado se habr√° ido, lo cual generalmente es bueno cuando renderizas una vista conceptualmente diferente. No querr√°s preservar el estado del campo de entrada entre <code class="language-text">&lt;PasswordForm&gt;</code> y <code class="language-text">&lt;MessengerChat&gt;</code>, incluso si la posici√≥n del <code class="language-text">&lt;input&gt;</code> en el √°rbol accidentalmente se alinea entre ellos.</p>
</li>
<li>
<p><strong>React puede retardar la conciliaci√≥n.</strong> Si React toma el control sobre las llamadas a nuestros componentes, puede hacer muchas cosas interesantes. Por ejemplo, puede dejar que el navegador haga alg√∫n trabajo entre las llamadas a componentes para que el rerenderizado de un √°rbol grande de componentes <a href="https://reactjs.org/blog/2018/03/01/sneak-peek-beyond-react-16.html" target="_blank" rel="nofollow noopener noreferrer">no bloquee el hilo principal</a>. Orquestar esto manualmente sin reimplementar una parte grande de React es dif√≠cil.</p>
</li>
<li>
<p><strong>Una mejor historia de depuraci√≥n.</strong> Si los componentes son ciudadanos de primera categor√≠a de los que la biblioteca est√° al tanto, podemos construir <a href="https://github.com/facebook/react-devtools" target="_blank" rel="nofollow noopener noreferrer">mejores herramientas para el desarrollador</a> para la instrospecci√≥n en el desarrollo.</p>
</li>
</ul>
<p>El √∫ltimo beneficio de que React llame tus funciones de componentes es la <em>evaluaci√≥n diferida</em>. Veamos qu√© significa esto.</p>
<h2 id="evaluaci√≥n-diferida"><a href="#evaluaci%C3%B3n-diferida" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Evaluaci√≥n diferida</h2>
<p>Cuando llamamos funciones en JavaScript, los argumentos se eval√∫an antes de la llamada:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// (2) Esto se calcula de segundo</span>
<span class="token function">eat</span><span class="token punctuation">(</span>
  <span class="token comment">// (1) Esto se calcula primero</span>
  <span class="token function">prepareMeal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Esto es generalmente lo que esperan los desarrolladores de Javascript, porque las funciones de Javascript pueden tener efectos secundarios impl√≠citos. No sorprender√≠a si llamaramos a una funci√≥n, pero no se ejecutara hasta que su resultado de alguna forma sea ¬´utilizado¬ª en Javascript.</p>
<p>Sin embargo, los componentes de React son <a href="#pureza">relativamente</a> puros. No hay absolutamente ninguna necesidad de ejecutarlos si sabemos que su resultado no va a ser renderizado en la pantalla.</p>
<p>Considera este componente que pone <code class="language-text">&lt;Comments&gt;</code> dentro de una <code class="language-text">&lt;Page&gt;</code>:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Story</span><span class="token punctuation">(</span><span class="token punctuation">{</span> currentUser <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// return {</span>
  <span class="token comment">//   type: Page,</span>
  <span class="token comment">//   props: {</span>
  <span class="token comment">//     user: currentUser,</span>
  <span class="token comment">//     children: { type: Comments, props: {} }</span>
  <span class="token comment">//   }</span>
  <span class="token comment">// }</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Page</span> <span class="token attr-name">user</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>currentUser<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="gatsby-highlight-code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Comments</span> <span class="token punctuation">/></span></span><span class="token plain-text"></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Page</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>El componente <code class="language-text">Page</code> puede renderizar los hijos que se le dan desde un <code class="language-text">Layout</code>:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span> user<span class="token punctuation">,</span> children <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Layout</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="gatsby-highlight-code-line"><span class="token plain-text">      </span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token plain-text"></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Layout</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><em>(<code class="language-text">&lt;A&gt;&lt;B /&gt;&lt;/A&gt;</code> en JSX es lo mismo que <code class="language-text">&lt;A children={&lt;B /&gt;} /&gt;</code>.)</em></p>
<p>Pero, ¬øqu√© ocurre si existe una condici√≥n temprana de salida?</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span> user<span class="token punctuation">,</span> children <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">.</span>isLoggedIn<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">Please login</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span></span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Layout</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Layout</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Si llamamos a <code class="language-text">Comments()</code> como una funci√≥n se ejecutar√≠a inmediatamente sin importar si <code class="language-text">Page</code> quiere renderizarlos o no:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// {</span>
<span class="token comment">//   type: Page,</span>
<span class="token comment">//   props: {</span>
<span class="gatsby-highlight-code-line"><span class="token comment">//     children: Comments() // ¬°Siempre se ejecuta!</span></span><span class="token comment">//   }</span>
<span class="token comment">// }</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Page</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="gatsby-highlight-code-line"><span class="token plain-text">  </span><span class="token punctuation">{</span><span class="token function">Comments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"></span></span><span class="token plain-text"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Page</span><span class="token punctuation">></span></span></code></pre></div>
<p>Pero si pasamos un elemento de React, no ejecutamos <code class="language-text">Comments</code> en lo absoluto.</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// {</span>
<span class="token comment">//   type: Page,</span>
<span class="token comment">//   props: {</span>
<span class="gatsby-highlight-code-line"><span class="token comment">//     children: { type: Comments }</span></span><span class="token comment">//   }</span>
<span class="token comment">// }</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Page</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="gatsby-highlight-code-line"><span class="token plain-text">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Comments</span> <span class="token punctuation">/></span></span><span class="token plain-text"></span></span><span class="token plain-text"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Page</span><span class="token punctuation">></span></span></code></pre></div>
<p>Esto le permite a React decidir cu√°ndo y <em>si</em> llamarlo. Si nuestro componente <code class="language-text">Page</code> ignora su prop <code class="language-text">children</code> y renderiza en cambio <code class="language-text">&lt;h1&gt;Please login&lt;/h1&gt;</code>, React no intentar√° siquiera llamar a la funci√≥n <code class="language-text">Comments</code>. ¬øCu√°l ser√≠a el punto en hacerlo?</p>
<p>Esto es bueno porque permite evitar trabajo de renderizado innecesario que de otra forma ser√≠a desechado y reduce la fragilidad del c√≥digo. (No nos importa si <code class="language-text">Comments</code> lanza o no un error cuando el usuario est√° desconectado, porque no ser√° llamado).</p>
<h2 id="estado"><a href="#estado" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Estado</h2>
<p><a href="#conciliaci%C3%B3n">Antes</a> hablamos acerca de la identidad y de c√≥mo la ¬´posici√≥n¬ª conceptual en el √°rbol le dice a React si debe reutilizar una instancia anfitriona o crear una nueva. Las instancias anfitrionas puenden tenert todo tipo de estado local: foco, selecci√≥n, entrada, etc. Queremos reservar estado entre actualizaciones que conceptualmente rendericen la misma IU. Adem√°s, queremos destruirlo previsiblemente cuando rendericemos algo conceptualmente diferente (como movernos desde <code class="language-text">&lt;SignupForm&gt;</code> a <code class="language-text">&lt;MessengerChat&gt;</code>).</p>
<p><strong>El estado local es tan √∫til porque React permite que <em>tus propios</em> componentes tambi√©n lo tengan.</strong> Los componentes son a√∫n funciones, pero React los aumenta con caracter√≠sticas que son √∫tiles para las IU. El estado local vinculado a la posici√≥n en el √°rbol es una de esas caracter√≠sticas.</p>
<p>Llamamos a estas caracter√≠sticas <em>Hooks</em>. Por ejemplo, <code class="language-text">useState</code> es un Hook.</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="gatsby-highlight-code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">You clicked </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text"> times</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"></span></span><span class="gatsby-highlight-code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span></span><span class="token plain-text">        Click me</span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Devuelve un par de valores: el estado actual y una funci√≥n que lo actualiza.</p>
<p>La sintaxis de <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#Array_destructuring" target="_blank" rel="nofollow noopener noreferrer">desestructuraci√≥n de arreglos</a> nos permite darles nombres arbitrarios a nuestras variables de estado. Por ejemplo, nombr√© a este par <code class="language-text">count</code> y <code class="language-text">setCount</code>, pero pudo haber sido <code class="language-text">banana</code> y <code class="language-text">setBanana</code>. En lo que queda del texto, usar√© <code class="language-text">setState</code> para referirme al segundo valor sin importar el nombre real que tenga en los ejemplos.</p>
<p><em>(Puedes aprender m√°s de <code class="language-text">useState</code> y otros Hooks proporcionados por React <a href="https://reactjs.org/docs/hooks-intro.html" target="_blank" rel="nofollow noopener noreferrer">aqu√≠</a>).</em></p>
<h2 id="consistencia"><a href="#consistencia" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Consistencia</h2>
<p>Incluso si quisi√©ramos dividir el proceso de conciliaci√≥n en porciones de tareas que <a href="https://www.youtube.com/watch?v=mDdgfyRB5kg" target="_blank" rel="nofollow noopener noreferrer">no se bloqueen</a>, a√∫n har√≠amos las operaciones reales del √°rbol anfitri√≥n en un solo paso s√≠ncrono. De esta manera podemos asegurar que el usuario no ve una interfaz actualizada a medias y que el navegador no vuelva a realizar c√°lculos innecesarios del dise√±o y el estilo para estados intermedios que el usuario no deber√≠a ver.</p>
<p>Por esto es que React divide todo el trabajo en la ¬´fase de renderizado¬ª y la ¬´fase de confirmaci√≥n¬ª. La ¬´fase de renderizado¬ª es cuando React llama a tus componentes y realiza la conciliaci√≥n. Es seguro interrumpirla y <a href="https://reactjs.org/blog/2018/03/01/sneak-peek-beyond-react-16.html" target="_blank" rel="nofollow noopener noreferrer">en el futuro</a> ser√° as√≠ncrona. La <em>fase de <em>confirmaci√≥n</em></em> ocurre cuando React toca el √°rbol anfitri√≥n. Siempre es s√≠ncrona.</p>
<h2 id="memoizaci√≥n"><a href="#memoizaci%C3%B3n" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Memoizaci√≥n</h2>
<p>Cuando un padre programa una actualizaci√≥n llamando a <code class="language-text">setState</code>, React concilia de forma predeterminada todo su sub√°rbol secundario. Esto se debe a que React no puede saber si una actualizaci√≥n en el padre afectar√≠a al hijo o no, y por defecto React opta por ser consistente. Esto puede parecer muy costoso, pero en la pr√°ctica no es un problema para los sub√°rboles peque√±os y medianos.</p>
<p>Cuando los √°rboles se vuelven demasiado profundos o anchos, puedes decirle a React que <a href="https://en.wikipedia.org/wiki/Memoization" target="_blank" rel="nofollow noopener noreferrer">memoice</a> un sub√°rbol y reutilice el resultado de la renderizaci√≥n anterior durante cambios de props superficialmente iguales:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">{</span> item <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="gatsby-highlight-code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span>Row<span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre></div>
<p>Ahora <code class="language-text">setState</code> en un componente padre <code class="language-text">&lt;Table&gt;</code> se saltar√≠a la conciliaci√≥n de <code class="language-text">Row</code> cuyo <code class="language-text">item</code> es referencialmente igual al <code class="language-text">item</code> renderizado la √∫ltima vez.</p>
<p>Puedes obtener una memoizaci√≥n detallada al nivel de expresiones individuales con el <a href="https://reactjs.org/docs/hooks-reference.html#usememo" target="_blank" rel="nofollow noopener noreferrer">Hook <code class="language-text">useMemo()</code></a>. La cach√© es local a la posici√≥n del √°rbol de componentes y se destruir√° junto con su estado local. Solo tiene un √∫ltimo elemento.</p>
<p>React de manera intencional no memoiza componentes por defecto. Muchos componentes siempre reciben diferentes props por lo que memoizarlos constituir√≠a una p√©rdida neta.</p>
<h2 id="modelos-en-bruto"><a href="#modelos-en-bruto" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Modelos en bruto</h2>
<p>Ir√≥nicamente, React no usa un sistema de ¬´reactividad¬ª para actualizaciones detalladas. En otras palabras, cualquier actualizaci√≥n en la parte superior desencadena la conciliaci√≥n en lugar de actualizar solo los componentes afectados por los cambios.</p>
<p>Esta es una decisi√≥n de dise√±o intencional. <a href="https://calibreapp.com/blog/time-to-interactive/" target="_blank" rel="nofollow noopener noreferrer"><em>El tiempo para interactuar</em></a> es una m√©trica crucial en aplicaciones web de consumo y los modelos que hacen un recorrido para configurar <em>listeners</em> detallados consumen ese tiempo precioso. Adicionalmente, en muchas aplicaciones las interacciones pueden resultar en peque√±as (pasarle por encima a un bot√≥n) o grandes (transiciones de p√°gina) actualizaciones, en cuyo caso las suscripciones detalladas son un desperdicio de los recursos de memoria.</p>
<p>Una de los principios b√°sicos de dise√±o de React es que funciona con datos en bruto. Si tienes una cantidad de objetos Javascript recibidos por la red, puedes incorporarlos directamente en tus componentes sin procesamiento. No hay errores inesperados en cuanto a qu√© propiedades puedes acceder, o ca√≠das inesperadas en el rendimiento cuando una estructura cambia ligeramente. El renderizado de React es O(<em>tama√±o de la vista</em>) y no O(<em>tama√±o del modelo</em>), y se puede reducir significativamente el <em>tama√±o de la vista</em> con la t√©cnica de <a href="https://react-window.now.sh/#/examples/list/fixed-size" target="_blank" rel="nofollow noopener noreferrer"><em>ventanas virtuales</em></a>.</p>
<p>Hay algunos tipos de aplicaciones donde la suscripciones detalladas son beneficiosas (como los indicadores de cotizaciones burs√°tiles). Este es un ejemplo poco com√∫n de ¬´todo se actualiza constantemente al mismo tiempo¬ª. Si bien las v√≠as de escape imperativas pueden ayudar a optimizar dicho c√≥digo, React podr√≠a no ser la mejor opci√≥n para este caso de uso. A√∫n as√≠, puedes implementar tu propio sistema detallado de suscripci√≥n sobre React.</p>
<p><strong>Nota que hay problemas de rendimiento comunes que incluso los sistemas detallados de suscripciones y ¬´reactivos¬ª no pueden solucionar.</strong> Por ejemplo, renderizar un <em>nuevo</em> √°rbol profundo (lo que ocurren en cada transici√≥n de p√°gina) sin bloquear el navegador. El seguimiento de cambios no lo hace m√°s r√°pido, lo hace m√°s lento, porque tenemos que hacer m√°s trabajo para configurar las suscripciones. Otro problema es que tenemos que esperar datos antes de poder comenzar a renderizar la vista. En React, nuestro objetivo es resolver ambos problemas con el <a href="https://reactjs.org/blog/2018/03/01/sneak-peek-beyond-react-16.html" target="_blank" rel="nofollow noopener noreferrer">renderizado concurrente</a>.</p>
<h2 id="procesamiento-por-lotes"><a href="#procesamiento-por-lotes" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Procesamiento por lotes</h2>
<p>Es posible que varios componentes deseen actualizar el estado en respuesta al mismo evento. Este ejemplo es complicado, pero ilustra un patr√≥n com√∫n:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
<span class="gatsby-highlight-code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span></span><span class="token plain-text">      Parent clicked </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text"> times</span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Child</span> <span class="token punctuation">/></span></span><span class="token plain-text"></span>
<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
<span class="gatsby-highlight-code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span></span><span class="token plain-text">      Child clicked </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text"> times</span>
<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Cuando se env√≠a un evento, el <code class="language-text">onClick</code> del hijo se dispara primero (activando su <code class="language-text">setState</code>). Luego, el padre llama a <code class="language-text">setState</code> en su propio manejador del <code class="language-text">onClick</code>.</p>
<p>Si React vuelve a renderizar inmediatamente los componentes en respuesta a las llamadas a <code class="language-text">setState</code>, terminar√≠amos renderizando el hijo dos veces:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token operator">**</span><span class="token operator">*</span> Entering React's browser click event handler <span class="token operator">**</span><span class="token operator">*</span>
<span class="token function">Child</span> <span class="token punctuation">(</span>onClick<span class="token punctuation">)</span>
  <span class="token operator">-</span> setState
<span class="gatsby-highlight-code-line">  <span class="token operator">-</span> re<span class="token operator">-</span>render Child <span class="token comment">// üòû innecesario</span></span><span class="token function">Parent</span> <span class="token punctuation">(</span>onClick<span class="token punctuation">)</span>
  <span class="token operator">-</span> setState
  <span class="token operator">-</span> re<span class="token operator">-</span>render Parent
<span class="gatsby-highlight-code-line">  <span class="token operator">-</span> re<span class="token operator">-</span>render Child</span><span class="token operator">**</span><span class="token operator">*</span> Exiting React's browser click event handler <span class="token operator">**</span><span class="token operator">*</span></code></pre></div>
<p>El primer renderizado de <code class="language-text">Child</code> se perder√≠a. Y no pudimos hacer que React omitiera la renderizaci√≥n de <code class="language-text">Child</code> por segunda vez porque <code class="language-text">Parent</code> podr√≠a pasarle datos diferentes seg√∫n su estado actualizado.</p>
<p><strong>Esta es la raz√≥n por la que React hace actualizaciones en lote dentro de los manejadores de eventos:</strong></p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token operator">**</span><span class="token operator">*</span> Entering React's browser click event handler <span class="token operator">**</span><span class="token operator">*</span>
<span class="token function">Child</span> <span class="token punctuation">(</span>onClick<span class="token punctuation">)</span>
  <span class="token operator">-</span> setState
<span class="token function">Parent</span> <span class="token punctuation">(</span>onClick<span class="token punctuation">)</span>
  <span class="token operator">-</span> setState
<span class="token operator">**</span><span class="token operator">*</span> Processing state updates                     <span class="token operator">**</span><span class="token operator">*</span>
  <span class="token operator">-</span> re<span class="token operator">-</span>render Parent
  <span class="token operator">-</span> re<span class="token operator">-</span>render Child
<span class="token operator">**</span><span class="token operator">*</span> Exiting React's browser click event handler  <span class="token operator">**</span><span class="token operator">*</span></code></pre></div>
<p>Las llamadas a <code class="language-text">setState</code> en componentes no causar√≠an inmediatamente un renderizado. En cambio, React ejecutar√≠a primero todos los manejadores de eventos y luego iniciar√≠a un solo rerenderizado agrupando todas las actualizaciones.</p>
<p>El procesamiento en lote es bueno para el rendimiento, pero puede sorprender si escribes c√≥digo como este:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCounter<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setCounter</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code></pre></div>
<p>Si iniciamos con <code class="language-text">count</code> en <code class="language-text">0</code>, ser√≠an solo tres llamadas a <code class="language-text">setCount(1)</code>. Para solucionarlo, <code class="language-text">setState</code> proporciona un argumento extra que acepta un funci√≥n ¬´actualizadora¬ª:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCounter<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setCounter</span><span class="token punctuation">(</span>c <span class="token operator">=></span> c <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code></pre></div>
<p>React pone las funciones actualizadoras en una cola y luego las ejecuta en secuencia. Como resultado se renderiza con <code class="language-text">count</code> igual a <code class="language-text">3</code>.</p>
<p>Cuando la l√≥gica del estado se vuelve m√°s compleja que unas pocas llamadas a <code class="language-text">setState</code>, recomiendo expresarla como un reductor de estado local con el <a href="https://reactjs.org/docs/hooks-reference.html#usereducer" target="_blank" rel="nofollow noopener noreferrer">Hook <code class="language-text">useReducer</code></a>. Es como una evoluci√≥n de este patr√≥n de ¬´actualizador¬ª en el cual cada actualizaci√≥n lleva un nombre:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">  <span class="token keyword">const</span> <span class="token punctuation">[</span>counter<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">===</span> <span class="token string">'increment'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'increment'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'increment'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'increment'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code></pre></div>
<p>El argumento <code class="language-text">action</code> puede ser cualquier cosa, sin embargo, un objeto es una elecci√≥n com√∫n.</p>
<h2 id="√°rbol-de-llamadas"><a href="#%C3%A1rbol-de-llamadas" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>√Årbol de llamadas</h2>
<p>Un <em>runtime</em> de un lenguaje de programaci√≥n usualmente tiene una <a href="https://medium.freecodecamp.org/understanding-the-javascript-call-stack-861e41ae61d4" target="_blank" rel="nofollow noopener noreferrer">pila de llamadas</a>. Cuando una funci√≥n <code class="language-text">a()</code> llama a <code class="language-text">b()</code> que a su vez llama a <code class="language-text">c()</code>, en alg√∫n lugar en el motor de Javascript hay una estructura de datos como <code class="language-text">[a, b, c]</code> que ¬´hace un seguimiento¬ª de d√≥nde est√°s y qu√© c√≥digo hay que ejecutar a continuaci√≥n. Una vez que sales de <code class="language-text">c</code>, el fotograma de la pila de llamada se va, ¬ødesaparece! Ya no se necesita. Volvemos a <code class="language-text">b</code>. Para cuando salimos de <code class="language-text">a</code>, la pila de llamadas est√° vac√≠a.</p>
<p>Por supuesto, el propio React corre sobre Javascript y respeta las reglas de Javascript. Pero podemos imaginarnos que internamente React tiene una suerte de pila de llamadas propia para recordar qu√© componente estamos actualmente renderizando, por ejemplo <code class="language-text">[App, Page, Layout, Article /* estamos aqu√≠ */]</code>.</p>
<p>React es diferente a un <em>runtime</em> de un lenguaje de prop√≥sito general porque su objetivo es renderizar √°rboles de interfaces de usuario. Estos √°rboles necesitan ¬´permanecer vivos¬ª para que interactuemos con ellos. El DOM no desaparece despu√©s de nuestra primera llamada a <code class="language-text">ReactDOM.render()</code>.</p>
<p>Esto podr√≠a estar estrechando la m√©tafora, pero me gusta pensar en los componentes de React como un ¬´√°rbol de llamadas¬ª m√°s que solo una ¬´pila de llamadas¬ª. Cuando ¬´salimos¬ª del componente <code class="language-text">Article</code>, el fotograma del ¬´√°rbol de llamadas¬ª de React no se destruye. Necesitamos mantener el estado local y las referencias a las instancias anfitrionas en <a href="https://medium.com/react-in-depth/the-how-and-why-on-reacts-usage-of-linked-list-in-fiber-67f1014d0eb7" target="_blank" rel="nofollow noopener noreferrer">alg√∫n sitio</a>.</p>
<p>Estos fotogramas del ¬´√°rbol de llamadas¬ª <em>son</em> destruidos junto con su estado local y las instancias anfitrionas, pero solo cuando las reglas de la <a href="#conciliaci%C3%B3n">conciliaci√≥n</a> dicen que es necesario. Si alguna vez le√≠ste el c√≥digo fuente de React, puede que hayas visto hacer referencia a estos fotogramas como <a href="https://en.wikipedia.org/wiki/Fiber_(computer_science)" target="_blank" rel="nofollow noopener noreferrer">fibras</a>.</p>
<p>Las fibras son donde vive en realidad el estado local. Cuando se actualiza el estado, React marca las fibras debajo como necesitadas de conciliaci√≥n y llama a esos componentes.</p>
<h2 id="contexto"><a href="#contexto" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contexto</h2>
<p>En React, le pasamos datos hacia abajo a otros componentes como props. A veces, la mayor√≠a de los componentes necesitan lo mismo, por ejemplo, el tema visual escogido actualmente. Se vuelve inc√≥modo pasarlo hacia abajo en cada nivel.</p>
<p>En React, esto lo resuelve el <a href="https://reactjs.org/docs/context.html" target="_blank" rel="nofollow noopener noreferrer">Contexto</a>. Es esencialmente como <a href="http://wiki.c2.com/?DynamicScoping" target="_blank" rel="nofollow noopener noreferrer">el alcance din√°mico</a> para componentes. Es como una agujero de gusano que te permite poner algo encima, y cada hijo debajo es capaz de leer y volver a renderizar cuando cambia.</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> ThemeContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span>
  <span class="token string">'light'</span> <span class="token comment">// Valor predeterminado como reserva</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">DarkApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ThemeContext.Provider</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dark<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyComponents</span> <span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ThemeContext.Provider</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">SomeDeeplyNestedChild</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Depende de d√≥nde el hijo se renderiza</span>
  <span class="token keyword">const</span> theme <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>ThemeContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Cuando <code class="language-text">SomeDeeplyNestedChild</code> renderiza, <code class="language-text">useContext(ThemeContext)</code> buscar√° por el <code class="language-text">&lt;ThemeContext.Provider&gt;</code> m√°s cercano por encima de √©l en el √°rbol, y usar√° su <code class="language-text">value</code>.</p>
<p>(En la pr√°ctica, React mantiene una pila de contexto mientras renderiza).</p>
<p>Si no hay arriba un <code class="language-text">ThemeContext.Provider</code>, el resultado de la llamada a <code class="language-text">useContext(ThemeContext)</code> ser√° el valor por defecto especificado en la llamada a <code class="language-text">createContext()</code>. En nuestro ejemplo es <code class="language-text">&#39;light&#39;</code>.</p>
<h2 id="efectos"><a href="#efectos" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Efectos</h2>
<p>Mencionamos antes que los componentes de React no deber√≠an tener efectos secundarios observables durante el renderizado. Pero los efectos secundarios a veces son necesarios. Podemos querer manejar el foco, dibujar en un <em>canvas</em>, suscribirnos a una fuente de datos, etc.</p>
<p>En React, ello se hace al declarar un efecto:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="gatsby-highlight-code-line">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token string">`You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times`</span></span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">You clicked </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text"> times</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">        Click me</span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Siempre que sea posible, React retarda la ejecuci√≥n de los efectos hasta que el navegador repinta la pantalla. Esto es bueno, porque c√≥digo como las suscripciones a una fuente de datos no deber√≠an impactar el <a href="https://calibreapp.com/blog/time-to-interactive/" target="_blank" rel="nofollow noopener noreferrer">tiempo para ser interactivo</a> y el <a href="https://developers.google.com/web/tools/lighthouse/audits/first-meaningful-paint" target="_blank" rel="nofollow noopener noreferrer">tiempo de la primera pintura</a>. (Hay un Hook <a href="https://reactjs.org/docs/hooks-reference.html#uselayouteffect" target="_blank" rel="nofollow noopener noreferrer">raramente usado</a> que permite abandonar este comportamiento y hacer cosas sincr√≥nicamente. Ev√≠talo).</p>
<p>Los efectos no se ejecutan solo una vez. Se ejecutan despu√©s que el componente se muestra al usuario por primera vez y tambi√©n despu√©s que se actualiza. Los efectos pueden utilizar las props y el estado actual, como con <code class="language-text">count</code> en el ejemplo anterior.</p>
<p>Los efectos pueden requerir una fase de limpieza, como en el caso de las suscripciones. Para hacer la limpieza, un efecto puede devolver una funci√≥n:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    DataSource<span class="token punctuation">.</span><span class="token function">addSubscription</span><span class="token punctuation">(</span>handleChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> DataSource<span class="token punctuation">.</span><span class="token function">removeSubscription</span><span class="token punctuation">(</span>handleChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>React ejecutar√° la funci√≥n devuelta antes de aplicar este efecto la pr√≥xima vez y tambi√©n antes de que se destruya el componente.</p>
<p>A veces, volver a ejecutar el efecto en cada renderizado puede no ser deseable. Le puedes decir a React que se <a href="https://reactjs.org/docs/hooks-effect.html#tip-optimizing-performance-by-skipping-effects" target="_blank" rel="nofollow noopener noreferrer">salte</a> la aplicaci√≥n de un efecto si ciertas variables no cambiaron:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token string">`You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times`</span></span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre></div>
<p>Sin embargo, a menudo es una optimizaci√≥n prematura y puede conducir a problemas si no est√°s familiarizado con c√≥mo funcionan las clausuras en Javascript:</p>
<p>Por ejemplo, este c√≥digo es problem√°tico:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    DataSource<span class="token punctuation">.</span><span class="token function">addSubscription</span><span class="token punctuation">(</span>handleChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> DataSource<span class="token punctuation">.</span><span class="token function">removeSubscription</span><span class="token punctuation">(</span>handleChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Lo que pasa es que <code class="language-text">[]</code> dice ¬´no vuelvas a ejecutar nunca este efecto¬ª. Pero el efecto aplica una clausura sobre <code class="language-text">handleChange</code> que est√° definido fuera de √©l y <code class="language-text">handleChange</code> podr√≠a referenciar cualquier prop o estado:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">  <span class="token keyword">function</span> <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code></pre></div>
<p>Si no dejamos que el efecto se vuelva a ejecutar nunca, <code class="language-text">handleChange</code> seguir√≠a apuntando a la versi√≥n del primer renderizado, y <code class="language-text">count</code> ser√≠a siempre <code class="language-text">0</code> dentro de √©l.</p>
<p>Para resolver esto, aseg√∫rate de que si especificas el arreglo de dependencias, incluya <strong>todo</strong> lo que puede cambiar, incluidas ls funciones:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    DataSource<span class="token punctuation">.</span><span class="token function">addSubscription</span><span class="token punctuation">(</span>handleChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> DataSource<span class="token punctuation">.</span><span class="token function">removeSubscription</span><span class="token punctuation">(</span>handleChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>handleChange<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre></div>
<p>Dependiendo de tu c√≥digo, puede que a√∫n veas resuscripciones innecesarios, porque el propio <code class="language-text">handleChange</code> es diferente en cada renderizado. El Hook <a href="https://reactjs.org/docs/hooks-reference.html#usecallback" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">useCallback</code></a> puede ayudarte con eso. De manera alternativa, simplemente puedes dejarlo que resuscriba. Por ejemplo, la API del navegador <code class="language-text">addEventListener</code> es extremadamente r√°pida y hacer malabares para evitar llamarla podr√≠a reportar m√°s problemas que beneficios.</p>
<p><em>(Puedes aprender m√°s sobre <code class="language-text">useEffect</code> y otros Hooks proporcionados por React <a href="https://reactjs.org/docs/hooks-effect.html" target="_blank" rel="nofollow noopener noreferrer">aqu√≠</a>.)</em></p>
<h2 id="hooks-personalizados"><a href="#hooks-personalizados" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Hooks personalizados</h2>
<p>Dado que los Hooks como <code class="language-text">useState</code> y <code class="language-text">useEffect</code> son llamadas a funciones, podemos componerlos en nuestros propios Hooks:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">MyResponsiveComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> width <span class="token operator">=</span> <span class="token function">useWindowWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Nuestro Hook personalizado</span></span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Window width is </span><span class="token punctuation">{</span>width<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="gatsby-highlight-code-line"><span class="token keyword">function</span> <span class="token function">useWindowWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>width<span class="token punctuation">,</span> setWidth<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleResize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setWidth</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> handleResize<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> handleResize<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> width<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Los Hooks personalizados permiten a los componentes compartir l√≥gica de estado reutilizable. Nota que el <em>estado en s√≠</em> no se comparte. Cada llamada a un Hook declara su propio estado aislado.</p>
<p><em>(Puedes aprender m√°s de c√≥mo escribir tus propios Hooks <a href="https://reactjs.org/docs/hooks-custom.html" target="_blank" rel="nofollow noopener noreferrer">aqu√≠</a>).</em></p>
<h2 id="orden-est√°tico-de-uso"><a href="#orden-est%C3%A1tico-de-uso" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Orden est√°tico de uso</h2>
<p>Puedes pensar en <code class="language-text">useState</code> como una sintaxis para definir una ¬´variable de estado de React¬ª. No es <em>en realidad</em> una sintaxis, por supuesto. A√∫n estamos escribiendo Javascript. Pero al mirar a React como un <em>runtime</em> y porque React adapta Javascript para describir √°rboles de IU, sus caracter√≠sticas algunas veces se mueven dentro del √°mbito de los lenguajes.</p>
<p>Si <code class="language-text">use</code> <em>fuera</em> una sintaxis, tendr√≠a sentido que estuviera en el nivel superior:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// üòâ Nota: No es una sintaxis real</span>
component <span class="token function">Example</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> use <span class="token function">State</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">You clicked </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text"> times</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">        Click me</span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>¬øAcaso tendr√≠a alg√∫n sentido ponerlo en una condici√≥n, o en un <em>callback</em> o fuera de un componente?</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// üòâ Nota: no es una sintaxis real</span>

<span class="token comment">// Esto es estado local... ¬øde qu√©?</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> use <span class="token function">State</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

component <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ¬øQu√© le sucede cuando la condici√≥n es falsa?</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> use <span class="token function">State</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ¬øQu√© le ocurre cuando salimos de una funci√≥n?</span>
    <span class="token comment">// ¬øDe qu√© forma esto es diferente a una variable?</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> use <span class="token function">State</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code></pre></div>
<p>El estado en React es local al <em>componente</em> y a su identidad en el √°rbol. Si <code class="language-text">use</code> fuera una sintaxis real, tambi√©n tendr√≠a sentido permitirla solo en el √°mbito del nivel superior de los componentes:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// üòâ Nota: no es una sintaxis real</span>
component <span class="token function">Example</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Solo v√°lido aqu√≠</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> use <span class="token function">State</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Esto ser√≠a un error de sintaxis</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> use <span class="token function">State</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code></pre></div>
<p>Es similar a como <code class="language-text">import</code> solo funciona en el nivel superior de un m√≥dulo.</p>
<p><strong>Por supuesto, <code class="language-text">use</code> no es en realidad una sintaxis.</strong> (No traer√≠a mucho beneficio y crear√≠a mucha fricci√≥n).</p>
<p>Sin embargo, React <em>s√≠</em> espera que todas las llamadas a los Hooks ocurran solo en el nivel superior de un componente e incondicionalmente. Estas <a href="https://reactjs.org/docs/hooks-rules.html" target="_blank" rel="nofollow noopener noreferrer">Reglas de los Hooks</a> se pueden hacer cumplir con un <a href="https://www.npmjs.com/package/eslint-plugin-react-hooks" target="_blank" rel="nofollow noopener noreferrer">plugin de un <em>lint</em></a>. Han existido discusiones acaloradas acerca de esta elecci√≥n de dise√±o, pero en la pr√°ctica no he visto que confunda a la gente. Tambi√©n escrib√≠ por qu√© alternativas propuestas com√∫nmente <a href="https://overreacted.io/why-do-hooks-rely-on-call-order/" target="_blank" rel="nofollow noopener noreferrer">no funcionan</a>.</p>
<p>Internamente, los Hooks se implementan como <a href="https://dev.to/aspittel/thank-u-next-an-introduction-to-linked-lists-4pph" target="_blank" rel="nofollow noopener noreferrer">listas enlazadas</a>. Cuando se llama a <code class="language-text">useState</code>, movemos el puntero al pr√≥ximo elemento. Cuando salimos del <a href="#%C3%A1rbol-de-llamadas">fotograma del ¬´√°rbol de llamada¬ª</a> del componente, guardamos la lista resultante ah√≠ hasta el pr√≥ximo renderizado.</p>
<p><a href="https://medium.com/@ryardley/react-hooks-not-magic-just-arrays-cd4f1857236e" target="_blank" rel="nofollow noopener noreferrer">Este art√≠culo</a> proporciona una explicaci√≥n simplificada de c√≥mo los Hooks funcionan internamente. Los arreglos puede que sean un modelo mental m√°s f√°cil que las listas enlazadas:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// Seudoc√≥digo</span>
<span class="token keyword">let</span> hooks<span class="token punctuation">,</span> i<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  i<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>hooks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Pr√≥ximos renderizados</span>
    <span class="token keyword">return</span> hooks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Primer renderizado</span>
  hooks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Se prepara el renderizado</span>
i <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
hooks <span class="token operator">=</span> fiber<span class="token punctuation">.</span>hooks <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// Se llama al compnente</span>
<span class="token function">YourComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Se recuerda el estado de los Hooks</span>
fiber<span class="token punctuation">.</span>hooks <span class="token operator">=</span> hooks<span class="token punctuation">;</span></code></pre></div>
<p><em>(Si sientes curiosidad, el c√≥digo real est√° <a href="https://github.com/facebook/react/blob/master/packages/react-reconciler/src/ReactFiberHooks.js" target="_blank" rel="nofollow noopener noreferrer">aqu√≠</a>).</em></p>
<p>Esto es a grandes rasgos como cada llamada a <code class="language-text">useState()</code> obtiene el estado correcto. Como aprendimos <a href="#conciliaci%C3%B3n">antes</a>, ¬´hacer coincidir las cosas¬ª no es nuevo para React. La conciliaci√≥n depende de una manera similar en que los elementos coincidan entre los renderizados.</p>
<h2 id="lo-que-se-qued√≥-fuera"><a href="#lo-que-se-qued%C3%B3-fuera" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Lo que se qued√≥ fuera</h2>
<p>Hemos abordado casi todos los aspectos importantes del <em>runtime</em> de React. Si terminaste esta p√°gina, probablemente conoces React con m√°s detalle que el 90% de sus usuarios. ¬°Y no hay nada malo en ello!</p>
<p>Hay algunas partes que dej√© fuera, en su mayor√≠a, porque no est√°n claras incluso para nosotros. React actualmente no tiene una buena historia para el renderizado multipasos, o sea, cuando el renderizador del padre necesita informaci√≥n sobre los hijos. Tambi√©n, la <a href="https://reactjs.org/docs/error-boundaries.html" target="_blank" rel="nofollow noopener noreferrer">API de manejo de errores</a> no tiene todav√≠a una versi√≥n con Hooks. Es posible que estos dos problemas se puedan resolver juntos. El modo concurrente a√∫n no es estable y hay preguntas interesantes sobre como Suspense encaja en esta historia. Quiz√° haga un seguimiento cuando salgan y Suspense est√© listo para m√°s que la <a href="https://reactjs.org/blog/2018/10/23/react-v-16-6.html#reactlazy-code-splitting-with-suspense" target="_blank" rel="nofollow noopener noreferrer">carga diferida</a>.</p>
<p><strong>Creo que habla del √©xito de la API de React que puedas llegar bien lejos sin siquiera pensar en la mayor√≠a de estos temas.</strong> Buenos valores predeterminados como las heur√≠sticas de conciliaci√≥n hacen lo correcto en la mayor√≠a de los casos. Advertencias como la de <code class="language-text">key</code> te avisan cuando est√° a punto de salirte el tiro por la culata.</p>
<p>Si eres un apasionado de las bibliotecas de IU espero que este art√≠culo haya sido entretenido en cierta forma y haya aclarado con mayor profundidad como funciona React. O quiz√° decidiste que React es demasiado complicado y no quieres verlo nunca m√°s. En cualquier caso, ¬°me gustar√≠a saber lo que piensas en Twitter! Gracias por leer.</p></div><footer><p><a href="https://mobile.twitter.com/search?q=https%3A%2F%2Foverreacted.io%2Freact-as-a-ui-runtime%2F" target="_blank" rel="noopener noreferrer">Discuss on Twitter</a> ‚Ä¢ <a href="https://github.com/gaearon/overreacted.io/edit/master/src/pages/react-as-a-ui-runtime/index.es.md" target="_blank" rel="noopener noreferrer">Edit on GitHub</a></p></footer></article></main><aside><div style="margin:90px 0 40px 0;font-family:system-ui, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;,
    &quot;Roboto&quot;, &quot;Oxygen&quot;, &quot;Ubuntu&quot;, &quot;Cantarell&quot;, &quot;Fira Sans&quot;,
    &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif"><form action="https://app.convertkit.com/forms/812047/subscriptions" class="seva-form formkit-form" method="post" min-width="400 500 600 700 800" style="background-color:rgb(255, 255, 255);border-radius:6px"><div data-style="full"><div data-element="column" class="formkit-column" style="background-color:rgb(249, 250, 251)"><h1 class="formkit-header" data-element="header" style="color:rgb(77, 77, 77);font-size:20px;font-weight:700">Join the Newsletter</h1><div data-element="subheader" class="formkit-subheader" style="color:rgb(104, 104, 104)"><p>Subscribe to get my latest content by email.</p></div><div class="formkit-image"><svg xmlns="http://www.w3.org/2000/svg" width="46" height="46" viewBox="0 0 46 46" style="max-width:100%"><g fill="none" fill-rule="evenodd"><path fill="#DD92AB" d="M23,36 C22.813,36 22.627,35.948 22.463,35.844 L0.463,21.844 C0.159,21.651 -0.017,21.308 0.001,20.948 C0.02,20.589 0.23,20.266 0.553,20.105 L23,6 L45.447,20.105 C45.769,20.266 45.98,20.588 45.999,20.948 C46.018,21.308 45.841,21.65 45.537,21.844 L23.537,35.844 C23.373,35.948 23.187,36 23,36 Z"></path><path fill="#FFF" d="M38,37 L8,37 L8,1 C8,0.448 8.448,0 9,0 L37,0 C37.552,0 38,0.448 38,1 L38,37 Z"></path><path fill="#FFA7C4" d="M45,46 C44.916,46 44.831,45.989 44.748,45.968 L21.748,39.968 L22,33 L46,21 L46,45 C46,45.31 45.856,45.602 45.611,45.792 C45.435,45.928 45.219,46 45,46 Z"></path><path fill="#FFC3D7" d="M45,46 L1,46 C0.447,46 0,45.552 0,45 L0,21 L45.479,44.122 C45.88,44.341 46.083,44.804 45.969,45.247 C45.856,45.69 45.457,46 45,46 Z"></path><path fill="#FFA7C4" d="M19 20.414L14.293 15.707C13.902 15.316 13.902 14.684 14.293 14.293L19 9.586 20.414 11 16.414 15 20.414 19 19 20.414zM27 20.414L25.586 19 29.586 15 25.586 11 27 9.586 31.707 14.293C32.098 14.684 32.098 15.316 31.707 15.707L27 20.414z"></path></g></svg></div></div><div data-element="column" class="formkit-column"><ul class="formkit-alert formkit-alert-error" data-element="errors" data-group="alert"></ul><div data-element="fields" class="seva-fields formkit-fields"><div class="formkit-field"><input type="text" class="formkit-input" aria-label="Your first name" name="fields[first_name]" placeholder="Your first name" style="border-color:rgb(227, 227, 227);border-radius:4px;color:rgb(0, 0, 0);font-weight:400"/></div><div class="formkit-field"><input type="email" class="formkit-input" name="email_address" aria-label="Your email address" placeholder="Your email address" style="border-color:rgb(227, 227, 227);border-radius:4px;color:rgb(0, 0, 0);font-weight:400"/></div><button data-element="submit" class="formkit-submit formkit-submit" style="background-color:hsl(340, 63%, 55%);border-radius:24px;color:white;font-weight:700"><div class="formkit-spinner"></div><span>Subscribe</span></button></div><div data-element="guarantee" class="formkit-guarantee" style="color:rgb(77, 77, 77);font-size:13px;font-weight:400"><p>I won‚Äôt send you spam.</p><p>Unsubscribe at <em>any</em> time.</p></div></div></div></form></div><h3 style="font-family:Montserrat, sans-serif;margin-top:0.4375rem"><a style="box-shadow:none;text-decoration:none;color:var(--pink)" href="/Personal-Blog/">Overreacted</a></h3><div style="display:flex;margin-bottom:3.5rem"><img src="/Personal-Blog/static/profile-pic-69c77131fd248a7aaaf26fab021f469f.png" alt="Yusuf Unlu" style="margin-right:0.875rem;margin-bottom:0;height:3.5rem;border-radius:50%"/><p style="max-width:310px">Personal blog by <a href="https://mobile.twitter.com/yufusunlu">Yusuf Unlu</a>.<!-- --> <!-- -->I¬†explain with words and code.</p></div><nav><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li></li><li></li></ul></nav></aside></div></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-130227707-1', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"es-react-as-a-ui-runtime-46f","path":"/es/react-as-a-ui-runtime/"};window.dataPath="315/path---es-react-as-a-ui-runtime-46-f-8b9-HB3kIfdLp4DAToYDwd57lafiw";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-4c2cfdca2a1a25fe0c85.js"],"component---src-templates-blog-index-js":["/component---src-templates-blog-index-js-1d061c91bf8b4d1ed13d.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js.77da55083c18bdb7fbef.css","/component---src-templates-blog-post-js-5ff9d93420b5b2cefece.js"],"component---src-pages-404-js":["/component---src-pages-404-js.fd288bb02445d10643fa.css","/component---src-pages-404-js-b3cd5f330471999955d6.js"],"component---src-pages-confirm-js":["/component---src-pages-confirm-js.fd288bb02445d10643fa.css","/component---src-pages-confirm-js-009d25afd727cbb30f51.js"],"component---src-pages-thanks-js":["/component---src-pages-thanks-js.fd288bb02445d10643fa.css","/component---src-pages-thanks-js-8fa56c06867d62f44f13.js"],"pages-manifest":["/pages-manifest-a624c3b1fe19cb700e23.js"]};/*]]>*/</script><script src="/Personal-Blog/webpack-runtime-5d7b005a53ad7d835132.js" async=""></script><script src="/Personal-Blog/1-1b550cd61a5e170131aa.js" async=""></script><script src="/Personal-Blog/2-1e35639783e3cf8f44c8.js" async=""></script><script src="/Personal-Blog/0-b197e8c6c7ff26484233.js" async=""></script><script src="/Personal-Blog/app-4c2cfdca2a1a25fe0c85.js" async=""></script><script src="/Personal-Blog/component---src-templates-blog-post-js-5ff9d93420b5b2cefece.js" async=""></script></body></html>