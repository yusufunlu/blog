<!DOCTYPE html><html lang="zh-hant"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/Personal-Blog/2.8bee379ac3150e408f97.css">@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:url(/Personal-Blog/static/merriweather-400-l-8796b7875d52e9cb9b280211e8d3f82d.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:url(/Personal-Blog/static/montserrat-900-l-5751237264c0468be0d48ad1cea75b90.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}body{--pink:#ffa7c4;background-color:var(--bg)}body.light{--bg:#fff;--header:var(--pink);--textNormal:#222;--textTitle:#222;--textLink:#d23669;--hr:rgba(0,0,0,0.2);--inlineCode-bg:rgba(255,229,100,0.2);--inlineCode-text:#1a1a1a}body.dark{-webkit-font-smoothing:antialiased;--bg:#282c35;--header:#fff;--textNormal:hsla(0,0%,100%,0.88);--textTitle:#fff;--textLink:var(--pink);--hr:hsla(0,0%,100%,0.2);--inlineCode-bg:#373c49;--inlineCode-text:#e6e6e6}body:lang(ar) article,body:lang(fa) article{direction:rtl}body:lang(ar) .language-text,body:lang(ar) article .translations,body:lang(ar) article pre,body:lang(fa) .language-text,body:lang(fa) article .translations,body:lang(fa) article pre{direction:ltr}body:lang(ar) .language-text,body:lang(fa) .language-text{display:inline-block}body:lang(ar) blockquote,body:lang(fa) blockquote{border-left:unset;border-right:.32813rem solid rgba(0,0,0,.9);padding-right:1.42188rem;padding-left:unset;margin-left:.75rem;margin-right:-1.75rem}body:lang(fa) article,body:lang(fa) header>h1{font-family:Vazir}body:lang(ar) article,body:lang(ar) header>h1{font-family:Cairo,sans-serif}body:lang(ko) article,body:lang(ko) header{word-break:keep-all}code[class*=language-],pre[class*=language-]{color:#fff;background:none;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;-webkit-font-feature-settings:normal;font-feature-settings:normal;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;margin-bottom:0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{overflow:auto;padding:1.3125rem}pre[class*=language-]::selection{background:#27292a}pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:hsla(0,0%,100%,.15)}:not(pre)>code[class*=language-]{border-radius:.3em;background:var(--inlineCode-bg);color:var(--inlineCode-text);padding:.15em .2em .05em;white-space:normal}.token.attr-name{color:#addb67;font-style:italic}.token.comment{color:#809393}.token.string,.token.url{color:#addb67}.token.variable{color:#d6deeb}.token.number{color:#f78c6c}.token.builtin,.token.char,.token.constant,.token.function{color:#82aaff}.token.punctuation{color:#c792ea}.token.doctype,.token.selector{color:#c792ea;font-style:"italic"}.token.class-name{color:#ffcb8b}.token.keyword,.token.operator,.token.tag{color:#ffa7c4}.token.boolean{color:#ff5874}.token.property{color:#80cbc4}.token.namespace{color:#b2ccd6}pre[data-line]{padding:1em 0 1em 3em;position:relative}.gatsby-highlight-code-line{background-color:#022a4b;display:block;padding-right:1em;padding-left:1.25em;border-left:.25em solid #ffa7c4}.gatsby-highlight,.gatsby-highlight-code-line{margin-right:-1.3125rem;margin-left:-1.3125rem}.gatsby-highlight{margin-bottom:1.75rem;border-radius:10px;background:#011627;-webkit-overflow-scrolling:touch;overflow:auto}@media (max-width:672px){.gatsby-highlight{border-radius:0}}.gatsby-highlight pre[class*=language-]{float:left;min-width:100%}.react-toggle{touch-action:pan-x;display:inline-block;position:relative;cursor:pointer;background-color:transparent;border:0;padding:0;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}.react-toggle-screenreader-only{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.react-toggle-track{width:50px;height:24px;padding:0;border-radius:30px;background-color:#0f1114;transition:all .2s ease}.react-toggle-track-check{position:absolute;width:17px;height:17px;left:5px;top:0;bottom:0;margin-top:auto;margin-bottom:auto;line-height:0;opacity:0;transition:opacity .25s ease}.react-toggle--checked .react-toggle-track-check,.react-toggle-track-x{opacity:1;transition:opacity .25s ease}.react-toggle-track-x{position:absolute;width:17px;height:17px;right:5px;top:0;bottom:0;margin-top:auto;margin-bottom:auto;line-height:0}.react-toggle--checked .react-toggle-track-x{opacity:0}.react-toggle-thumb{position:absolute;top:1px;left:1px;width:22px;height:22px;border-radius:50%;background-color:#fafafa;box-sizing:border-box;transition:all .5s cubic-bezier(.23,1,.32,1) 0ms;-webkit-transform:translateX(0);transform:translateX(0)}.react-toggle--checked .react-toggle-thumb{-webkit-transform:translateX(26px);transform:translateX(26px);border-color:#19ab27}.react-toggle--focus .react-toggle-thumb{box-shadow:0 0 2px 3px #ffa7c4}.react-toggle:active .react-toggle-thumb{box-shadow:0 0 5px 5px #ffa7c4}</style><style data-href="/Personal-Blog/component---src-templates-blog-post-js.77da55083c18bdb7fbef.css">@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:url(/Personal-Blog/static/merriweather-400-i-l-9a3ea56a5f449980432ace5972181ef6.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:url(/Personal-Blog/static/merriweather-700-l-e24e02bb044cb07539a3a6bd12348d14.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:url(/Personal-Blog/static/merriweather-700-i-l-ad085ede31afcc5585ff34869b1cd029.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.formkit-form *{box-sizing:border-box}.formkit-form legend{border:none;font-size:inherit;margin-bottom:10px;padding:0;position:relative;display:table}.formkit-form fieldset{border:0;padding:.01em 0 0;margin:0;min-width:0}.formkit-form body:not(:-moz-handler-blocked) fieldset{display:table-cell}.formkit-form p{color:inherit;font-size:inherit;font-weight:inherit}.formkit-form[data-format="slide in"],.formkit-form[data-format=modal]{display:none}.formkit-form .formkit-checkboxes,.formkit-form .formkit-input,.formkit-form .formkit-select{width:100%}.formkit-form .formkit-button,.formkit-form .formkit-submit{border:0;border-radius:5px;color:#fff;cursor:pointer;display:inline-block;text-align:center;font-size:15px;font-weight:500;margin-bottom:15px;overflow:hidden;padding:0;position:relative;vertical-align:middle}.formkit-form .formkit-button:focus,.formkit-form .formkit-button:hover,.formkit-form .formkit-submit:focus,.formkit-form .formkit-submit:hover{outline:none}.formkit-form .formkit-button:focus>span,.formkit-form .formkit-button:hover>span,.formkit-form .formkit-submit:focus>span,.formkit-form .formkit-submit:hover>span{background-color:#dc658d}.formkit-form .formkit-button>span,.formkit-form .formkit-submit>span{display:block;transition:all .3s ease-in-out;padding:12px 24px}.formkit-form .formkit-input{background:#fff;font-size:15px;padding:12px;border:1px solid #e3e3e3;flex:1 0 auto;line-height:1.4;margin:0;transition:border-color .3s ease-out}.formkit-form .formkit-input:focus{outline:none;border-color:#1677be;transition:border-color .3s ease}.formkit-form .formkit-input::-webkit-input-placeholder{color:#848585}.formkit-form .formkit-input:-ms-input-placeholder{color:#848585}.formkit-form .formkit-input::-ms-input-placeholder{color:#848585}.formkit-form .formkit-input::placeholder{color:#848585}.formkit-form [data-group=dropdown]{position:relative;display:inline-block;width:100%}.formkit-form [data-group=dropdown]:before{content:"";top:calc(50% - 2.5px);right:10px;position:absolute;pointer-events:none;border-color:#4f4f4f transparent transparent;border-style:solid;border-width:6px 6px 0;height:0;width:0;z-index:999}.formkit-form [data-group=dropdown] select{height:auto;width:100%;cursor:pointer;color:#333;line-height:1.4;margin-bottom:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:15px;padding:12px 25px 12px 12px;border:1px solid #e3e3e3;background:#fff}.formkit-form [data-group=dropdown] select:focus{outline:none}.formkit-form [data-group=checkboxes]{text-align:left;margin:0}.formkit-form [data-group=checkboxes] [data-group=checkbox]{margin-bottom:10px}.formkit-form [data-group=checkboxes] [data-group=checkbox] *{cursor:pointer}.formkit-form [data-group=checkboxes] [data-group=checkbox]:last-of-type{margin-bottom:0}.formkit-form [data-group=checkboxes] [data-group=checkbox] input[type=checkbox]{display:none}.formkit-form [data-group=checkboxes] [data-group=checkbox] input[type=checkbox]+label:after{content:none}.formkit-form [data-group=checkboxes] [data-group=checkbox] input[type=checkbox]:checked+label:after{border-color:#fff;content:""}.formkit-form [data-group=checkboxes] [data-group=checkbox] input[type=checkbox]:checked+label:before{background:#10bf7a;border-color:#10bf7a}.formkit-form [data-group=checkboxes] [data-group=checkbox] label{position:relative;display:inline-block;padding-left:28px}.formkit-form [data-group=checkboxes] [data-group=checkbox] label:after,.formkit-form [data-group=checkboxes] [data-group=checkbox] label:before{position:absolute;content:"";display:inline-block}.formkit-form [data-group=checkboxes] [data-group=checkbox] label:before{height:16px;width:16px;border:1px solid #e3e3e3;background:#fff;left:0;top:3px}.formkit-form [data-group=checkboxes] [data-group=checkbox] label:after{height:4px;width:8px;border-left:2px solid #4d4d4d;border-bottom:2px solid #4d4d4d;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);left:4px;top:8px}.formkit-form .formkit-alert{background:#f9fafb;border:1px solid #e3e3e3;border-radius:5px;flex:1 0 auto;list-style:none;margin:25px auto;padding:12px;text-align:center;width:100%}.formkit-form .formkit-alert:empty{display:none}.formkit-form .formkit-alert-success{background:#d3fbeb;border-color:#10bf7a;color:#0c905c}.formkit-form .formkit-alert-error{background:#fde8e2;border-color:#f2643b;color:#ea4110}.formkit-form .formkit-spinner{display:flex;height:0;width:0;margin:0 auto;position:absolute;top:0;left:0;right:0;overflow:hidden;text-align:center;transition:all .3s ease-in-out}.formkit-form .formkit-spinner>div{margin:auto;width:12px;height:12px;background-color:#fff;opacity:.3;border-radius:100%;display:inline-block;-webkit-animation:formkit-bouncedelay-formkit-form-data-uid-4a352cb1fd- 1.4s ease-in-out infinite both;animation:formkit-bouncedelay-formkit-form-data-uid-4a352cb1fd- 1.4s ease-in-out infinite both}.formkit-form .formkit-spinner>div:first-child{-webkit-animation-delay:-.32s;animation-delay:-.32s}.formkit-form .formkit-spinner>div:nth-child(2){-webkit-animation-delay:-.16s;animation-delay:-.16s}.formkit-form .formkit-submit[data-active] .formkit-spinner{opacity:1;height:100%;width:50px}.formkit-form .formkit-submit[data-active] .formkit-spinner~span{opacity:0}@-webkit-keyframes formkit-bouncedelay-formkit-form-data-uid-4a352cb1fd-{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes formkit-bouncedelay-formkit-form-data-uid-4a352cb1fd-{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}.formkit-form{box-shadow:0 2px 15px 0 rgba(210,214,220,.5);max-width:700px;overflow:hidden}.formkit-form [data-style=full]{width:100%;display:block}.formkit-form .formkit-header{margin-top:0;margin-bottom:20px;font-family:inherit}.formkit-form .formkit-subheader{margin:15px 0}.formkit-form .formkit-column{background-size:cover;background-repeat:no-repeat;background-position:50%;padding:20px}.formkit-form .formkit-column:nth-child(2){border-top:1px solid #e9ecef}.formkit-form .formkit-field{margin:0 0 15px}.formkit-form .formkit-input,.formkit-form .formkit-submit{width:100%}.formkit-form .formkit-guarantee{font-size:13px;margin:0 0 15px}.formkit-form .formkit-guarantee>p{margin:0}.formkit-form .formkit-powered-by{color:#7d7d7d;display:block;font-size:12px;margin-bottom:0;text-align:center}.formkit-form .formkit-powered-by[data-active=false]{opacity:.5}.formkit-form[min-width~="600"] [data-style=full],.formkit-form[min-width~="700"] [data-style=full],.formkit-form[min-width~="800"] [data-style=full]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.formkit-form[min-width~="600"] .formkit-submit,.formkit-form[min-width~="700"] .formkit-submit,.formkit-form[min-width~="800"] .formkit-submit{width:auto}.formkit-form[min-width~="600"] .formkit-column,.formkit-form[min-width~="700"] .formkit-column,.formkit-form[min-width~="800"] .formkit-column{padding:40px}.formkit-form[min-width~="600"] .formkit-column:nth-child(2),.formkit-form[min-width~="700"] .formkit-column:nth-child(2),.formkit-form[min-width~="800"] .formkit-column:nth-child(2){border-top:none}</style><meta name="generator" content="Gatsby 2.0.91"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" title="Dan Abramov&#x27;s Overreacted Blog RSS Feed" href="/Personal-Blog/rss.xml"/><link rel="shortcut icon" href="/Personal-Blog/icons/icon-48x48.png"/><link rel="manifest" href="/Personal-Blog/manifest.webmanifest"/><title data-react-helmet="true">React å¦‚ä½•å¾å‡½å¼ï¼ˆFunctionï¼‰ä¸­å€åˆ†å‡ºé¡åˆ¥ï¼ˆClassï¼‰ï¼Ÿ â€” Overreacted</title><meta data-react-helmet="true" name="theme-color" content="#282c35"/><meta data-react-helmet="true" name="description" content="æˆ‘å€‘è«‡è«–é—œæ–¼é¡åˆ¥ã€newã€instanceofã€åŸå‹éˆï¼ˆprototype chainsï¼‰ã€å’Œ API è¨­è¨ˆã€‚"/><meta data-react-helmet="true" property="og:url" content="https://yusufunlu.github.io/Personal-Blog//zh-hant/how-does-react-tell-a-class-from-a-function/"/><meta data-react-helmet="true" property="og:title" content="React å¦‚ä½•å¾å‡½å¼ï¼ˆFunctionï¼‰ä¸­å€åˆ†å‡ºé¡åˆ¥ï¼ˆClassï¼‰ï¼Ÿ"/><meta data-react-helmet="true" property="og:description" content="æˆ‘å€‘è«‡è«–é—œæ–¼é¡åˆ¥ã€newã€instanceofã€åŸå‹éˆï¼ˆprototype chainsï¼‰ã€å’Œ API è¨­è¨ˆã€‚"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@dan_abramov"/><meta data-react-helmet="true" name="twitter:title" content="React å¦‚ä½•å¾å‡½å¼ï¼ˆFunctionï¼‰ä¸­å€åˆ†å‡ºé¡åˆ¥ï¼ˆClassï¼‰ï¼Ÿ"/><meta data-react-helmet="true" name="twitter:description" content="æˆ‘å€‘è«‡è«–é—œæ–¼é¡åˆ¥ã€newã€instanceofã€åŸå‹éˆï¼ˆprototype chainsï¼‰ã€å’Œ API è¨­è¨ˆã€‚"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:inherit;font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);border-left-color:inherit;opacity:0.8;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:var(--hr);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"â€” ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:var(--textLink);text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}a.anchor{box-shadow:none;}a.anchor svg[aria-hidden="true"]{stroke:var(--textLink);}p code{font-size:1rem;}h1 code, h2 code, h3 code, h4 code, h5 code, h6 code{font-size:inherit;}li code{font-size:1rem;}blockquote.translation{font-size:1em;}</style><link as="script" rel="preload" href="/Personal-Blog/component---src-templates-blog-post-js-ef2898a2e81c47683f5b.js"/><link as="script" rel="preload" href="/Personal-Blog/app-198cd55e69a6a03b3f73.js"/><link as="script" rel="preload" href="/Personal-Blog/0-b197e8c6c7ff26484233.js"/><link as="script" rel="preload" href="/Personal-Blog/2-469c709c476faea7103a.js"/><link as="script" rel="preload" href="/Personal-Blog/1-1b550cd61a5e170131aa.js"/><link as="script" rel="preload" href="/Personal-Blog/webpack-runtime-816b037bee21ad2c738f.js"/><link as="fetch" rel="preload" href="/Personal-Blog/static/d/363/path---zh-hant-how-does-react-tell-a-class-from-a-function-44-c-f3f-6zEIaNlJKPjN0RBGihIpgWNC88.json" crossorigin="use-credentials"/></head><body class="light"><script>
              (function() {
                window.__onThemeChange = function() {};
                function setTheme(newTheme) {
                  window.__theme = newTheme;
                  preferredTheme = newTheme;
                  document.body.className = newTheme;
                  window.__onThemeChange(newTheme);
                }

                var preferredTheme;
                try {
                  preferredTheme = localStorage.getItem('theme');
                } catch (err) { }

                window.__setPreferredTheme = function(newTheme) {
                  setTheme(newTheme);
                  try {
                    localStorage.setItem('theme', newTheme);
                  } catch (err) {}
                }

                var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
                darkQuery.addListener(function(e) {
                  window.__setPreferredTheme(e.matches ? 'dark' : 'light')
                });

                setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
              })();
            </script><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div style="color:var(--textNormal);background:var(--bg);transition:color 0.2s ease-out, background 0.2s ease-out;min-height:100vh"><div style="margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem"><header style="display:flex;justify-content:space-between;align-items:center;margin-bottom:2.625rem"><h3 style="font-family:Montserrat, sans-serif;margin-top:0;margin-bottom:0;height:42px;line-height:2.625rem"><a style="box-shadow:none;text-decoration:none;color:rgb(255, 167, 196)" href="/Personal-Blog/">Overreacted</a></h3><div style="height:24px"></div></header><main><article><header><h1 style="color:var(--textTitle)">React å¦‚ä½•å¾å‡½å¼ï¼ˆFunctionï¼‰ä¸­å€åˆ†å‡ºé¡åˆ¥ï¼ˆClassï¼‰ï¼Ÿ</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.4rem">December 2, 2018<!-- --> â€¢ â˜•ï¸â˜•ï¸ 10 min read</p><div class="translations"><p style="font-size:0.9em;border:1px solid var(--hr);border-radius:0.75em;padding:0.75em;background:var(--inlineCode-bg);word-break:keep-all;font-family:system-ui, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;,
    &quot;Roboto&quot;, &quot;Oxygen&quot;, &quot;Ubuntu&quot;, &quot;Cantarell&quot;, &quot;Fira Sans&quot;,
    &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif"><span><span>Translated by readers into: </span><a href="/Personal-Blog/es/how-does-react-tell-a-class-from-a-function/">EspaÃ±ol</a> â€¢ <a href="/Personal-Blog/fr/how-does-react-tell-a-class-from-a-function/">FranÃ§ais</a> â€¢ <a href="/Personal-Blog/hu/how-does-react-tell-a-class-from-a-function/">Magyar</a> â€¢ <a href="/Personal-Blog/sk/how-does-react-tell-a-class-from-a-function/">SlovenÄina</a> â€¢ <a href="/Personal-Blog/ja/how-does-react-tell-a-class-from-a-function/">æ—¥æœ¬èª</a> â€¢ <a href="/Personal-Blog/zh-hans/how-does-react-tell-a-class-from-a-function/">ç®€ä½“ä¸­æ–‡</a> â€¢ <b>ç¹é«”ä¸­æ–‡</b></span><br/><br/><a href="/Personal-Blog/how-does-react-tell-a-class-from-a-function/">Read the original</a> â€¢ <a href="https://github.com/gaearon/overreacted.io/edit/master/src/pages/how-does-react-tell-a-class-from-a-function/index.zh-hant.md" target="_blank" rel="noopener noreferrer">Improve this translation</a> â€¢ <a href="/Personal-Blog/zh-hant">View all translated posts</a> </p></div></header><div><p>çœ‹çœ‹é€™å€‹è¢«å®šç¾©ç‚ºå‡½å¼çš„ <code class="language-text">Greeting</code> å…ƒä»¶ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>React ä¹Ÿæ”¯æ´æŠŠå®ƒå®šç¾©ç‚ºé¡åˆ¥ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ï¼ˆç›´åˆ° <a href="https://reactjs.org/docs/hooks-intro.html" target="_blank" rel="nofollow noopener noreferrer">æœ€è¿‘</a>ï¼Œé€™æ˜¯å”¯ä¸€èƒ½ä½¿ç”¨åƒæ˜¯ state åŠŸèƒ½çš„æ–¹æ³•ã€‚ï¼‰</p>
<p>ç•¶ä½ æƒ³è¦ç¹ªè£½ï¼ˆrenderï¼‰ä¸€å€‹ <code class="language-text">&lt;Greeting /&gt;</code> æ™‚ï¼Œä½ ä¸éœ€è¦ç…©æƒ±é€™å€‹å…ƒä»¶æ˜¯å¦‚ä½•è¢«å®šç¾©çš„ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// é¡åˆ¥æˆ–å‡½å¼ â€” éš¨æ„ã€‚</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Greeting</span> <span class="token punctuation">/></span></span></code></pre></div>
<p>ä½†æ˜¯ <em>React æœ¬èº«</em> åœ¨ä¹é€™å…©è€…çš„ä¸åŒï¼</p>
<p>å¦‚æœ <code class="language-text">Greeting</code> æ˜¯ä¸€å€‹å‡½å¼, React éœ€è¦å‘¼å«å®ƒï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// ä½ çš„ç¨‹å¼ç¢¼</span>
<span class="token keyword">function</span> <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// React å…§</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">Greeting</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;p>Hello&lt;/p></span></code></pre></div>
<p>ä½†å¦‚æœ <code class="language-text">Greeting</code> æ˜¯ä¸€å€‹é¡åˆ¥ï¼ŒReact éœ€è¦ç”¨ <code class="language-text">new</code> é‹ç®—ç¬¦å¯¦ç¾å‡ºå®ƒçš„å¯¦ä¾‹ï¼Œ<em>å†</em> å‘¼å«å‰›æ‰å‰µå»ºçš„å¯¦ä¾‹ä¸­çš„ <code class="language-text">render</code> æ–¹æ³•ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// ä½ çš„ç¨‹å¼ç¢¼</span>
<span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// React å…§</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Greeting {}</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> instance<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;p>Hello&lt;/p></span></code></pre></div>
<p>åœ¨ä¸Šè¿°å…©ç¨®æƒ…å¢ƒä¸­ï¼ŒReact çš„ç›®çš„æ˜¯æ‹¿åˆ°ç¹ªè£½éçš„ç¯€é»ï¼ˆåœ¨é€™ä¾‹å­ä¸­æ˜¯<code class="language-text">&lt;p&gt;Hello&lt;/p&gt;</code>ï¼‰ï¼Œä½†æ˜¯ç¢ºåˆ‡çš„æ­¥é©Ÿå–æ±ºæ–¼ <code class="language-text">Greeting</code> æ˜¯å¦‚ä½•è¢«å®šç¾©çš„ã€‚</p>
<p><strong>æ‰€ä»¥ React æ˜¯å¦‚ä½•çŸ¥é“é€™å€‹å…ƒä»¶æ˜¯é¡åˆ¥é‚„æ˜¯å‡½å¼ï¼Ÿ</strong></p>
<p>æ­£å¦‚æˆ‘ <a href="/Personal-Blog/why-do-we-write-super-props/">ä¸Šä¸€ç¯‡æ–‡ç« </a>æ‰€èªªçš„ï¼Œ<strong>ä½  <em>ä¸éœ€è¦</em> çŸ¥é“é€™å€‹ä¹Ÿèƒ½å¤ æœ‰æ•ˆä½¿ç”¨ Reactï¼Œ</strong>æˆ‘å¤šå¹´ä»¥ä¾†ä¹Ÿéƒ½ä¸çŸ¥é“é€™å…©è€…çš„å·®åˆ¥ã€‚è«‹ä¸è¦æŠŠé€™è®Šæˆä¸€é“é¢è©¦é¡Œã€‚äº‹å¯¦ä¸Šï¼Œé€™ç¯‡æ–‡ç« èˆ‡å…¶èªªæ˜¯è¨è«– React çš„é‹ä½œï¼Œæ›´å¤šçš„æ˜¯è¨è«– JavaScript å¦‚ä½•é‹ä½œã€‚</p>
<p>é€™å€‹éƒ¨è½æ ¼æ˜¯çµ¦æƒ³è¦çŸ¥é“ <em>ç‚ºä»€éº½</em> React æ˜¯ä»¥é€™ç¨®æ–¹å¼é‹ä½œè€Œæ„Ÿåˆ°å¥½å¥‡çš„è®€è€…ã€‚ä½ æ˜¯é€™ç¨®äººå—ï¼Ÿé‚£è®“æˆ‘å€‘ä¸€èµ·é‘½ç ”å§ã€‚</p>
<p><strong>é€™æ˜¯ä¸€æ®µæ¼«é•·çš„æ—…ç¨‹ï¼Œç¹«å¥½å®‰å…¨å¸¶äº†ã€‚é€™ç¯‡æ–‡ç« ä¸¦ä¸æœƒè¨è«–å¤ªå¤šé—œæ–¼ React æœ¬èº«çš„è³‡è¨Šã€‚ç›¸åçš„ï¼Œæˆ‘å€‘æœƒè¨è«– <code class="language-text">new</code>ã€<code class="language-text">this</code>ã€<code class="language-text">class</code>ã€ç®­é ­å‡½å¼ã€<code class="language-text">prototype</code>ã€<code class="language-text">__proto__</code>ã€<code class="language-text">instanceof</code> çš„æŸäº›é¢å‘ï¼Œé‚„æœ‰é€™äº›æ±è¥¿æ˜¯å¦‚ä½•åœ¨ JavaScript ä¸­å”åŒé‹ä½œçš„ã€‚å¹¸é‹çš„æ˜¯ï¼Œç•¶ä½  <em>ä½¿ç”¨</em> React æ™‚ä½ ä¸å¿…è€ƒæ…®é‚£éº¼å¤šã€‚ä¸éå¦‚æœä½ æ­£åœ¨å¯¦åš React çš„è©±â€¦</strong></p>
<p>ï¼ˆå¦‚æœä½ çœŸçš„åªæƒ³çŸ¥é“ç­”æ¡ˆçš„è©±ï¼Œç›´æ¥çœ‹æœ€å¾Œä¸€æ®µã€‚ï¼‰</p>
<hr>
<p>é¦–å…ˆï¼Œæˆ‘å€‘éœ€è¦ç†è§£ç‚ºä»€éº¼ä»¥ä¸åŒçš„æ–¹å¼è™•ç†å‡½å¼è·Ÿé¡åˆ¥æ˜¯å¾ˆé‡è¦çš„ã€‚æ³¨æ„æˆ‘å€‘åœ¨å‘¼å«é¡åˆ¥æ™‚æ˜¯å¦‚ä½•ä½¿ç”¨ <code class="language-text">new</code> é‹ç®—ç¬¦ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// å¦‚æœ Greeting æ˜¯å€‹å‡½å¼</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">Greeting</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;p>Hello&lt;/p></span>

<span class="token comment">// å¦‚æœ Greeting æ˜¯å€‹é¡åˆ¥</span>
<span class="gatsby-highlight-code-line"><span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Greeting {}</span></span><span class="token keyword">const</span> result <span class="token operator">=</span> instance<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;p>Hello&lt;/p></span></code></pre></div>
<p>è®“æˆ‘å€‘çœ‹çœ‹ <code class="language-text">new</code> é‹ç®—ç¬¦åœ¨ JavaScript ä¸­å¤§è‡´ä¸Šæœ‰ä»€éº¼ä½œç”¨ã€‚</p>
<hr>
<p>ä»¥å‰ JavaScript æ˜¯æ²’æœ‰é¡åˆ¥çš„ã€‚ç„¶è€Œï¼Œä½ å¯ä»¥ç›´æ¥ç”¨å‡½å¼è¡¨é”é¡ä¼¼é¡åˆ¥çš„æ¨¡å¼ã€‚èªªå¾—æ›´å…·é«”ä¸€é»ï¼Œä½ å¯ä»¥ç”¨ <em>ä»»ä½•</em> å‡½å¼æ‰®æ¼”é¡ä¼¼é¡åˆ¥çš„å»ºæ§‹å­ï¼Œä½ åªè¦åœ¨å‘¼å«å‡½å¼å‰åŠ ä¸Š <code class="language-text">new</code> å°±å¯ä»¥äº†ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// åªæ˜¯å€‹å‡½å¼</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> fred <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ… Person {name: 'Fred'}</span>
<span class="token keyword">var</span> george <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">'George'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ğŸ”´ ä¸è¡Œ</span></code></pre></div>
<p>ä½ åˆ°ä»Šå¤©ä»ç„¶èƒ½å¯«é€™æ¨£çš„ç¨‹å¼ç¢¼ï¼åœ¨ DevTools ä¸­è©¦è©¦çœ‹ã€‚</p>
<p>å¦‚æœä½ å‘¼å« <code class="language-text">Person(&#39;Fred&#39;)</code> æ™‚<strong>ç¼ºå°‘äº†</strong> <code class="language-text">new</code>ï¼Œåœ¨é€™ä¹‹é–“çš„ <code class="language-text">this</code> æœƒæŒ‡å‘æŸå€‹å…¨åŸŸè€Œç„¡ç”¨çš„æ±è¥¿ï¼ˆä¾‹å¦‚ï¼Œ<code class="language-text">window</code> æˆ– <code class="language-text">undefined</code>ï¼‰ã€‚æ‰€ä»¥æˆ‘å€‘çš„ç¨‹å¼ç¢¼å°‡æœƒç•°å¸¸çµ‚æ­¢ï¼Œæˆ–æ˜¯åšä¸€äº›åƒè¨­ç½® <code class="language-text">window.name</code> çš„è ¢äº‹ã€‚</p>
<p>è—‰ç”±åœ¨å‘¼å«å‰å¢åŠ  <code class="language-text">new</code>ï¼Œæˆ‘å€‘å‘Šè¨´ JavaScript èªªï¼šã€Œå˜¿ JavaScriptï¼Œæˆ‘çŸ¥é“ <code class="language-text">Person</code> åªæ˜¯ä¸€å€‹å‡½å¼ï¼Œä½†è®“æˆ‘å€‘å‡è£å®ƒå°±åƒä¸€å€‹é¡åˆ¥çš„å»ºæ§‹å­ï¼Œ<strong>å‰µå»ºä¸€å€‹ <code class="language-text">{}</code> ç‰©ä»¶ä¸¦ä¸”å°‡ <code class="language-text">Person</code> å‡½å¼å…§éƒ¨çš„ <code class="language-text">this</code> æŒ‡å‘é€™å€‹ç‰©ä»¶ï¼Œé€™æ¨£æˆ‘å°±èƒ½è¨­ç½® <code class="language-text">this.name</code> ä¹‹é¡çš„æ±è¥¿äº†ã€‚ç„¶å¾ŒæŠŠé€™å€‹ç‰©ä»¶å›å‚³çµ¦æˆ‘ã€‚</strong>ã€</p>
<p>é€™å°±æ˜¯ <code class="language-text">new</code> é‹ç®—ç¬¦åšçš„äº‹ã€‚</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">var</span> fred <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// èˆ‡ `Person` å…§çš„ `this` ç›¸åŒçš„ç‰©ä»¶</span></code></pre></div>
<p><code class="language-text">new</code> é‹ç®—ç¬¦ä¹Ÿå¯ä»¥å‰µå»ºå‡ºæˆ‘å€‘æ”¾åœ¨ <code class="language-text">Person.prototype</code> ä¸Šçš„ä»»ä½•æ±è¥¿åˆ° <code class="language-text">fred</code> ç‰©ä»¶ä¸Šï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="gatsby-highlight-code-line">Person<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Hi, I am '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"><span class="token punctuation">}</span></span>
<span class="token keyword">var</span> fred <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">fred<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre></div>
<p>é€™å°±æ˜¯å¤§å®¶åœ¨ JavaScript ç›´æ¥å¢åŠ é¡åˆ¥ä¹‹å‰æ¨¡æ“¬å®ƒçš„æ–¹å¼ã€‚</p>
<hr>
<p>æ‰€ä»¥ <code class="language-text">new</code> å·²ç¶“åœ¨ JavaScript ä¸­å­˜åœ¨äº†ä¸€æ®µæ™‚é–“ã€‚ç„¶è€Œï¼Œé¡åˆ¥æ˜¯æœ€è¿‘æ‰æœ‰çš„ã€‚å®ƒè®“æˆ‘å€‘èƒ½æ›´è²¼è¿‘æˆ‘å€‘æ„åœ–åœ°é‡å¯«ä¸Šè¿°çš„ç¨‹å¼ç¢¼ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Hi, I am '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> fred <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fred<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>åœ¨ç¨‹å¼èªè¨€å’Œ API è¨­è¨ˆä¸­ï¼Œ<em>æŠ“ä½é–‹ç™¼è€…çš„æ„åœ–</em> æ˜¯é‡è¦çš„ã€‚</p>
<p>å¦‚æœä½ ä½¿ç”¨å‡½å¼ï¼ŒJavaScript æœƒç„¡æ³•çŒœæ¸¬å®ƒæ˜¯å¦è©²è¢«å‘¼å«ï¼ˆå¦‚ <code class="language-text">alert()</code> ï¼‰ï¼Œæˆ–æ˜¯å®ƒæ˜¯è¢«ç”¨ä¾†ç•¶æˆä¸€å€‹å»ºæ§‹å­ï¼ˆ å¦‚<code class="language-text">new Person()</code>ï¼‰ã€‚è€Œå¦‚æœä½ å¿˜è¨˜åœ¨çš„å‡½å¼å‰æŒ‡å®š <code class="language-text">new</code>ï¼ˆåƒæ˜¯ <code class="language-text">Person</code>ï¼‰ï¼Œé€™äº¦æœƒå°è‡´ç¨‹å¼å‡ºç¾ä»¤äººå›°æƒ‘çš„ç•°å¸¸è¡Œç‚ºã€‚</p>
<p><strong>é¡åˆ¥èªæ³•è®“æˆ‘å€‘èƒ½è¡¨ç¤ºï¼šã€Œé€™ä¸åªæ˜¯ä¸€å€‹å‡½å¼ â€”â€” ä»–æ˜¯ä¸€å€‹é¡åˆ¥ï¼Œè€Œä¸”æœ‰å»ºæ§‹å­ã€‚ã€</strong>å¦‚æœä½ åœ¨å‘¼å«å®ƒæ™‚å¿˜è¨˜ç”¨ <code class="language-text">new</code>ï¼ŒJavaScript å°‡æœƒæå‡ºéŒ¯èª¤ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">let</span> fred <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// âœ…  å¦‚æœ Person æ˜¯ä¸€å€‹å‡½å¼ï¼š æ²’å•é¡Œ</span>
<span class="token comment">// âœ…  å¦‚æœ Person æ˜¯ä¸€å€‹é¡åˆ¥ï¼š ä¹Ÿæ²’å•é¡Œ</span>

<span class="token keyword">let</span> george <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">'George'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æˆ‘å€‘å¿˜è¨˜ `new` äº†</span>
<span class="token comment">// ğŸ˜³ å¦‚æœ Person æ˜¯ä¸€å€‹åƒå»ºæ§‹å­çš„å‡½å¼ï¼šä»¤äººå›°æƒ‘çš„è¡Œç‚º</span>
<span class="token comment">// ğŸ”´ å¦‚æœ Person æ˜¯ä¸€å€‹é¡åˆ¥ï¼šç›´æ¥å¤±æ•—</span></code></pre></div>
<p>é€™æœ‰åŠ©æ–¼æˆ‘å€‘å„˜æ—©ç™¼ç¾éŒ¯èª¤ï¼Œè€Œä¸æ˜¯ç­‰å¾…ä¸€äº›æ™¦æ¾€è²»è§£çš„éŒ¯èª¤ç™¼ç”Ÿï¼Œä¾‹å¦‚ <code class="language-text">this.name</code> è¢«ç•¶æˆ <code class="language-text">window.name</code> è€Œä¸æ˜¯ <code class="language-text">george.name</code>ã€‚</p>
<p>ç„¶è€Œï¼Œé€™æ„å‘³è‘— React éœ€è¦åœ¨å‘¼å«ä»»ä½•é¡åˆ¥ä¹‹å‰å¯« <code class="language-text">new</code>ï¼Œå®ƒä¸èƒ½åªæ˜¯å°‡å®ƒç•¶ä½œä¸€èˆ¬çš„å‡½å¼å‘¼å«ï¼Œå› ç‚º JavaScript æœƒå°‡å…¶è¦–ç‚ºä¸€å€‹éŒ¯èª¤ï¼</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ğŸ”´ React ä¸èƒ½é€™æ¨£åšï¼š</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token function">Counter</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>é€™æœƒå¸¶ä¾†éº»ç…©ã€‚</p>
<hr>
<p>åœ¨æˆ‘å€‘æ¢è¨ React å¦‚ä½•è§£æ±ºé€™å€‹å•é¡Œå‰ï¼Œé‡è¦çš„æ˜¯è¦è¨˜å¾—å¤§å¤šæ•¸ React çš„é–‹ç™¼è€…æœƒä½¿ç”¨å¦‚ Babel çš„ç·¨è­¯å™¨ä¾†ç·¨è­¯æœ€æ–°çš„åŠŸèƒ½ï¼Œæ¯”å¦‚å°èˆŠç‰ˆç€è¦½å™¨æ”¯æ´é¡åˆ¥çš„ä½¿ç”¨ã€‚æ‰€ä»¥æˆ‘å€‘éœ€è¦åœ¨æˆ‘å€‘çš„è¨­è¨ˆä¸­è€ƒæ…®åˆ°æœ‰ç·¨è­¯å™¨çš„ç‹€æ³ã€‚</p>
<p>åœ¨ Babel æ—©æœŸçš„ç‰ˆæœ¬ï¼Œé¡åˆ¥å¯ä»¥åœ¨æ²’æœ‰æŒ‡å <code class="language-text">new</code> çš„æƒ…æ³ä¸‹è¢«å‘¼å«ï¼Œç„¶è€Œï¼Œé€™å·²ç¶“è¢«ä¿®æ­£äº† â€”â€”  è—‰ç”±ç”¢ç”Ÿä¸€äº›é¡å¤–çš„ç¨‹å¼ç¢¼ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç¨å¾®ç°¡åŒ–å¾ Babel çš„è¼¸å‡º</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">"Cannot call a class as a function"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// æˆ‘å€‘çš„ç¨‹å¼ç¢¼ï¼š</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ… æ²’å•é¡Œ</span>
<span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">'George'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// ğŸ”´ ç„¡æ³•åƒå‘¼å«å‡½å¼èˆ¬å‘¼å«ä¸€å€‹é¡åˆ¥</span></code></pre></div>
<p>ä½ å¯èƒ½åœ¨æ†ç¶åŒ…ä¸­çœ‹éé€™æ¨£çš„ç¨‹å¼ç¢¼ï¼Œé€™å…¨æ˜¯ <code class="language-text">_classCallCheck</code> å‡½å¼æ‰€åšçš„äº‹ã€‚ï¼ˆä½ å¯ä»¥è—‰ç”±é¸æ“‡ä¸é€²è¡Œæª¢æŸ¥çš„ã€Œé¬†æ•£æ¨¡å¼ï¼ˆloose modeï¼‰ã€ä¾†æ¸›å°‘æ†ç¶åŒ…å¤§å°ï¼Œä½†é€™å¯èƒ½æœƒä½¿ä½ æœ€çµ‚è½‰æ›ç‚ºåŸç”Ÿçš„é¡åˆ¥è®Šå¾—è¤‡é›œã€‚ï¼‰</p>
<hr>
<p>ç›®å‰ç‚ºæ­¢ï¼Œä½ æ‡‰è©²å°ç”¨ <code class="language-text">new</code> æˆ–ä¸ç”¨ <code class="language-text">new</code> å‘¼å«æŸäº›æ±è¥¿ä¹‹é–“çš„å·®åˆ¥æœ‰ä¸€å€‹å¤§è‡´çš„ç†è§£ï¼š</p>
<table>
<thead>
<tr>
<th></th>
<th><code class="language-text">new Person()</code></th>
<th><code class="language-text">Person()</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="language-text">class</code></td>
<td>âœ… <code class="language-text">this</code> æ˜¯ <code class="language-text">Person</code> çš„å¯¦ä¾‹</td>
<td>ğŸ”´ <code class="language-text">TypeError</code></td>
</tr>
<tr>
<td><code class="language-text">function</code></td>
<td>âœ… <code class="language-text">this</code> æ˜¯ <code class="language-text">Person</code> çš„å¯¦ä¾‹</td>
<td>ğŸ˜³ <code class="language-text">this</code> æ˜¯ <code class="language-text">window</code> æˆ– <code class="language-text">undefined</code></td>
</tr>
</tbody>
</table>
<p>é€™å°±æ˜¯ç‚ºä»€éº¼æ­£ç¢ºåœ°å‘¼å«ä½ çš„å…ƒä»¶å° React ä¾†èªªæ˜¯æ¥µç‚ºé‡è¦çš„ã€‚<strong>å¦‚æœä½ çš„å…ƒä»¶è¢«å®šç¾©ç‚ºé¡åˆ¥ï¼ŒReact ä¾¿éœ€è¦åœ¨å‘¼å«æ™‚ä½¿ç”¨ <code class="language-text">new</code>ã€‚</strong></p>
<p>æ‰€ä»¥ React å…‰æ˜¯é€éæª¢æŸ¥å°±èƒ½ç¢ºèªæŸå€‹å…ƒä»¶æ˜¯ä¸æ˜¯é¡åˆ¥å—ï¼Ÿ</p>
<p>æ²’é‚£éº¼å®¹æ˜“ï¼å³ä½¿æˆ‘å€‘å¯ä»¥ <a href="https://stackoverflow.com/questions/29093396/how-do-you-check-the-difference-between-an-ecmascript-6-class-and-function" target="_blank" rel="nofollow noopener noreferrer">åœ¨ JavaScript å‡½å¼ä¸­å€åˆ¥å‡ºé¡åˆ¥</a>ï¼Œé€™ä»ç„¶ä¸é©ç”¨æ–¼è¢«åƒæ˜¯ Babel é€™æ¨£çš„å·¥å…·è™•ç†éçš„é¡åˆ¥ã€‚å°æ–¼ç€è¦½å™¨è€Œè¨€ï¼Œå®ƒå€‘å°±åªæ˜¯å–®ç´”çš„å‡½å¼ã€‚å° React ä¾†èªªçœŸæ˜¯å€’æ¥£ã€‚</p>
<hr>
<p>å¥½å§ï¼Œæ‰€ä»¥æˆ–è¨± React å¯ä»¥åœ¨æ¯æ¬¡å‘¼å«æ™‚ä½¿ç”¨ <code class="language-text">new</code>ï¼Ÿä¸å¹¸çš„æ˜¯ï¼Œé€™ä¹Ÿä¸è¦‹å¾—ç¸½æ˜¯å¥æ•ˆã€‚</p>
<p>åœ¨ä¸€èˆ¬çš„å‡½å¼ä¸­ç”¨ <code class="language-text">new</code> ä¾†å‘¼å«å®ƒå€‘ï¼Œæœƒçµ¦å®ƒå€‘ä¸€å€‹ç‰©ä»¶å¯¦ä¾‹ç•¶ä½œæ˜¯ <code class="language-text">this</code>ã€‚é€™å°æ–¼å¯«æˆå»ºæ§‹å­çš„å‡½å¼ï¼ˆåƒä¸Šè¿°çš„ <code class="language-text">Person</code>ï¼‰æ˜¯åˆé©çš„ï¼Œä½†å®ƒå°å‡½å¼å…ƒä»¶è€Œè¨€æ˜¯å¾ˆæ··äº‚çš„ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// æˆ‘å€‘ä¸æœƒæœŸæœ› `this` åœ¨é€™è£¡æ˜¯ä»»ä½•ä¸€ç¨®å¯¦ä¾‹ã€‚</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ä½†é€™ç¨®æƒ…æ³é‚„ç®—å¯ä»¥å¿å—çš„ã€‚é€™è£¡æœ‰å…©å€‹ <em>å…¶ä»–</em> å¯ä»¥æ‰¼æ®ºé€™å€‹æƒ³æ³•çš„ç†ç”±ã€‚</p>
<hr>
<p>ç¬¬ä¸€å€‹ç‚ºä»€éº¼ä½¿ç”¨ <code class="language-text">new</code> ä¸ç¸½æ˜¯å¥æ•ˆçš„ç†ç”±ï¼Œæ˜¯ä½¿ç”¨ <code class="language-text">new</code> å‘¼å«åŸç”Ÿï¼ˆä¸æ˜¯è¢« Babel ç·¨è­¯éï¼‰çš„ç®­é ­å‡½å¼ï¼ˆArrow functionï¼‰æœƒæ‹‹å‡ºä¸€å€‹éŒ¯èª¤ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">Greeting</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ğŸ”´ Greeting is not a constructor</span></code></pre></div>
<p>é€™ç¨®è¡Œç‚ºæ˜¯åˆ»æ„çš„ï¼Œä¸¦ä¸”éµå¾ªç®­é ­å‡½æ•¸çš„è¨­è¨ˆã€‚ç®­é ­å‡½å¼çš„ä¸»è¦å„ªé»ä¹‹ä¸€æ˜¯å®ƒå€‘ <em>æ²’æœ‰</em> è‡ªå·±çš„ <code class="language-text">this</code> å€¼ã€‚ <code class="language-text">this</code> æ˜¯å¾æœ€é è¿‘è‡ªèº«çš„ä¸€èˆ¬å‡½å¼æ±ºå®šçš„ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Friends</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>    <span class="token keyword">const</span> friends <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>friends<span class="token punctuation">;</span>
    <span class="token keyword">return</span> friends<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>friend <span class="token operator">=></span>
      <span class="token operator">&lt;</span>Friend
<span class="gatsby-highlight-code-line">        <span class="token comment">// `this` æ˜¯å¾ `render` æ–¹æ³•ä¸­æ±ºå®šçš„</span></span><span class="gatsby-highlight-code-line">        size<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>size<span class="token punctuation">}</span></span>        name<span class="token operator">=</span><span class="token punctuation">{</span>friend<span class="token punctuation">.</span>name<span class="token punctuation">}</span>
        key<span class="token operator">=</span><span class="token punctuation">{</span>friend<span class="token punctuation">.</span>id<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>å¥½çš„ï¼Œæ‰€ä»¥<strong>ç®­é ­å‡½å¼æ˜¯æ²’æœ‰è‡ªå·±çš„ <code class="language-text">this</code> å€¼çš„ï¼Œ</strong>ä½†é€™æ„å‘³è‘—æ‹¿å®ƒå€‘ç•¶ä½œå»ºæ§‹å­æ˜¯å®Œå…¨æ²’æœ‰ä½œç”¨çš„ï¼</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">Person</span> <span class="token operator">=</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// ğŸ”´ é€™æ¨£ä¸åˆç†ï¼</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>å› æ­¤ï¼Œ<strong>JavaScript ä¸å…è¨±ä½¿ç”¨ <code class="language-text">new</code> å‘¼å«ä¸€å€‹ç®­é ­å‡½å¼ã€‚</strong>å¦‚æœä½ é€™éº¼åšçš„è©±ï¼Œä½ ç„¡è«–å¦‚ä½•éƒ½æœƒç”¢ç”Ÿä¸€å€‹éŒ¯èª¤ï¼Œé€™ä»¶äº‹æœ€å¥½æ—©é»å‘Šè¨´ä½ ã€‚é€™è·Ÿ JavaScript ä¸è®“ä½ åœ¨ <em>æ²’æœ‰</em> <code class="language-text">new</code> æ™‚å‘¼å«ä¸€å€‹é¡åˆ¥çš„æƒ…æ³é¡ä¼¼ã€‚</p>
<p>é€™å€‹è¡Œç‚ºå¾ˆæ£’ï¼Œä½†åŒæ™‚ä¹Ÿæé›œäº†æˆ‘å€‘çš„è¨ˆåŠƒï¼ŒReact ä¸èƒ½åƒ…åƒ…å°æ‰€æœ‰çš„æ±è¥¿å‘¼å« <code class="language-text">new</code>ï¼Œå› ç‚ºå®ƒé•èƒŒäº†ç®­é ­å‡½å¼ï¼æˆ‘å€‘ä¹Ÿè¨±èƒ½è©¦è‘—é€éç®­é ­å‡½å¼ç¼ºå°‘ <code class="language-text">prototype</code> çš„ç‰¹æ€§ä¾†ç‰¹åˆ¥åµæ¸¬å‡ºå®ƒå€‘ï¼Œä¸¦ä¸”åªä¸ <code class="language-text">new</code> å®ƒå€‘ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>prototype <span class="token comment">// undefined</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>prototype <span class="token comment">// {constructor: f}</span></code></pre></div>
<p>ä½†é€™å°è¢« Babel ç·¨è­¯éçš„å‡½å¼ <a href="https://github.com/facebook/react/issues/4599#issuecomment-136562930" target="_blank" rel="nofollow noopener noreferrer">ä¸å¥æ•ˆ</a>ã€‚é€™æˆ–è¨±ä¸æ˜¯ä»€éº¼å¤§å•é¡Œï¼Œä½†æ˜¯é‚„æœ‰å¦ä¸€å€‹ç†ç”±èƒ½ä½¿é€™ç¨®æ–¹æ³•èµ°å‘ä¸€æ¢æ­»è·¯ã€‚</p>
<hr>
<p>å¦ä¸€å€‹æˆ‘å€‘ä¸èƒ½ç¸½æ˜¯ä½¿ç”¨ <code class="language-text">new</code> çš„ç†ç”±ï¼Œæ˜¯å®ƒæœƒé˜»éš” React æ‹¿åˆ°å¾é‚£äº›æ”¯æ´å›å‚³å­—ä¸²æˆ–å…¶ä»–åŸºæœ¬å‹æ…‹çš„å…ƒä»¶ã€‚</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'Hello'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ… 'Hello'</span>
<span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ğŸ˜³ Greeting {}</span></code></pre></div>
<p>åˆä¾†ï¼Œé€™å†æ¬¡èˆ‡ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">new</code> é‹ç®—ç¬¦</a> çš„å¤æ€ªè¨­è¨ˆæœ‰é—œï¼Œæ­£å¦‚æˆ‘å€‘ä¹‹å‰çœ‹åˆ°çš„ï¼Œ<code class="language-text">new</code> å‘Šè¨´ JavaScript å¼•æ“å‰µå»ºä¸€å€‹ç‰©ä»¶ï¼Œåœ¨å…§éƒ¨å‰µå»ºä¸€å€‹ <code class="language-text">this</code> ç‰©ä»¶ï¼Œç„¶å¾Œå°‡é€™å€‹ç‰©ä»¶ç•¶ä½œ <code class="language-text">new</code> çš„çµæœå›çµ¦æˆ‘å€‘ã€‚</p>
<p>ç„¶è€Œï¼ŒJavaScript é‚„å…è¨±è¢« <code class="language-text">new</code> å‘¼å«çš„å‡½å¼è—‰ç”±å›å‚³å…¶ä»–ç‰©ä»¶ä¾† <em>è¦†è“‹</em> å®ƒçš„å›å‚³å€¼ï¼Œæ ¹æ“šæ¨æ¸¬ï¼Œé€™è¢«èªç‚ºå°æ–¼å¦‚æœæˆ‘å€‘æƒ³è¦ç”¨æ± åŒ–ä¾†é‡ç”¨å¯¦ä¾‹ï¼Œé€™æ¨£çš„æ¨¡å¼æœƒå¾ˆæœ‰ç”¨ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="gatsby-highlight-code-line"><span class="token comment">// æ‡¶å‰µå»º</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">var</span> zeroVector <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="token keyword">function</span> <span class="token function">Vector</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>zeroVector <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      <span class="token comment">// é‡ç”¨ç›¸åŒçš„å¯¦ä¾‹</span></span><span class="gatsby-highlight-code-line">      <span class="token keyword">return</span> zeroVector<span class="token punctuation">;</span></span>    <span class="token punctuation">}</span>
    zeroVector <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line"><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ğŸ˜² b === c</span></span></code></pre></div>
<p>ç„¶è€Œï¼Œå¦‚æœä¸€å€‹å‡½å¼çš„å›å‚³å€¼ <em>ä¸æ˜¯</em> ä¸€å€‹ç‰©ä»¶ï¼Œ <code class="language-text">new</code> æœƒ <em>å®Œå…¨å¿½ç•¥</em> å®ƒï¼Œå°±æ˜¯èªªå¦‚æœä½ å›å‚³å­—ä¸²æˆ–æ˜¯æ•¸å­—ï¼Œå®ƒæœƒåƒæ ¹æœ¬æ²’æœ‰å›å‚³ä¸€æ¨£ã€‚</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">Answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ… 42</span>
<span class="token keyword">new</span> <span class="token class-name">Answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ğŸ˜³ Answer {}</span></code></pre></div>
<p>æ‰€ä»¥é€™è£¡æ ¹æœ¬æ²’æœ‰è¾¦æ³•ç•¶å‡½å¼è¢«ç”¨ <code class="language-text">new</code> å‘¼å«æ™‚ï¼Œè®€åˆ°å®ƒåŸæœ¬çš„å›å‚³å€¼ï¼ˆåƒæ˜¯æ•¸å­—æˆ–å­—ä¸²ï¼‰ã€‚å› æ­¤ï¼Œå¦‚æœ React ç¸½æ˜¯ä½¿ç”¨ <code class="language-text">new</code> ä¾†å‘¼å«å‡½å¼ï¼Œå®ƒå°‡æœƒç„¡æ³•å¢åŠ é‚£äº›å›å‚³å­—ä¸²çš„å…ƒä»¶çš„æ”¯æ´ï¼</p>
<p>é€™ç„¡æ³•æ¥å—ï¼Œæˆ‘å€‘å‹¢å¿…å¾—å¦¥å”ã€‚</p>
<hr>
<p>åˆ°ç›®å‰ç‚ºæ­¢æˆ‘å€‘å­¸åˆ°äº†ä»€éº¼ï¼ŸReact å¿…é ˆ <em>ç”¨</em> <code class="language-text">new</code> å‘¼å«é¡åˆ¥ï¼ˆåŒ…å« Babel çš„è¼¸å‡ºï¼‰ï¼Œä½†å¿…é ˆ <em>ä¸ç”¨</em> <code class="language-text">new</code> å‘¼å«ä¸€èˆ¬çš„å‡½å¼ï¼ˆåŒ…å« Babel çš„è¼¸å‡ºï¼‰æˆ–æ˜¯ç®­é ­å‡½å¼ï¼Œè€Œä¸”ä¸¦æ²’æœ‰å¯é çš„æ–¹æ³•å€åˆ¥å®ƒå€‘ã€‚</p>
<p><strong>å¦‚æœæˆ‘å€‘è§£æ±ºä¸äº†ä¸€èˆ¬æ€§çš„å•é¡Œï¼Œé‚£æˆ‘å€‘èƒ½å¦è§£æ±ºæ¯”è¼ƒç‰¹å®šçš„å•é¡Œï¼Ÿ</strong></p>
<p>ç•¶ä½ å°‡å…ƒä»¶å®šç¾©ä¸€å€‹é¡åˆ¥æ™‚ï¼Œä½ å¯èƒ½æƒ³è¦ç‚ºäº† <code class="language-text">this.setState()</code> é€™æ¨£çš„é è¨­æ–¹æ³•å»æ“´å±• <code class="language-text">React.Component</code>ï¼Œ<strong>è·Ÿè©¦è‘—æª¢æŸ¥æ‰€æœ‰é¡åˆ¥ç›¸æ¯”ï¼Œæˆ‘å€‘èƒ½å¦åªåµæ¸¬ <code class="language-text">React.Component</code> çš„å­å­«ï¼Ÿ</strong></p>
<p>åŠ‡é€ï¼šé€™æ­£æ˜¯ React æ‰€åšçš„ã€‚</p>
<hr>
<p>æˆ–è¨±ï¼Œæª¢æŸ¥ <code class="language-text">Greeting</code> æ˜¯ä¸æ˜¯ React å…ƒä»¶çš„æ…£ç”¨æ–¹æ³•ï¼Œæ˜¯æ¸¬è©¦æ˜¯å¦ <code class="language-text">Greeting.prototype instanceof React.Component</code>ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">.</span>prototype <span class="token keyword">instanceof</span> <span class="token class-name">A</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre></div>
<p>æˆ‘çŸ¥é“ä½ åœ¨æƒ³ä»€éº¼ï¼Œå‰›å‰›ç™¼ç”Ÿä»€éº¼äº‹ï¼ï¼Ÿè¦å›ç­”é€™å€‹å•é¡Œï¼Œæˆ‘å€‘éœ€è¦äº†è§£ JavaScript çš„åŸå‹ï¼ˆprototypeï¼‰ã€‚</p>
<p>ä½ å¯ä»¥å¸¸è½åˆ°ã€ŒåŸå‹éˆï¼ˆprototype chainï¼‰ã€ï¼Œåœ¨ JavaScript ä¸­ï¼Œæ‰€æœ‰çš„ç‰©ä»¶éƒ½æ‡‰è©²æœ‰ä¸€å€‹ã€ŒåŸå‹ã€ã€‚ç•¶æˆ‘å€‘å¯« <code class="language-text">fred.sayHi()</code> è€Œæ²’æœ‰ <code class="language-text">sayHi</code> å±¬æ€§æ™‚ï¼Œæˆ‘å€‘æœƒå¾ <code class="language-text">fred</code> ç‰©ä»¶çš„åŸå‹ä¸­å°‹æ‰¾ <code class="language-text">sayHi</code> å±¬æ€§ã€‚å¦‚æœæˆ‘å€‘åœ¨é‚£è£¡æ‰¾ä¸åˆ°ï¼Œæˆ‘å€‘æœƒçœ‹çœ‹éˆä¸­çš„ä¸‹ä¸€å€‹åŸå‹ â€” <code class="language-text">fed</code> åŸå‹çš„åŸå‹ï¼Œä»¥æ­¤é¡æ¨ã€‚</p>
<p><strong>ä»¤äººè²»è§£çš„æ˜¯ï¼Œä¸€å€‹é¡åˆ¥æˆ–å‡½å¼çš„ <code class="language-text">prototype</code> å±¬æ€§ <em>ä¸¦ä¸æœƒ</em> æŒ‡å‘è©²å€¼çš„åŸå‹ã€‚</strong>æˆ‘ä¸æ˜¯åœ¨é–‹ç©ç¬‘ã€‚</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ğŸ¤ª ä¸æ˜¯ Person çš„åŸå‹</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ğŸ˜³ Person çš„åŸå‹</span></code></pre></div>
<p>æ‰€ä»¥ã€ŒåŸå‹éˆã€æ¯”è¼ƒåƒæ˜¯ <code class="language-text">__proto__.__proto__.__proto__</code> è€Œä¸æ˜¯ <code class="language-text">prototype.prototype.prototype</code>ï¼Œé€™æˆ‘èŠ±äº†å¤šå¹´æ‰ç†è§£ã€‚</p>
<p>é‚£éº¼åœ¨å‡½å¼æˆ–æ˜¯é¡åˆ¥ä¸Šçš„ <code class="language-text">prototype</code> å±¬æ€§æ˜¯ä»€éº¼ï¼Ÿ<strong>å®ƒæ˜¯æä¾›çµ¦æ‰€æœ‰è¢«é¡åˆ¥æˆ–å‡½å¼ <code class="language-text">new</code> éçš„ç‰©ä»¶çš„ <code class="language-text">__proto__</code>ï¼</strong></p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Person<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Hi, I am '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="gatsby-highlight-code-line"><span class="token keyword">var</span> fred <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æŠŠ `fred.__proto__` è¨­æˆ `Person.prototype`</span></span></code></pre></div>
<p>ç„¶è€Œ <code class="language-text">__proto__</code> éˆå°±æ˜¯ JavaScript æ‰¾å±¬æ€§çš„æ–¹å¼ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">fred<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 1. fred æœ‰ sayHi å±¬æ€§å—ï¼Ÿ æ²’æœ‰ã€‚</span>
<span class="token comment">// 2. fred.__proto__ æœ‰ sayHi å±¬æ€§å—ï¼Ÿæœ‰ã€‚å‘¼å«å®ƒï¼</span>

fred<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 1. fred æœ‰ toString å±¬æ€§å—ï¼Ÿ æ²’æœ‰ã€‚</span>
<span class="token comment">// 2. fred.__proto__ æœ‰ toString å±¬æ€§å—ï¼Ÿ æ²’æœ‰ã€‚</span>
<span class="token comment">// 3. fred.__proto__.__proto__ æœ‰ toString å±¬æ€§å—ï¼Ÿ æœ‰ã€‚å‘¼å«å®ƒï¼</span></code></pre></div>
<p>åœ¨å¯¦å‹™ä¸Šï¼Œé™¤éä½ åœ¨é™¤åŸå‹éˆç›¸é—œçš„éŒ¯èª¤ï¼Œå¦å‰‡ä½ å¹¾ä¹ä¸éœ€è¦ç›´æ¥åœ¨ç¨‹å¼ç¢¼ä¸­ç¢°åˆ° <code class="language-text">__proto__</code>ï¼Œå¦‚æœä½ æƒ³åœ¨ <code class="language-text">fed.__proto__</code> æä¾›æ±è¥¿çš„è©±ï¼Œä½ æ‡‰è©²æŠŠå®ƒæ”¾åœ¨ <code class="language-text">Person.prototype</code>ï¼Œè‡³å°‘å®ƒåŸå…ˆæ˜¯é€™éº¼è¢«è¨­è¨ˆçš„ã€‚</p>
<p>èµ·åˆï¼Œ <code class="language-text">__proto__</code> å±¬æ€§ç”šè‡³ä¸æ‡‰è©²è¢«ç€è¦½å™¨æ›éœ²çš„ï¼Œå› ç‚ºåŸå‹éˆè¢«è¦–ç‚ºæ˜¯å…§éƒ¨çš„æ¦‚å¿µï¼Œä½†æ˜¯æœ‰äº›ç€è¦½å™¨æ·»åŠ äº† <code class="language-text">__proto__</code>ï¼Œæœ€çµ‚å®ƒå‹‰ç‚ºå…¶é›£åœ°è¢«æ¨™æº–åŒ–äº†ï¼ˆä½†å·²ç¶“è¢«æ£„ç”¨äº†ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ <code class="language-text">Object.getPrototypeOf()</code>ï¼‰ã€‚</p>
<p><strong>ç„¶è€Œï¼Œæˆ‘ä»ç„¶è¦ºå¾—ä¸€å€‹è¢«ç¨±ç‚º <code class="language-text">prototype</code> çš„å±¬æ€§ä¸¦æ²’æœ‰æä¾›çµ¦ä½ è©²å€¼çš„åŸå‹è€Œæ„Ÿåˆ°éå¸¸çš„å›°æƒ‘</strong>ï¼ˆèˆ‰ä¾‹ä¾†èªªï¼Œ<code class="language-text">fred.prototype</code> æœªè¢«å®šç¾©æ˜¯å› ç‚º <code class="language-text">fred</code> ä¸æ˜¯ä¸€å€‹å‡½å¼ï¼‰ã€‚å°æˆ‘è€Œè¨€ï¼Œæˆ‘èªç‚ºé€™å€‹å³ä½¿æ˜¯ç¶“é©—è±å¯Œçš„é–‹ç™¼è€…ä¹Ÿæœƒèª¤è§£ JavaScript åŸå‹æœ€å¤§çš„åŸå› ã€‚</p>
<hr>
<p>é€™æ˜¯ä¸€ç¯‡å¾ˆé•·çš„è²¼æ–‡ï¼Œä½ èªªæ˜¯å§ï¼Ÿæˆ‘å€‘åœ¨é€™å·²ç¶“ 8 æˆï¼Œç¨ç­‰ä¸€æœƒå…’ã€‚</p>
<p>ç•¶æˆ‘å€‘æåˆ° <code class="language-text">obj.foo</code>ï¼Œæˆ‘å€‘å·²ç¶“çŸ¥é“ JavaScript å¯¦éš›ä¸Šæœƒåœ¨ <code class="language-text">obj</code>ï¼Œ<code class="language-text">obj.__proto__</code>ï¼Œ<code class="language-text">obj.__proto__.__proto__</code> å°‹æ‰¾ <code class="language-text">foo</code>ï¼Œä»¥æ­¤é¡æ¨ã€‚</p>
<p>åœ¨é¡åˆ¥ä¸­ï¼Œä½ ä¸æœƒç›´æ¥è¢«æ›éœ²é€™å€‹æ©Ÿåˆ¶ï¼Œä¸é <code class="language-text">extends</code> ä¹Ÿæ˜¯åœ¨é€™å€‹ç¶“å…¸çš„åŸå‹éˆä¸Šé‹ä½œï¼Œé€™å°±æ˜¯æˆ‘å€‘ React é¡åˆ¥çš„å¯¦ä¾‹å¦‚ä½•å–å¾—åƒæ˜¯ <code class="language-text">setState</code> æ–¹æ³•çš„æ–¹å¼ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="gatsby-highlight-code-line"><span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span></span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Greeting.prototype</span>
<span class="gatsby-highlight-code-line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// React.Component.prototype</span></span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Object.prototype</span>

c<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// åœ¨ c.__proto__ (Greeting.prototype) æ‰¾åˆ°</span>
<span class="gatsby-highlight-code-line">c<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// åœ¨ c.__proto__.__proto__ (React.Component.prototype) æ‰¾åˆ°</span></span>c<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// åœ¨ c.__proto__.__proto__.__proto__ (Object.prototype) æ‰¾åˆ°</span></code></pre></div>
<p>æ›å¥è©±èªªï¼Œ<strong>ç•¶ä½ åœ¨ç”¨é¡åˆ¥çš„æ™‚å€™ï¼Œä¸€å€‹å¯¦ä¾‹çš„ <code class="language-text">__proto__</code> éˆæœƒã€Œé¡åƒæ–¼ã€é¡åˆ¥çš„éšå±¤çµæ§‹ï¼š</strong></p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// `extends` éˆ</span>
Greeting
  â†’ React<span class="token punctuation">.</span>Component
    â†’ <span class="token function">Object</span> <span class="token punctuation">(</span>éš±è—çš„<span class="token punctuation">)</span>

<span class="token comment">// `__proto__` éˆ</span>
<span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  â†’ Greeting<span class="token punctuation">.</span>prototype
    â†’ React<span class="token punctuation">.</span>Component<span class="token punctuation">.</span>prototype
      â†’ Object<span class="token punctuation">.</span>prototype</code></pre></div>
<p>å…©å€‹éˆï¼Œ<a href="https://twitter.com/2chainz" target="_blank" rel="nofollow noopener noreferrer">2 Chainz</a>ã€‚</p>
<hr>
<p>å› ç‚º <code class="language-text">__proto__</code> éˆåæ˜ äº†é¡åˆ¥çš„éšå±¤çµæ§‹ï¼Œæˆ‘å€‘å¯ä»¥å¾ <code class="language-text">Greeting.prototype</code> é–‹å§‹ï¼Œéš¨è‘— <code class="language-text">__proto__</code> éˆå¾€ä¸‹æª¢æŸ¥ï¼Œæ˜¯å¦ä¸€å€‹ <code class="language-text">Greeting</code> æ“´å±•äº† <code class="language-text">React.Component</code>ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// `__proto__` chain</span>
<span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="gatsby-highlight-code-line">  â†’ Greeting<span class="token punctuation">.</span>prototype <span class="token comment">// ğŸ•µï¸ æˆ‘å€‘å¾é€™è£¡é–‹å§‹</span></span><span class="gatsby-highlight-code-line">    â†’ React<span class="token punctuation">.</span>Component<span class="token punctuation">.</span>prototype <span class="token comment">// âœ… æ‰¾åˆ°äº†ï¼</span></span>      â†’ Object<span class="token punctuation">.</span>prototype</code></pre></div>
<p>ä¾¿åˆ©ä¸Šä¾†èªªï¼Œ<code class="language-text">x instanceof Y</code> æ­£å¥½åšäº†é€™ç¨®æœå°‹ï¼Œå®ƒéš¨è‘— <code class="language-text">x.__proto__</code> éˆå°‹æ‰¾åœ¨é‚£è£¡å°‹æ‰¾ <code class="language-text">Y.prototype</code>ã€‚</p>
<p>é€šå¸¸ï¼Œé€™è¢«æ‹¿ä¾†åˆ¤æ–·æ˜¯å¦æŸå€‹æ±è¥¿æ˜¯ä¸æ˜¯ä¸€å€‹é¡åˆ¥çš„å¯¦ä¾‹ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">let</span> greeting <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeting <span class="token keyword">instanceof</span> <span class="token class-name">Greeting</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">// greeting ï¼ˆğŸ•µï¸â€ æˆ‘å€‘å¾é€™è£¡é–‹å§‹ï¼‰</span>
<span class="token comment">//   .__proto__ â†’ Greeting.prototype ï¼ˆâœ… æ‰¾åˆ°äº†ï¼ï¼‰</span>
<span class="token comment">//     .__proto__ â†’ React.Component.prototype</span>
<span class="token comment">//       .__proto__ â†’ Object.prototype</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeting <span class="token keyword">instanceof</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">// greeting ï¼ˆâ€ğŸ•µ æˆ‘å€‘å¾é€™è£¡é–‹å§‹ï¼‰</span>
<span class="token comment">//   .__proto__ â†’ Greeting.prototype</span>
<span class="token comment">//     .__proto__ â†’ React.Component.prototype ï¼ˆâœ… æ‰¾åˆ°äº†ï¼ï¼‰</span>
<span class="token comment">//       .__proto__ â†’ Object.prototype</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeting <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">// greeting ï¼ˆâ€ğŸ•µ æˆ‘å€‘å¾é€™è£¡é–‹å§‹ï¼‰</span>
<span class="token comment">//   .__proto__ â†’ Greeting.prototype</span>
<span class="token comment">//     .__proto__ â†’ React.Component.prototype</span>
<span class="token comment">//       .__proto__ â†’ Object.prototype ï¼ˆâœ… æ‰¾åˆ°äº†ï¼ï¼‰</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeting <span class="token keyword">instanceof</span> <span class="token class-name">Banana</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token comment">// greeting ï¼ˆâ€ğŸ•µ æˆ‘å€‘å¾é€™è£¡é–‹å§‹ï¼‰</span>
<span class="token comment">//   .__proto__ â†’ Greeting.prototype</span>
<span class="token comment">//     .__proto__ â†’ React.Component.prototype</span>
<span class="token comment">//       .__proto__ â†’ Object.prototypeï¼ˆğŸ™…â€ æ²’æœ‰æ‰¾åˆ°ï¼ï¼‰</span></code></pre></div>
<p>è€Œå®ƒä¹Ÿå¯ä»¥ç”¨ä¾†å°åˆ¤æ–·ä¸€å€‹é¡åˆ¥æ˜¯å¦æ“´å±•å¦ä¸€å€‹é¡åˆ¥ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Greeting<span class="token punctuation">.</span>prototype <span class="token keyword">instanceof</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// greeting</span>
<span class="token comment">//   .__proto__ â†’ Greeting.prototype ï¼ˆâ€ğŸ•µ æˆ‘å€‘å¾é€™è£¡é–‹å§‹ï¼‰</span>
<span class="token comment">//     .__proto__ â†’ React.Component.prototype ï¼ˆâœ… æ‰¾åˆ°äº†ï¼ï¼‰</span>
<span class="token comment">//       .__proto__ â†’ Object.prototype</span></code></pre></div>
<p>ç„¶è€Œï¼Œé€™å°±æ˜¯æˆ‘å€‘å¦‚ä½•åˆ¤æ–·æ±è¥¿æ˜¯ä¸€å€‹ React å…ƒä»¶çš„é¡åˆ¥é‚„æ˜¯ä¸€å€‹ä¸€èˆ¬å‡½å¼çš„æ–¹æ³•ã€‚</p>
<hr>
<p>é›–ç„¶é€™ä¸æ˜¯ React çš„ä½œæ³•ã€‚ğŸ˜³</p>
<p>æœ‰ä¸€å€‹å°ç”¨ <code class="language-text">instanceof</code> è§£æ³•çš„è­¦å‘Šï¼Œæ˜¯å®ƒåœ¨æœ‰å¤šå€‹ React è¤‡è£½å“çš„ç¶²é ä¸å¥æ•ˆï¼Œæˆ‘å€‘æœƒç”¨åˆ° <em>å¦ä¸€å€‹</em> React è¤‡è£½å“çš„ <code class="language-text">React.Component</code> ä¾†æª¢æŸ¥å…ƒä»¶çš„ç¹¼æ‰¿é—œä¿‚ã€‚æœ‰ä¸€äº›çš„åŸå› èªªæ˜äº†å–®ä¸€å°ˆæ¡ˆæ··ç ¸äº†å¤šå€‹ React çš„è¤‡è£½å“æ˜¯ä¸å¥½çš„ï¼Œä½†åœ¨æ­·å²ä¸Šæˆ‘å€‘å·²ç›¡å¯èƒ½é¿å…å‡ºç¾é€™æ¨£çš„å•é¡Œã€‚ï¼ˆåœ¨ Hook ä¸­ï¼Œæˆ‘å€‘ <a href="https://github.com/facebook/react/issues/13991" target="_blank" rel="nofollow noopener noreferrer">å¯èƒ½éœ€è¦</a> å¼·åˆ¶è¤‡è£½å“åˆªé™¤ã€‚ï¼‰</p>
<p>å¦å¤–ä¸€ç¨®å¯èƒ½çš„ç™¼æƒ³æ˜¯æˆ–è¨±å¯ä»¥æª¢æŸ¥åŸå‹ä¸­æ˜¯å¦å­˜åœ¨ <code class="language-text">render</code> æ–¹æ³•ï¼Œç„¶è€Œé€™åœ¨ç•¶æ™‚ <a href="https://github.com/facebook/react/issues/4599#issuecomment-129714112" target="_blank" rel="nofollow noopener noreferrer">ä¸¦ä¸æ¸…æ¥š</a> å…ƒä»¶çš„ API å°‡æœƒå¦‚ä½•åŒ…è£ï¼Œæ¯ä¸€ç¨®æª¢æŸ¥æ–¹å¼éƒ½æœ‰æˆæœ¬ï¼Œæ‰€ä»¥æˆ‘å€‘ä¹Ÿä¸å¸Œæœ›æ·»åŠ ä¸€ç¨®ä»¥ä¸Šçš„æª¢æŸ¥ï¼Œé‚„æœ‰é€™ç¨®æ–¹æ³•å¦‚æœ <code class="language-text">render</code> æ²’æœ‰å®šç¾©ç‚ºå¯¦ä¾‹æ–¹æ³•ä¹Ÿä¸é©ç”¨ï¼Œä¾‹å¦‚é¡åˆ¥å±¬æ€§çš„èªæ³•ã€‚</p>
<p>æ‰€ä»¥å–è€Œä»£ä¹‹çš„æ˜¯ï¼ŒReact åœ¨åº•å±¤å…ƒä»¶ä¸­ <a href="https://github.com/facebook/react/pull/4663" target="_blank" rel="nofollow noopener noreferrer">æ·»åŠ äº†</a> ä¸€å€‹ç‰¹æ®Šçš„æ¨™è¨˜ï¼ŒReact æœƒé€éæª¢æŸ¥é€™å€‹æ¨™è¨˜æ˜¯å¦å­˜åœ¨ï¼Œä¾†åˆ¤æ–·æ±è¥¿æ˜¯ä¸æ˜¯ React å…ƒä»¶çš„æ–¹æ³•ï¼Œå°±æ˜¯é€™æ¨£ã€‚</p>
<p>æœ€åˆï¼Œé€™å€‹æ¨™è¨˜æ˜¯ä½æ–¼åº•å±¤çš„ <code class="language-text">React.Component</code> é¡åˆ¥æœ¬èº«ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// React å…§</span>
<span class="token keyword">class</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Component<span class="token punctuation">.</span>isReactClass <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// æˆ‘å€‘èƒ½åƒé€™æ¨£æª¢æŸ¥å®ƒ</span>
<span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Greeting<span class="token punctuation">.</span>isReactClass<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ… Yes</span></code></pre></div>
<p>ç„¶è€Œï¼Œåœ¨æœ‰äº›æˆ‘å€‘çš„ç›®æ¨™çš„é¡åˆ¥å¯¦ä½œ <a href="https://github.com/scala-js/scala-js/issues/1900" target="_blank" rel="nofollow noopener noreferrer">æ²’æœ‰</a> è¤‡è£½éœæ…‹çš„å±¬æ€§ï¼ˆæˆ–è¨­ç½®éæ¨™æº–çš„ <code class="language-text">__proto__</code>ï¼‰ï¼Œæ‰€ä»¥é€™å€‹æ¨™è¨˜ä¸è¦‹äº†ã€‚</p>
<p>é€™å°±æ˜¯ç‚ºä»€éº½ React æŠŠæ¨™è¨˜ <a href="https://github.com/facebook/react/pull/5021" target="_blank" rel="nofollow noopener noreferrer">ç§»å‹•</a> åˆ°äº† <code class="language-text">React.Component.prototype</code>ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// React å…§</span>
<span class="token keyword">class</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Component<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isReactComponent <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// æˆ‘å€‘èƒ½åƒé€™æ¨£æª¢æŸ¥</span>
<span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Greeting<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isReactComponent<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ… Yes</span></code></pre></div>
<p><strong>è€Œé€™å°±æ˜¯å¯¦éš›ä¸Šé—œæ–¼å®ƒå…¨éƒ¨å¾—å…§å®¹ã€‚</strong></p>
<p>ä½ å¯èƒ½æœƒç–‘æƒ‘ç‚ºä»€éº¼æ¨™è¨˜æ˜¯ç‰©ä»¶è€Œä¸æ˜¯å¸ƒæ—å€¼ï¼Œå¯¦åšä¸Šå®ƒæ˜¯ä»€éº½ä¸¦ä¸é‡è¦ï¼Œä½†åœ¨æ—©å¹´ç‰ˆæœ¬çš„ Jestï¼ˆåœ¨ Jest æ˜¯ Goodâ„¢ï¸ ä¹‹å‰ï¼‰é è¨­æœƒå°‡è‡ªå‹•æ¨¡ä»¿ï¼ˆautomockingï¼‰æ‰“é–‹ï¼Œç”Ÿæˆçš„æ¨¡ä»¿ç‰©çœç•¥äº†åŸç”Ÿçš„å±¬æ€§ï¼Œ<a href="https://github.com/facebook/react/pull/4663#issuecomment-136533373" target="_blank" rel="nofollow noopener noreferrer">ç ´å£äº†æª¢æŸ¥</a>ã€‚è¬äº†ï¼ŒJestã€‚</p>
<p>æˆªè‡³ä»Šæ—¥ï¼Œé€™å€‹ <code class="language-text">isReactComponent</code> æª¢æŸ¥ä» <a href="https://github.com/facebook/react/blob/769b1f270e1251d9dbdce0fcbd9e92e502d059b8/packages/react-reconciler/src/ReactFiber.js#L297-L300" target="_blank" rel="nofollow noopener noreferrer">åœ¨ React ä¸­è¢«ä½¿ç”¨</a>ã€‚</p>
<p>å¦‚æœä½ æ²’æœ‰æ“´å±• <code class="language-text">React.Component</code>ï¼ŒReact åœ¨åŸå‹ä¸­æœƒæ‰¾ä¸åˆ° <code class="language-text">isReactComponent</code>ï¼Œé€²è€Œä¸æœƒæŠŠå…ƒä»¶ç•¶æˆä¸€å€‹é¡åˆ¥ã€‚ç¾åœ¨ä½ çŸ¥é“ç‚ºä½•ç™¼ç”Ÿ <code class="language-text">Cannot call a class as a function</code> éŒ¯èª¤ <a href="https://stackoverflow.com/a/42680526/458193" target="_blank" rel="nofollow noopener noreferrer">æœ€å—æ­¡è¿çš„è§£ç­”</a> æ˜¯åŠ  <code class="language-text">extends React.Component</code> äº†ã€‚æœ€å¾Œï¼Œ<a href="https://stackoverflow.com/a/42680526/458193" target="_blank" rel="nofollow noopener noreferrer">å¢åŠ äº†ä¸€å€‹è­¦å‘Š</a>ï¼Œæ˜¯æœƒåœ¨ <code class="language-text">prototype.render</code> å­˜åœ¨ï¼Œè€Œ <code class="language-text">prototype.isReactComponent</code> ä¸å­˜åœ¨æ™‚ç™¼å‡ºè­¦å‘Šã€‚</p>
<hr>
<p>ä½ å¯èƒ½æœƒèªªé€™ç¯‡æ•…äº‹æœ‰é»èª˜å°æ¨éŠ·ï¼ˆbait-and-switchï¼‰ã€‚<strong>å¯¦éš›ä¸Šçš„ç­”æ¡ˆå…¶å¯¦éå¸¸ç°¡å–®ï¼Œä½†æˆ‘å»ç”¨å¤§é‡é›¢é¡Œçš„äº‹ä¾† <em>è§£é‡‹</em> ç‚ºä»€éº¼ React åˆ°æœ€å¾Œæœƒç”¨é€™å€‹è§£æ³•ï¼Œä»¥åŠæ›¿ä»£æ–¹æ¡ˆæ˜¯ä»€éº¼ã€‚</strong></p>
<p>ä»¥æˆ‘çš„ç¶“é©—ï¼Œå‡½å¼åº« API é€šå¸¸å°±æ˜¯é€™ç¨®æƒ…æ³ï¼Œç‚ºäº†ä½¿ API æ˜“æ–¼ä½¿ç”¨ï¼Œä½ å¸¸å¸¸éœ€è¦å»è€ƒæ…®ç¨‹å¼èªè¨€çš„èªæ„ï¼ˆå°æ–¼å¾ˆå¤šç¨®ç¨‹å¼èªè¨€å¯èƒ½é‚„éœ€è¦è€ƒæ…®æœªä¾†çš„èµ°å‘ï¼‰ã€é‹è¡Œæ•ˆèƒ½ã€åœ¨æœ‰æˆ–æ²’æœ‰ç·¨è­¯éšæ®µæ™‚çš„çš„äººé«”å·¥å­¸ã€ç”Ÿæ…‹ç³»ä»¥åŠåŒ…è£è§£æ³•çš„ç¾ç‹€ã€é å…ˆçš„è­¦å‘Šã€å’Œå…¶ä»–å¾ˆå¤šæ±è¥¿ï¼Œæœ€å¾Œçš„çµæœå¯èƒ½ä¸æœƒç¸½æ˜¯é‚£éº¼å„ªé›…ï¼Œä½†å®ƒä¸€å®šå¯è¡Œã€‚</p>
<p><strong>å¦‚æœæœ€çµ‚ API æ˜¯å¯è¡Œçš„ï¼Œ<em>å®ƒçš„ä½¿ç”¨è€…</em> å°±æ°¸é ä¸å¿…å»æ€è€ƒå…¶ä¸­çš„éç¨‹ï¼Œ</strong>åè€Œä»–å€‘èƒ½å°ˆæ³¨æ–¼å‰µé€ æ‡‰ç”¨ç¨‹å¼ã€‚</p>
<p>ä½†å¦‚æœä½ ä¹Ÿå……æ»¿å¥½å¥‡å¿ƒâ€¦ï¼ŒçŸ¥é“å®ƒå¦‚ä½•é‹ä½œä¹Ÿä¸éŒ¯ã€‚</p></div><footer><p><a href="https://mobile.twitter.com/search?q=https%3A%2F%2Fyusufunlu.github.io%2FPersonal-Blog%2F%2Fhow-does-react-tell-a-class-from-a-function%2F" target="_blank" rel="noopener noreferrer">Discuss on Twitter</a> â€¢ <a href="https://github.com/gaearon/overreacted.io/edit/master/src/pages/how-does-react-tell-a-class-from-a-function/index.zh-hant.md" target="_blank" rel="noopener noreferrer">Edit on GitHub</a></p></footer></article></main><aside><div style="margin:90px 0 40px 0;font-family:system-ui, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;,
    &quot;Roboto&quot;, &quot;Oxygen&quot;, &quot;Ubuntu&quot;, &quot;Cantarell&quot;, &quot;Fira Sans&quot;,
    &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif"><form action="https://app.convertkit.com/forms/812047/subscriptions" class="seva-form formkit-form" method="post" min-width="400 500 600 700 800" style="background-color:rgb(255, 255, 255);border-radius:6px"><div data-style="full"><div data-element="column" class="formkit-column" style="background-color:rgb(249, 250, 251)"><h1 class="formkit-header" data-element="header" style="color:rgb(77, 77, 77);font-size:20px;font-weight:700">Join the Newsletter</h1><div data-element="subheader" class="formkit-subheader" style="color:rgb(104, 104, 104)"><p>Subscribe to get my latest content by email.</p></div><div class="formkit-image"><svg xmlns="http://www.w3.org/2000/svg" width="46" height="46" viewBox="0 0 46 46" style="max-width:100%"><g fill="none" fill-rule="evenodd"><path fill="#DD92AB" d="M23,36 C22.813,36 22.627,35.948 22.463,35.844 L0.463,21.844 C0.159,21.651 -0.017,21.308 0.001,20.948 C0.02,20.589 0.23,20.266 0.553,20.105 L23,6 L45.447,20.105 C45.769,20.266 45.98,20.588 45.999,20.948 C46.018,21.308 45.841,21.65 45.537,21.844 L23.537,35.844 C23.373,35.948 23.187,36 23,36 Z"></path><path fill="#FFF" d="M38,37 L8,37 L8,1 C8,0.448 8.448,0 9,0 L37,0 C37.552,0 38,0.448 38,1 L38,37 Z"></path><path fill="#FFA7C4" d="M45,46 C44.916,46 44.831,45.989 44.748,45.968 L21.748,39.968 L22,33 L46,21 L46,45 C46,45.31 45.856,45.602 45.611,45.792 C45.435,45.928 45.219,46 45,46 Z"></path><path fill="#FFC3D7" d="M45,46 L1,46 C0.447,46 0,45.552 0,45 L0,21 L45.479,44.122 C45.88,44.341 46.083,44.804 45.969,45.247 C45.856,45.69 45.457,46 45,46 Z"></path><path fill="#FFA7C4" d="M19 20.414L14.293 15.707C13.902 15.316 13.902 14.684 14.293 14.293L19 9.586 20.414 11 16.414 15 20.414 19 19 20.414zM27 20.414L25.586 19 29.586 15 25.586 11 27 9.586 31.707 14.293C32.098 14.684 32.098 15.316 31.707 15.707L27 20.414z"></path></g></svg></div></div><div data-element="column" class="formkit-column"><ul class="formkit-alert formkit-alert-error" data-element="errors" data-group="alert"></ul><div data-element="fields" class="seva-fields formkit-fields"><div class="formkit-field"><input type="text" class="formkit-input" aria-label="Your first name" name="fields[first_name]" placeholder="Your first name" style="border-color:rgb(227, 227, 227);border-radius:4px;color:rgb(0, 0, 0);font-weight:400"/></div><div class="formkit-field"><input type="email" class="formkit-input" name="email_address" aria-label="Your email address" placeholder="Your email address" style="border-color:rgb(227, 227, 227);border-radius:4px;color:rgb(0, 0, 0);font-weight:400"/></div><button data-element="submit" class="formkit-submit formkit-submit" style="background-color:hsl(340, 63%, 55%);border-radius:24px;color:white;font-weight:700"><div class="formkit-spinner"></div><span>Subscribe</span></button></div><div data-element="guarantee" class="formkit-guarantee" style="color:rgb(77, 77, 77);font-size:13px;font-weight:400"><p>I wonâ€™t send you spam.</p><p>Unsubscribe at <em>any</em> time.</p></div></div></div></form></div><h3 style="font-family:Montserrat, sans-serif;margin-top:0.4375rem"><a style="box-shadow:none;text-decoration:none;color:var(--pink)" href="/Personal-Blog/">Overreacted</a></h3><div style="display:flex;margin-bottom:3.5rem"><img src="/Personal-Blog/static/profile-pic-69c77131fd248a7aaaf26fab021f469f.png" alt="Yusuf Unlu" style="margin-right:0.875rem;margin-bottom:0;height:3.5rem;border-radius:50%"/><p style="max-width:310px">Personal blog by <a href="https://mobile.twitter.com/yufusunlu">Yusuf Unlu</a>.<!-- --> <!-- -->IÂ explain with words and code.</p></div><nav><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li></li><li></li></ul></nav></aside></div></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-130227707-1', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"zh-hant-how-does-react-tell-a-class-from-a-function-44c","path":"/zh-hant/how-does-react-tell-a-class-from-a-function/"};window.dataPath="363/path---zh-hant-how-does-react-tell-a-class-from-a-function-44-c-f3f-6zEIaNlJKPjN0RBGihIpgWNC88";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-198cd55e69a6a03b3f73.js"],"component---src-templates-blog-index-js":["/component---src-templates-blog-index-js-1d061c91bf8b4d1ed13d.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js.77da55083c18bdb7fbef.css","/component---src-templates-blog-post-js-ef2898a2e81c47683f5b.js"],"component---src-pages-404-js":["/component---src-pages-404-js.fd288bb02445d10643fa.css","/component---src-pages-404-js-b3cd5f330471999955d6.js"],"component---src-pages-confirm-js":["/component---src-pages-confirm-js.fd288bb02445d10643fa.css","/component---src-pages-confirm-js-009d25afd727cbb30f51.js"],"component---src-pages-thanks-js":["/component---src-pages-thanks-js.fd288bb02445d10643fa.css","/component---src-pages-thanks-js-8fa56c06867d62f44f13.js"],"pages-manifest":["/pages-manifest-39a0dca89e16fd875f78.js"]};/*]]>*/</script><script src="/Personal-Blog/webpack-runtime-816b037bee21ad2c738f.js" async=""></script><script src="/Personal-Blog/1-1b550cd61a5e170131aa.js" async=""></script><script src="/Personal-Blog/2-469c709c476faea7103a.js" async=""></script><script src="/Personal-Blog/0-b197e8c6c7ff26484233.js" async=""></script><script src="/Personal-Blog/app-198cd55e69a6a03b3f73.js" async=""></script><script src="/Personal-Blog/component---src-templates-blog-post-js-ef2898a2e81c47683f5b.js" async=""></script></body></html>