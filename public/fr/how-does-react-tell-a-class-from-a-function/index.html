<!DOCTYPE html><html lang="fr"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/Personal-Blog/2.8bee379ac3150e408f97.css">@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:url(/Personal-Blog/static/merriweather-400-l-8796b7875d52e9cb9b280211e8d3f82d.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:url(/Personal-Blog/static/montserrat-900-l-5751237264c0468be0d48ad1cea75b90.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}body{--pink:#ffa7c4;background-color:var(--bg)}body.light{--bg:#fff;--header:var(--pink);--textNormal:#222;--textTitle:#222;--textLink:#d23669;--hr:rgba(0,0,0,0.2);--inlineCode-bg:rgba(255,229,100,0.2);--inlineCode-text:#1a1a1a}body.dark{-webkit-font-smoothing:antialiased;--bg:#282c35;--header:#fff;--textNormal:hsla(0,0%,100%,0.88);--textTitle:#fff;--textLink:var(--pink);--hr:hsla(0,0%,100%,0.2);--inlineCode-bg:#373c49;--inlineCode-text:#e6e6e6}body:lang(ar) article,body:lang(fa) article{direction:rtl}body:lang(ar) .language-text,body:lang(ar) article .translations,body:lang(ar) article pre,body:lang(fa) .language-text,body:lang(fa) article .translations,body:lang(fa) article pre{direction:ltr}body:lang(ar) .language-text,body:lang(fa) .language-text{display:inline-block}body:lang(ar) blockquote,body:lang(fa) blockquote{border-left:unset;border-right:.32813rem solid rgba(0,0,0,.9);padding-right:1.42188rem;padding-left:unset;margin-left:.75rem;margin-right:-1.75rem}body:lang(fa) article,body:lang(fa) header>h1{font-family:Vazir}body:lang(ar) article,body:lang(ar) header>h1{font-family:Cairo,sans-serif}body:lang(ko) article,body:lang(ko) header{word-break:keep-all}code[class*=language-],pre[class*=language-]{color:#fff;background:none;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;-webkit-font-feature-settings:normal;font-feature-settings:normal;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;margin-bottom:0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{overflow:auto;padding:1.3125rem}pre[class*=language-]::selection{background:#27292a}pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:hsla(0,0%,100%,.15)}:not(pre)>code[class*=language-]{border-radius:.3em;background:var(--inlineCode-bg);color:var(--inlineCode-text);padding:.15em .2em .05em;white-space:normal}.token.attr-name{color:#addb67;font-style:italic}.token.comment{color:#809393}.token.string,.token.url{color:#addb67}.token.variable{color:#d6deeb}.token.number{color:#f78c6c}.token.builtin,.token.char,.token.constant,.token.function{color:#82aaff}.token.punctuation{color:#c792ea}.token.doctype,.token.selector{color:#c792ea;font-style:"italic"}.token.class-name{color:#ffcb8b}.token.keyword,.token.operator,.token.tag{color:#ffa7c4}.token.boolean{color:#ff5874}.token.property{color:#80cbc4}.token.namespace{color:#b2ccd6}pre[data-line]{padding:1em 0 1em 3em;position:relative}.gatsby-highlight-code-line{background-color:#022a4b;display:block;padding-right:1em;padding-left:1.25em;border-left:.25em solid #ffa7c4}.gatsby-highlight,.gatsby-highlight-code-line{margin-right:-1.3125rem;margin-left:-1.3125rem}.gatsby-highlight{margin-bottom:1.75rem;border-radius:10px;background:#011627;-webkit-overflow-scrolling:touch;overflow:auto}@media (max-width:672px){.gatsby-highlight{border-radius:0}}.gatsby-highlight pre[class*=language-]{float:left;min-width:100%}.react-toggle{touch-action:pan-x;display:inline-block;position:relative;cursor:pointer;background-color:transparent;border:0;padding:0;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}.react-toggle-screenreader-only{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.react-toggle-track{width:50px;height:24px;padding:0;border-radius:30px;background-color:#0f1114;transition:all .2s ease}.react-toggle-track-check{position:absolute;width:17px;height:17px;left:5px;top:0;bottom:0;margin-top:auto;margin-bottom:auto;line-height:0;opacity:0;transition:opacity .25s ease}.react-toggle--checked .react-toggle-track-check,.react-toggle-track-x{opacity:1;transition:opacity .25s ease}.react-toggle-track-x{position:absolute;width:17px;height:17px;right:5px;top:0;bottom:0;margin-top:auto;margin-bottom:auto;line-height:0}.react-toggle--checked .react-toggle-track-x{opacity:0}.react-toggle-thumb{position:absolute;top:1px;left:1px;width:22px;height:22px;border-radius:50%;background-color:#fafafa;box-sizing:border-box;transition:all .5s cubic-bezier(.23,1,.32,1) 0ms;-webkit-transform:translateX(0);transform:translateX(0)}.react-toggle--checked .react-toggle-thumb{-webkit-transform:translateX(26px);transform:translateX(26px);border-color:#19ab27}.react-toggle--focus .react-toggle-thumb{box-shadow:0 0 2px 3px #ffa7c4}.react-toggle:active .react-toggle-thumb{box-shadow:0 0 5px 5px #ffa7c4}</style><style data-href="/Personal-Blog/component---src-templates-blog-post-js.77da55083c18bdb7fbef.css">@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:url(/Personal-Blog/static/merriweather-400-i-l-9a3ea56a5f449980432ace5972181ef6.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:url(/Personal-Blog/static/merriweather-700-l-e24e02bb044cb07539a3a6bd12348d14.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:url(/Personal-Blog/static/merriweather-700-i-l-ad085ede31afcc5585ff34869b1cd029.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.formkit-form *{box-sizing:border-box}.formkit-form legend{border:none;font-size:inherit;margin-bottom:10px;padding:0;position:relative;display:table}.formkit-form fieldset{border:0;padding:.01em 0 0;margin:0;min-width:0}.formkit-form body:not(:-moz-handler-blocked) fieldset{display:table-cell}.formkit-form p{color:inherit;font-size:inherit;font-weight:inherit}.formkit-form[data-format="slide in"],.formkit-form[data-format=modal]{display:none}.formkit-form .formkit-checkboxes,.formkit-form .formkit-input,.formkit-form .formkit-select{width:100%}.formkit-form .formkit-button,.formkit-form .formkit-submit{border:0;border-radius:5px;color:#fff;cursor:pointer;display:inline-block;text-align:center;font-size:15px;font-weight:500;margin-bottom:15px;overflow:hidden;padding:0;position:relative;vertical-align:middle}.formkit-form .formkit-button:focus,.formkit-form .formkit-button:hover,.formkit-form .formkit-submit:focus,.formkit-form .formkit-submit:hover{outline:none}.formkit-form .formkit-button:focus>span,.formkit-form .formkit-button:hover>span,.formkit-form .formkit-submit:focus>span,.formkit-form .formkit-submit:hover>span{background-color:#dc658d}.formkit-form .formkit-button>span,.formkit-form .formkit-submit>span{display:block;transition:all .3s ease-in-out;padding:12px 24px}.formkit-form .formkit-input{background:#fff;font-size:15px;padding:12px;border:1px solid #e3e3e3;flex:1 0 auto;line-height:1.4;margin:0;transition:border-color .3s ease-out}.formkit-form .formkit-input:focus{outline:none;border-color:#1677be;transition:border-color .3s ease}.formkit-form .formkit-input::-webkit-input-placeholder{color:#848585}.formkit-form .formkit-input:-ms-input-placeholder{color:#848585}.formkit-form .formkit-input::-ms-input-placeholder{color:#848585}.formkit-form .formkit-input::placeholder{color:#848585}.formkit-form [data-group=dropdown]{position:relative;display:inline-block;width:100%}.formkit-form [data-group=dropdown]:before{content:"";top:calc(50% - 2.5px);right:10px;position:absolute;pointer-events:none;border-color:#4f4f4f transparent transparent;border-style:solid;border-width:6px 6px 0;height:0;width:0;z-index:999}.formkit-form [data-group=dropdown] select{height:auto;width:100%;cursor:pointer;color:#333;line-height:1.4;margin-bottom:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:15px;padding:12px 25px 12px 12px;border:1px solid #e3e3e3;background:#fff}.formkit-form [data-group=dropdown] select:focus{outline:none}.formkit-form [data-group=checkboxes]{text-align:left;margin:0}.formkit-form [data-group=checkboxes] [data-group=checkbox]{margin-bottom:10px}.formkit-form [data-group=checkboxes] [data-group=checkbox] *{cursor:pointer}.formkit-form [data-group=checkboxes] [data-group=checkbox]:last-of-type{margin-bottom:0}.formkit-form [data-group=checkboxes] [data-group=checkbox] input[type=checkbox]{display:none}.formkit-form [data-group=checkboxes] [data-group=checkbox] input[type=checkbox]+label:after{content:none}.formkit-form [data-group=checkboxes] [data-group=checkbox] input[type=checkbox]:checked+label:after{border-color:#fff;content:""}.formkit-form [data-group=checkboxes] [data-group=checkbox] input[type=checkbox]:checked+label:before{background:#10bf7a;border-color:#10bf7a}.formkit-form [data-group=checkboxes] [data-group=checkbox] label{position:relative;display:inline-block;padding-left:28px}.formkit-form [data-group=checkboxes] [data-group=checkbox] label:after,.formkit-form [data-group=checkboxes] [data-group=checkbox] label:before{position:absolute;content:"";display:inline-block}.formkit-form [data-group=checkboxes] [data-group=checkbox] label:before{height:16px;width:16px;border:1px solid #e3e3e3;background:#fff;left:0;top:3px}.formkit-form [data-group=checkboxes] [data-group=checkbox] label:after{height:4px;width:8px;border-left:2px solid #4d4d4d;border-bottom:2px solid #4d4d4d;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);left:4px;top:8px}.formkit-form .formkit-alert{background:#f9fafb;border:1px solid #e3e3e3;border-radius:5px;flex:1 0 auto;list-style:none;margin:25px auto;padding:12px;text-align:center;width:100%}.formkit-form .formkit-alert:empty{display:none}.formkit-form .formkit-alert-success{background:#d3fbeb;border-color:#10bf7a;color:#0c905c}.formkit-form .formkit-alert-error{background:#fde8e2;border-color:#f2643b;color:#ea4110}.formkit-form .formkit-spinner{display:flex;height:0;width:0;margin:0 auto;position:absolute;top:0;left:0;right:0;overflow:hidden;text-align:center;transition:all .3s ease-in-out}.formkit-form .formkit-spinner>div{margin:auto;width:12px;height:12px;background-color:#fff;opacity:.3;border-radius:100%;display:inline-block;-webkit-animation:formkit-bouncedelay-formkit-form-data-uid-4a352cb1fd- 1.4s ease-in-out infinite both;animation:formkit-bouncedelay-formkit-form-data-uid-4a352cb1fd- 1.4s ease-in-out infinite both}.formkit-form .formkit-spinner>div:first-child{-webkit-animation-delay:-.32s;animation-delay:-.32s}.formkit-form .formkit-spinner>div:nth-child(2){-webkit-animation-delay:-.16s;animation-delay:-.16s}.formkit-form .formkit-submit[data-active] .formkit-spinner{opacity:1;height:100%;width:50px}.formkit-form .formkit-submit[data-active] .formkit-spinner~span{opacity:0}@-webkit-keyframes formkit-bouncedelay-formkit-form-data-uid-4a352cb1fd-{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes formkit-bouncedelay-formkit-form-data-uid-4a352cb1fd-{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}.formkit-form{box-shadow:0 2px 15px 0 rgba(210,214,220,.5);max-width:700px;overflow:hidden}.formkit-form [data-style=full]{width:100%;display:block}.formkit-form .formkit-header{margin-top:0;margin-bottom:20px;font-family:inherit}.formkit-form .formkit-subheader{margin:15px 0}.formkit-form .formkit-column{background-size:cover;background-repeat:no-repeat;background-position:50%;padding:20px}.formkit-form .formkit-column:nth-child(2){border-top:1px solid #e9ecef}.formkit-form .formkit-field{margin:0 0 15px}.formkit-form .formkit-input,.formkit-form .formkit-submit{width:100%}.formkit-form .formkit-guarantee{font-size:13px;margin:0 0 15px}.formkit-form .formkit-guarantee>p{margin:0}.formkit-form .formkit-powered-by{color:#7d7d7d;display:block;font-size:12px;margin-bottom:0;text-align:center}.formkit-form .formkit-powered-by[data-active=false]{opacity:.5}.formkit-form[min-width~="600"] [data-style=full],.formkit-form[min-width~="700"] [data-style=full],.formkit-form[min-width~="800"] [data-style=full]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.formkit-form[min-width~="600"] .formkit-submit,.formkit-form[min-width~="700"] .formkit-submit,.formkit-form[min-width~="800"] .formkit-submit{width:auto}.formkit-form[min-width~="600"] .formkit-column,.formkit-form[min-width~="700"] .formkit-column,.formkit-form[min-width~="800"] .formkit-column{padding:40px}.formkit-form[min-width~="600"] .formkit-column:nth-child(2),.formkit-form[min-width~="700"] .formkit-column:nth-child(2),.formkit-form[min-width~="800"] .formkit-column:nth-child(2){border-top:none}</style><meta name="generator" content="Gatsby 2.0.91"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" title="Dan Abramov&#x27;s Overreacted Blog RSS Feed" href="/Personal-Blog/rss.xml"/><link rel="shortcut icon" href="/Personal-Blog/icons/icon-48x48.png"/><link rel="manifest" href="/Personal-Blog/manifest.webmanifest"/><title data-react-helmet="true">Comment React distingue-t-il entre Classes et Fonctions¬†? ‚Äî Overreacted</title><meta data-react-helmet="true" name="theme-color" content="#282c35"/><meta data-react-helmet="true" name="description" content="O√π nous parlons de classes, new, instanceof, des cha√Ænes de prototypes et de la conception d‚ÄôAPI."/><meta data-react-helmet="true" property="og:url" content="https://yusufunlu.github.io/Personal-Blog//fr/how-does-react-tell-a-class-from-a-function/"/><meta data-react-helmet="true" property="og:title" content="Comment React distingue-t-il entre Classes et Fonctions¬†?"/><meta data-react-helmet="true" property="og:description" content="O√π nous parlons de classes, new, instanceof, des cha√Ænes de prototypes et de la conception d‚ÄôAPI."/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@dan_abramov"/><meta data-react-helmet="true" name="twitter:title" content="Comment React distingue-t-il entre Classes et Fonctions¬†?"/><meta data-react-helmet="true" name="twitter:description" content="O√π nous parlons de classes, new, instanceof, des cha√Ænes de prototypes et de la conception d‚ÄôAPI."/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:inherit;font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);border-left-color:inherit;opacity:0.8;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:var(--hr);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"‚Äî ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:var(--textLink);text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}a.anchor{box-shadow:none;}a.anchor svg[aria-hidden="true"]{stroke:var(--textLink);}p code{font-size:1rem;}h1 code, h2 code, h3 code, h4 code, h5 code, h6 code{font-size:inherit;}li code{font-size:1rem;}blockquote.translation{font-size:1em;}</style><link as="script" rel="preload" href="/Personal-Blog/component---src-templates-blog-post-js-ef2898a2e81c47683f5b.js"/><link as="script" rel="preload" href="/Personal-Blog/app-198cd55e69a6a03b3f73.js"/><link as="script" rel="preload" href="/Personal-Blog/0-b197e8c6c7ff26484233.js"/><link as="script" rel="preload" href="/Personal-Blog/2-469c709c476faea7103a.js"/><link as="script" rel="preload" href="/Personal-Blog/1-1b550cd61a5e170131aa.js"/><link as="script" rel="preload" href="/Personal-Blog/webpack-runtime-816b037bee21ad2c738f.js"/><link as="fetch" rel="preload" href="/Personal-Blog/static/d/112/path---fr-how-does-react-tell-a-class-from-a-function-5-a-7-311-ArQwPm31hepwQa5GrUMguoU9k0.json" crossorigin="use-credentials"/></head><body class="light"><script>
              (function() {
                window.__onThemeChange = function() {};
                function setTheme(newTheme) {
                  window.__theme = newTheme;
                  preferredTheme = newTheme;
                  document.body.className = newTheme;
                  window.__onThemeChange(newTheme);
                }

                var preferredTheme;
                try {
                  preferredTheme = localStorage.getItem('theme');
                } catch (err) { }

                window.__setPreferredTheme = function(newTheme) {
                  setTheme(newTheme);
                  try {
                    localStorage.setItem('theme', newTheme);
                  } catch (err) {}
                }

                var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
                darkQuery.addListener(function(e) {
                  window.__setPreferredTheme(e.matches ? 'dark' : 'light')
                });

                setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
              })();
            </script><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div style="color:var(--textNormal);background:var(--bg);transition:color 0.2s ease-out, background 0.2s ease-out;min-height:100vh"><div style="margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem"><header style="display:flex;justify-content:space-between;align-items:center;margin-bottom:2.625rem"><h3 style="font-family:Montserrat, sans-serif;margin-top:0;margin-bottom:0;height:42px;line-height:2.625rem"><a style="box-shadow:none;text-decoration:none;color:rgb(255, 167, 196)" href="/Personal-Blog/">Overreacted</a></h3><div style="height:24px"></div></header><main><article><header><h1 style="color:var(--textTitle)">Comment React distingue-t-il entre Classes et Fonctions¬†?</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.4rem">December 2, 2018<!-- --> ‚Ä¢ ‚òïÔ∏è‚òïÔ∏è‚òïÔ∏è‚òïÔ∏è 18 min read</p><div class="translations"><p style="font-size:0.9em;border:1px solid var(--hr);border-radius:0.75em;padding:0.75em;background:var(--inlineCode-bg);word-break:keep-all;font-family:system-ui, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;,
    &quot;Roboto&quot;, &quot;Oxygen&quot;, &quot;Ubuntu&quot;, &quot;Cantarell&quot;, &quot;Fira Sans&quot;,
    &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif"><span><span>Translated by readers into: </span><a href="/Personal-Blog/es/how-does-react-tell-a-class-from-a-function/">Espa√±ol</a> ‚Ä¢ <b>Fran√ßais</b> ‚Ä¢ <a href="/Personal-Blog/hu/how-does-react-tell-a-class-from-a-function/">Magyar</a> ‚Ä¢ <a href="/Personal-Blog/sk/how-does-react-tell-a-class-from-a-function/">Slovenƒçina</a> ‚Ä¢ <a href="/Personal-Blog/ja/how-does-react-tell-a-class-from-a-function/">Êó•Êú¨Ë™û</a> ‚Ä¢ <a href="/Personal-Blog/zh-hans/how-does-react-tell-a-class-from-a-function/">ÁÆÄ‰Ωì‰∏≠Êñá</a> ‚Ä¢ <a href="/Personal-Blog/zh-hant/how-does-react-tell-a-class-from-a-function/">ÁπÅÈ´î‰∏≠Êñá</a></span><br/><br/><a href="/Personal-Blog/how-does-react-tell-a-class-from-a-function/">Read the original</a> ‚Ä¢ <a href="https://github.com/gaearon/overreacted.io/edit/master/src/pages/how-does-react-tell-a-class-from-a-function/index.fr.md" target="_blank" rel="noopener noreferrer">Improve this translation</a> ‚Ä¢ <a href="/Personal-Blog/fr">View all translated posts</a> </p></div></header><div><p>Observez ce composant <code class="language-text">Greeting</code> d√©fini par une fonction¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Bonjour</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>React permet aussi de le d√©finir par une classe¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Bonjour</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>(Jusqu‚Äô√† <a href="https://reactjs.org/docs/hooks-intro.html" target="_blank" rel="nofollow noopener noreferrer">r√©cemment</a>, c‚Äô√©tait la seule mani√®re d‚Äôutiliser certaines fonctionnalit√©s telles que la gestion d‚Äô√©tat.)</p>
<p>Quand vous voulez afficher un <code class="language-text">&lt;Greeting /&gt;</code>, vous ne vous pr√©occupez pas de la fa√ßon dont il a √©t√© d√©fini¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// Classe ou fonction ‚Äî peu importe.</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Greeting</span> <span class="token punctuation">/></span></span></code></pre></div>
<p>Mais pour <em>React lui-m√™me</em>, √ßa fait une diff√©rence¬†!</p>
<p>Si <code class="language-text">Greeting</code> est une fonction, React a besoin de l‚Äôappeler¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// Votre code</span>
<span class="token keyword">function</span> <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Bonjour</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Dans React</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">Greeting</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;p>Bonjour&lt;/p></span></code></pre></div>
<p>Mais si <code class="language-text">Greeting</code> est une classe, React doit l‚Äôinstancier √† l‚Äôaide de l‚Äôop√©rateur <code class="language-text">new</code> et <em>ensuite</em> appeler la m√©thode <code class="language-text">render</code> sur l‚Äôinstance nouvellement cr√©√©e¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// Votre code</span>
<span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Bonjour</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Dans React</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Greeting {}</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> instance<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;p>Bonjour&lt;/p></span></code></pre></div>
<p>Dans les deux cas, l‚Äôobjectif de React est d‚Äôobtenir le n≈ìud rendu (dans cette exemple, <code class="language-text">&lt;p&gt;Bonjour&lt;/p&gt;</code>).  Mais les √©tapes exactes d√©pendent de la fa√ßon dont <code class="language-text">Greeting</code> est d√©fini.</p>
<p><strong>Alors comment React sait-il si quelque chose est une classe ou une fonction¬†?</strong></p>
<p>Tout comme dans mon <a href="/Personal-Blog/why-do-we-write-super-props/">pr√©c√©dent article</a>, <strong>vous n‚Äôavez pas <em>besoin</em> de savoir √ßa pour √™tre efficace avec React.</strong>  Je ne le savais pas moi-m√™me pendant des ann√©es.  Ne faites pas de cet article une question d‚Äôentretien technique.  En fait, cet article est plus √† propos de JavaScript que de React.</p>
<p>Ce blog est pour les personnes curieuses qui veulent savoir <em>pourquoi</em> React fonctionne d‚Äôune certaine mani√®re.  √ätes-vous une telle personne¬†?  Alors creusons ensemble.</p>
<p><strong>Ce sera un long voyage.  Attachez votre ceinture.  Cet article n‚Äôa pas beaucoup d‚Äôinformations sur React lui-m√™me, mais nous explorerons des aspects de <code class="language-text">new</code>, <code class="language-text">this</code>, <code class="language-text">class</code>, des fonctions fl√©ch√©es, de <code class="language-text">prototype</code>, <code class="language-text">__proto__</code>, <code class="language-text">instanceof</code>, et de la fa√ßon dont toutes ces choses fonctionnent ensemble en JavaScript.  Heureusement, vous n‚Äôavez pas tellement besoin de penser √† tout √ßa quand vous <em>utilisez</em> React.  Mais si vous impl√©mentez React‚Ä¶</strong></p>
<p>(Si tout ce qui vous int√©resse c‚Äôest de conna√Ætre la r√©ponse, d√©roulez jusqu‚Äô√† la toute fin.)</p>
<hr>
<p>Pour commencer, nous devons comprendre pourquoi il est important de traiter les fonctions et les classes diff√©remment.  Remarquez comment nous utilisons l‚Äôop√©rateur <code class="language-text">new</code> pour appeler une classe¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// Si Greeting est une fonction</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">Greeting</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;p>Bonjour&lt;/p></span>

<span class="token comment">// Si Greeting est une classe</span>
<span class="gatsby-highlight-code-line"><span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Greeting {}</span></span><span class="token keyword">const</span> result <span class="token operator">=</span> instance<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;p>Bonjour&lt;/p></span></code></pre></div>
<p>Essayons de comprendre √† peu pr√®s ce que fait l‚Äôop√©rateur <code class="language-text">new</code> en JavaScript.</p>
<hr>
<p>Autrefois, JavaScript n‚Äôavait pas de classes.  Cependant, vous pouviez exprimer une approche similaire aux classes avec de simples fonctions.  <strong>Concr√®tement, vous pouvez utiliser <em>n‚Äôimporte quelle</em> fonction dans une optique similaire √† un constructeur en ajoutant <code class="language-text">new</code> avant son appel¬†:</strong></p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// Juste une function</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> fred <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ‚úÖ Person {name: 'Fred'}</span>
<span class="token keyword">var</span> george <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">'George'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// üî¥ Ne marchera pas</span></code></pre></div>
<p>On peut toujours √©crire du code de ce genre de nos jours¬†! Essayez donc dans les DevTools.</p>
<p>Si vous appeliez <code class="language-text">Person(&#39;Fred&#39;)</code> <strong>sans</strong> <code class="language-text">new</code>, <code class="language-text">this</code> √† l‚Äôint√©rieur r√©f√©rencerait un objet global et inutile (par exemple, <code class="language-text">window</code> ou <code class="language-text">undefined</code>).  De sorte que notre code planterait, ou ferait un truc idiot comme d√©finir <code class="language-text">window.name</code>.</p>
<p>En ajoutant <code class="language-text">new</code> avant l‚Äôappel, nous disons¬†: ¬´¬†H√©, JavaScript, je sais bien que <code class="language-text">Person</code> est juste une fonction mais faisons comme si c‚Äô√©tait un genre de constructeur de classe. <strong>Cr√©e un objet <code class="language-text">{}</code> et fais-le r√©f√©rencer par <code class="language-text">this</code> au sein de la fonction <code class="language-text">Person</code>, pour que je puisse y affecter des trucs genre <code class="language-text">this.name</code>.  Puis renvoie-moi cet objet.</strong>¬†¬ª</p>
<p>C‚Äôest en r√©sum√© ce que fait l‚Äôop√©rateur <code class="language-text">new</code>.</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">var</span> fred <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// M√™me objet que `this` dans `Person`</span></code></pre></div>
<p>L‚Äôop√©rateur <code class="language-text">new</code> rend √©galement accessible via l‚Äôobjet <code class="language-text">fred</code> tout ce que nous mettons dans <code class="language-text">Person.prototype</code>¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="gatsby-highlight-code-line">Person<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Bonjour, je m‚Äôappelle '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"><span class="token punctuation">}</span></span>
<span class="token keyword">var</span> fred <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">fred<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre></div>
<p>Et c‚Äôest comme √ßa qu‚Äôon simulait des classes avant que JavaScript ne fournisse une syntaxe d√©di√©e.</p>
<hr>
<p>Donc <code class="language-text">new</code> existe en JavaScript depuis des lustres.  En revanche, les classes sont plus r√©centes.  Elles nous permettent de r√©√©crire le code ci-dessus pour mieux coller √† notre intention¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Bonjour, je m‚Äôappelle '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> fred <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fred<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p><em>Saisir l‚Äôintention du d√©veloppeur</em> est une part importante de la conception de langage et d‚ÄôAPI.</p>
<p>Si vous √©crivez une fonction, JavaScript ne peut pas deviner si vous souhaitez l‚Äôutiliser comme <code class="language-text">alert()</code> ou si ce sera un constructeur comme <code class="language-text">new Person()</code>.  Oublier de pr√©ciser <code class="language-text">new</code> pour une fonction comme <code class="language-text">Person</code> donnerait des r√©sultats inattendus.</p>
<p><strong>La syntaxe de classes nous permet de dire¬†: ¬´¬†ce n‚Äôest pas juste une fonction‚Äîc‚Äòest une classe et elle a un constructeur.¬†¬ª</strong>  Si vous oubliez le <code class="language-text">new</code> en l‚Äôappelant, JavaScript l√®vera une erreur¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">let</span> fred <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ‚úÖ  Si Person est une fonction, √ßa marche</span>
<span class="token comment">// ‚úÖ  Si Person est une classe, √ßa marche aussi</span>

<span class="token keyword">let</span> george <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">'George'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// On a oubli√© `new`</span>
<span class="token comment">// üò≥ Si Person est une fonction de type constructeur : comportement foireux</span>
<span class="token comment">// üî¥ Si Person est une classe : √©chec imm√©diat</span></code></pre></div>
<p>√áa nous aide a attraper les erreurs t√¥t au lieu de devoir attendre un bug obscur du style <code class="language-text">this.name</code> devenant <code class="language-text">window.name</code> au lieu de <code class="language-text">george.name</code>.</p>
<p>Ceci dit, √ßa signifie que React a besoin de mettre un <code class="language-text">new</code> avant d‚Äôappeler une classe.  Il ne peut pas juste l‚Äôappeler comme une fonction classique, ou JavaScript traitera √ßa comme une erreur¬†!</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Bonjour</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// üî¥ React ne peut pas se contenter de faire √ßa :</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token function">Counter</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>√áa ne sent pas bon.</p>
<hr>
<p>Avant de voir comment React r√©sout ce probl√®me, il faut bien se souvenir que la plupart des gens utilisent React avec des transpileurs comme Babel pour permettre aux anciens navigateurs de tirer parti de fonctionnalit√©s modernes, comme les classes.  Donc nous devons garder les transpileurs √† l‚Äôesprit dans notre approche.</p>
<p>Dans les premi√®res versions de Babel, les classes pouvaient √™tre appel√©es sans <code class="language-text">new</code>.  √áa a toutefois √©t√© corrig√©‚Äîen g√©n√©rant un peu de code en plus¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// L√©g√®rement simplifi√© par rapport au code pondu par Babel</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">"Cannot call a class as a function"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Notre code :</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ‚úÖ Okay</span>
<span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">'George'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// üî¥ Cannot call a class as a function</span></code></pre></div>
<p>Vous avez peut-√™tre d√©j√† vu ce genre de code dans votre <em>bundle</em>. C‚Äôest la raison d‚Äò√™tre de tous ces appels √† <code class="language-text">_classCallCheck</code>. (On peut r√©duire la taille du <em>bundle</em> en optant pour le mode ¬´¬†laxiste¬†¬ª, sans v√©rifications, mais √ßa peut compliquer la transition ult√©rieure aux classes natives.)</p>
<hr>
<p>√Ä ce stade, vous devriez avoir une compr√©hension suffisante de la diff√©rence entre appeler une fonction avec <code class="language-text">new</code> ou sans <code class="language-text">new</code>¬†:</p>
<table>
<thead>
<tr>
<th></th>
<th><code class="language-text">new Person()</code></th>
<th><code class="language-text">Person()</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code class="language-text">class</code></td>
<td>‚úÖ <code class="language-text">this</code> est une instance de <code class="language-text">Person</code></td>
<td>üî¥ <code class="language-text">TypeError</code></td>
</tr>
<tr>
<td><code class="language-text">function</code></td>
<td>‚úÖ <code class="language-text">this</code> est une instance de <code class="language-text">Person</code></td>
<td>üò≥ <code class="language-text">this</code> est <code class="language-text">window</code> ou <code class="language-text">undefined</code></td>
</tr>
</tbody>
</table>
<p>C‚Äôest pourquoi il est important pour React d‚Äôappeler votre composant correctement. <strong>Si votre composant est d√©fini comme une classe, React doit utiliser <code class="language-text">new</code> pour l‚Äôappeler.</strong></p>
<p>Alors React peut-il juste v√©rifier si quelque chose est une classe ou non¬†?</p>
<p>Pas si simple¬†! M√™me si on pourrait <a href="https://stackoverflow.com/questions/29093396/how-do-you-check-the-difference-between-an-ecmascript-6-class-and-function" target="_blank" rel="nofollow noopener noreferrer">distinguer une classe d‚Äôune fonction en JavaScript</a>, √ßa ne nous aiderait pas pour les classes transform√©es par des outils tels que Babel.  Pour le navigateur, il s‚Äôagirait de fonctions classiques.  Pas de bol pour React.</p>
<hr>
<p>OK, alors peut-√™tre React peut-il juste utiliser <code class="language-text">new</code> pour tous les appels¬†?  Malheureusement, √ßa ne marcherait pas non plus.</p>
<p>Avec les fonctions classiques, les appeler avec <code class="language-text">new</code> leur donnerait une instance comme <code class="language-text">this</code>.  C‚Äôest souhaitable pour les fonctions √©crites en tant que constructeurs (comme notre <code class="language-text">Person</code> plus haut), mais √ßa serait probl√©matique pour les fonctions de composants¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// On ne s‚Äôattend pas √† ce que `this` soit ici une instance quelconque</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Bonjour</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>√áa serait toutefois acceptable.  Il y a deux <em>autres</em> raisons pour lesquelles on laissera tomber cette id√©e.</p>
<hr>
<p>La premi√®re raison qui emp√™che <code class="language-text">new</code> de marcher dans ce cas de figure concerne les fonctions fl√©ch√©es natives (pas celles transpil√©es par Babel), car les appeler avec <code class="language-text">new</code> l√®ve une erreur¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">Greeting</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Bonjour</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// üî¥ Greeting is not a constructor</span></code></pre></div>
<p>C‚Äôest un comportement volontaire qui proc√®de de la conception des fonctions fl√©ch√©es.  Un des principaux avantages des fonctions fl√©ch√©es, c‚Äôest qu‚Äôelles <em>n‚Äôont pas</em> leur propre valeur de <code class="language-text">this</code>‚Äî√† la place, <code class="language-text">this</code> est r√©solu lexicalement, depuis la plus proche port√©e de fonction classique¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Friends</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>    <span class="token keyword">const</span> friends <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>friends<span class="token punctuation">;</span>
    <span class="token keyword">return</span> friends<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>friend <span class="token operator">=></span>
      <span class="token operator">&lt;</span>Friend
<span class="gatsby-highlight-code-line">        <span class="token comment">// `this` est r√©solu depuis la m√©thode `render`</span></span><span class="gatsby-highlight-code-line">        size<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>size<span class="token punctuation">}</span></span>        name<span class="token operator">=</span><span class="token punctuation">{</span>friend<span class="token punctuation">.</span>name<span class="token punctuation">}</span>
        key<span class="token operator">=</span><span class="token punctuation">{</span>friend<span class="token punctuation">.</span>id<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>OK, donc <strong>les fonctions fl√©ch√©es n‚Äôont pas leur propre <code class="language-text">this</code>.</strong>  Mais √ßa veut dire qu‚Äôelles ne peuvent pas √™tre des constructeurs¬†!</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">Person</span> <span class="token operator">=</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// üî¥ √áa n‚Äôaurait aucun sens !</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>C‚Äôest pourquoi <strong>JavaScript interdit l‚Äôappel d‚Äôune fonction fl√©ch√©e avec <code class="language-text">new</code>.</strong>  Si vous le faites, c‚Äôest probablement une erreur de toutes fa√ßons, et il vaut mieux vous le dire t√¥t.  C‚Äôest comme lorsque JavaScript ne vous laisse pas appeler une classe <em>sans</em> <code class="language-text">new</code>.</p>
<p>Tout √ßa est bien joli mais √ßa fait √©chouer notre plan.  React ne peut pas juste appeler <code class="language-text">new</code> sur tout parce que √ßa casserait les fonctions fl√©ch√©es¬†!  On pourrait essayer de d√©tecter les fonctions fl√©ch√©es sp√©cifiquement gr√¢ce √† leur manque de <code class="language-text">prototype</code>, et ne pas appeler <code class="language-text">new</code> sur elles¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>prototype <span class="token comment">// undefined</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>prototype <span class="token comment">// {constructor: f}</span></code></pre></div>
<p>Mais √ßa <a href="https://github.com/facebook/react/issues/4599#issuecomment-136562930" target="_blank" rel="nofollow noopener noreferrer">ne marcherait pas</a> pour les fonctions transpil√©es par Babel. √áa n‚Äôest peut-√™tre pas un gros sujet, mais c‚Äôest une raison de plus qui fait que cette approche est une impasse.</p>
<hr>
<p>Une autre raison qui nous emp√™che d‚Äôutiliser syst√©matiquement <code class="language-text">new</code>¬†: √ßa emp√™cherait React de permettre aux composants de renvoyer des cha√Ænes de caract√®res ou d‚Äôautres types de primitives.</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'Bonjour'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ‚úÖ 'Bonjour'</span>
<span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// üò≥ Greeting {}</span></code></pre></div>
<p>C‚Äôest l√† aussi d√ª aux particularit√©s de conception de l‚Äô<a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Op%C3%A9rateurs/L_op%C3%A9rateur_new" target="_blank" rel="nofollow noopener noreferrer">op√©rateur <code class="language-text">new</code></a>. Comme nous l‚Äôavons vu plus t√¥t, <code class="language-text">new</code> dit au moteur JavaScript de cr√©er un objet, en faire le <code class="language-text">this</code> au sein de la fonction, et au final nous le renvoyer comme r√©sultat de <code class="language-text">new</code>.</p>
<p>Seulement voil√†, JavaScript permet aussi √† une fonction appel√©e avec <code class="language-text">new</code> de <em>remplacer</em> la valeur de retour de <code class="language-text">new</code> en renvoyant un autre objet.  C‚Äô√©tait apparemment consid√©r√© utile pour des besoins comme le recyclage d‚Äôinstance (<em>pooling</em>)¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="gatsby-highlight-code-line"><span class="token comment">// Cr√©√© √† la demande (‚Äúlazily‚Äù)</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">var</span> zeroVector <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="token keyword">function</span> <span class="token function">Vector</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>zeroVector <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      <span class="token comment">// R√©utilise la m√™me instance</span></span><span class="gatsby-highlight-code-line">      <span class="token keyword">return</span> zeroVector<span class="token punctuation">;</span></span>    <span class="token punctuation">}</span>
    zeroVector <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line"><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// üò≤ b === c</span></span></code></pre></div>
<p>Le hic, c‚Äôest que <code class="language-text">new</code> va aussi <em>compl√®tement ignorer</em> la valeur de retour de la fonction si ce n‚Äôest <em>pas</em> un objet.  Si vous renvoyez un litt√©ral texte ou num√©rique, c‚Äôest comme si vous n‚Äôaviez √©crit aucun <code class="language-text">return</code>.</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">Answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ‚úÖ 42</span>
<span class="token keyword">new</span> <span class="token class-name">Answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// üò≥ Answer {}</span></code></pre></div>
<p>Il est tout simplement impossible de r√©cup√©rer la valeur primitive de retour (telle qu‚Äôun nombre ou une cha√Æne) depuis une fonction appel√©e avec <code class="language-text">new</code>.  Donc si React utilisait toujours <code class="language-text">new</code>, il ne pourrait pas autoriser les composants √† renvoyer des cha√Ænes de caract√®res¬†!</p>
<p>C‚Äôest inacceptable, donc on a besoin de trouver un compromis.</p>
<hr>
<p>Bon, qu‚Äôa-t-on appris jusqu‚Äôici¬†?  React a besoin d‚Äôappeler les classes (y compris celles transpil√©es par Babel) <em>avec</em> <code class="language-text">new</code>, mais il doit aussi appeler les fonctions classiques ou fl√©ch√©es (y compris celles transpil√©es par Babel) <em>sans</em> <code class="language-text">new</code>.  Et il n‚Äôy a aucun moyen fiable de distinguer entre les deux.</p>
<p><strong>Si on ne peut pas r√©soudre un probl√®me g√©n√©ral, peut-on en r√©soudre un plus sp√©cifique¬†?</strong></p>
<p>Quand vous d√©finissez un composant comme classe, vous allez probablement √©tendre <code class="language-text">React.Component</code>, afin de tirer parti des m√©thodes pr√©d√©finies comme <code class="language-text">this.setState()</code>.  <strong>Plut√¥t que d‚Äôessayer de d√©tecter toutes les classes, peut-on seulement d√©tecter les descendantes de <code class="language-text">React.Component</code>¬†?</strong></p>
<p><em>Spoiler</em>¬†: c‚Äôest exactement ce que fait React.</p>
<hr>
<p>La mani√®re idiomatique de v√©rifier si <code class="language-text">Greeting</code> est une classe de composant React serait sans doute de tester si <code class="language-text">Greeting.prototype instanceof React.Component</code>¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">.</span>prototype <span class="token keyword">instanceof</span> <span class="token class-name">A</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code></pre></div>
<p>Je sais ce que vous vous dites.  C‚Äôest quoi ce truc¬†?!  Pour r√©pondre √† √ßa, il nous faut comprendre le fonctionnement des prototypes en JavaScript.</p>
<p>Vous avez peut-√™tre entendu parler de la ¬´¬†cha√Æne de prototypes¬†¬ª.  Chaque objet en JavaScript est susceptible d‚Äôavoir un ¬´¬†prototype¬†¬ª.  Quand vous √©crivez <code class="language-text">fred.sayHi()</code> mais que <code class="language-text">fred</code> est un objet qui n‚Äôa pas de propri√©t√© <code class="language-text">sayHi</code>, on cherche cette propri√©t√© <code class="language-text">sayHi</code> sur le prototype de <code class="language-text">fred</code>.  Si on ne l‚Äôy trouve toujours pas, on cherche sur le prototype suivant dans la cha√Æne‚Äîle prototype du prototype de <code class="language-text">fred</code>. Et ainsi de suite.</p>
<p><strong>Histoire de rajouter √† la confusion, la propri√©t√© <code class="language-text">prototype</code> d‚Äôune classe ou d‚Äôune fonction <em>ne r√©f√©rence pas</em> le prototype de cette valeur.</strong> S√©rieux.</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ü§™ Pas le prototype de Person</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// üò≥ Le prototype de Person</span></code></pre></div>
<p>Donc la ¬´¬†cha√Æne de prototypes¬†¬ª est en fait plut√¥t <code class="language-text">__proto__.__proto__.__proto__</code> que <code class="language-text">prototype.prototype.prototype</code>. √áa m‚Äôa pris des ann√©es pour comprendre √ßa.</p>
<p>Que fait la propri√©t√© <code class="language-text">prototype</code> d‚Äôune fonction ou classe, alors¬†? <strong>C‚Äôest le <code class="language-text">__proto__</code> fourni √† tous les objets instanci√©s avec <code class="language-text">new</code> sur cette classe ou fonction¬†!</strong></p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Person<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Bonjour, je m‚Äôappelle '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="gatsby-highlight-code-line"><span class="token keyword">var</span> fred <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'Fred'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Cale `fred.__proto__` sur `Person.prototype`</span></span></code></pre></div>
<p>Et c‚Äôest le long de cette cha√Æne de <code class="language-text">__proto__</code> que JavaScript recherche les propri√©t√©s¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">fred<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 1. fred a-t-il une propri√©t√© sayHi ? Non.</span>
<span class="token comment">// 2. fred.__proto__ a-t-il une propri√©t√© sayHi ? Oui. Appelle-la !</span>

fred<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 1. fred a-t-il une propri√©t√© toString ? Non.</span>
<span class="token comment">// 2. fred.__proto__ a-t-il un propri√©t√© toString ? Non.</span>
<span class="token comment">// 3. fred.__proto__.__proto__ a-t-il une propri√©t√© toString ? Oui. Appelle-la !</span></code></pre></div>
<p>En pratique, vous ne devriez pratiquement jamais manipuler <code class="language-text">__proto__</code> directement dans votre code, sauf si vous √™tes en train de d√©boguer un truc li√© √† la cha√Æne de prototypes.  Si vous souhaitez mettre un truc √† disposition dans <code class="language-text">fred.__proto__</code>, vous √™tes cens√©s le placer dans <code class="language-text">Person.prototype</code>.  En tout cas, c‚Äô√©tait l‚Äôid√©e de base.</p>
<p>La propri√©t√© <code class="language-text">__proto__</code> n‚Äô√©tait m√™me pas cens√©e au d√©part √™tre expos√©e  publiquement par les navigateurs, parce que la cha√Æne de prototypes √©tait consid√©r√©e comme un d√©tail d‚Äôimpl√©mentation.  Mais certains navigateurs l‚Äôont rendue publique et au final elle a fait l‚Äôobjet d‚Äôune standardisation r√©ticente (mais a ensuite √©t√© d√©pr√©ci√©e au profit de <code class="language-text">Object.getPrototypeOf()</code>).</p>
<p><strong>Et pourtant je trouve toujours hallucinant qu‚Äôune propri√©t√© appel√©e <code class="language-text">prototype</code> ne vous fournisse pas le prototype d‚Äôune valeur</strong> (par exemple, <code class="language-text">fred.prototype</code> est ind√©fini parce que <code class="language-text">fred</code> n‚Äôest pas une fonction).  Personnellement, je trouve que c‚Äôest la raison majeure pour laquelle m√™me des d√©veloppeurs exp√©riment√©s ont tendance √† comprendre les prototypes JavaScript de travers.</p>
<hr>
<p>Il est long cet article, hein¬†? Je dirais qu‚Äôon est √† 80% l√†.  Tenez le coup.</p>
<!-- RESUME -->
<p>On sait que lorsqu‚Äôon dit <code class="language-text">obj.foo</code>, JavaScript examine en fait <code class="language-text">obj.__proto__</code>, <code class="language-text">obj.__proto__.__proto__</code>, et ainsi de suite.</p>
<p>Avec les classes, on ne per√ßoit pas directement ce m√©canisme, mais <code class="language-text">extends</code> fonctionne aussi gr√¢ce √† cette bonne vieille cha√Æne de prototypes.  C‚Äôest ainsi qu‚Äôune instance de classe React peut acc√©der √† des m√©thodes comme <code class="language-text">setState</code>¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="gatsby-highlight-code-line"><span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span></span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">Bonjour</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Greeting.prototype</span>
<span class="gatsby-highlight-code-line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// React.Component.prototype</span></span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Object.prototype</span>

c<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// Trouv√© dans c.__proto__ (Greeting.prototype)</span>
<span class="gatsby-highlight-code-line">c<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Trouv√© dans c.__proto__.__proto__ (React.Component.prototype)</span></span>c<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Trouv√© dans c.__proto__.__proto__.__proto__ (Object.prototype)</span></code></pre></div>
<p>En d‚Äôautres termes, <strong>quand vous utilisez des classes, la cha√Æne des <code class="language-text">__proto__</code> d‚Äôune instance refl√®te la hi√©rarchie des classes¬†:</strong></p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// cha√Æne des `extends`</span>
Greeting
  ‚Üí React<span class="token punctuation">.</span>Component
    ‚Üí <span class="token function">Object</span> <span class="token punctuation">(</span>implicitement<span class="token punctuation">)</span>

<span class="token comment">// cha√Æne des `__proto__`</span>
<span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  ‚Üí Greeting<span class="token punctuation">.</span>prototype
    ‚Üí React<span class="token punctuation">.</span>Component<span class="token punctuation">.</span>prototype
      ‚Üí Object<span class="token punctuation">.</span>prototype</code></pre></div>
<p>2 Chainz.</p>
<hr>
<p>Puisque la cha√Æne des <code class="language-text">__proto__</code> refl√®te la hi√©rarchie des classes, nous pouvons v√©rifier si <code class="language-text">Greeting</code> √©tend <code class="language-text">React.Component</code> en commen√ßant avec <code class="language-text">Greeting.prototype</code>, puis en remontant le long de la cha√Æne des <code class="language-text">__proto__</code>¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// cha√Æne des `__proto__`</span>
<span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="gatsby-highlight-code-line">  ‚Üí Greeting<span class="token punctuation">.</span>prototype <span class="token comment">// üïµÔ∏è On commence ici</span></span><span class="gatsby-highlight-code-line">    ‚Üí React<span class="token punctuation">.</span>Component<span class="token punctuation">.</span>prototype <span class="token comment">// ‚úÖ Trouv√© !</span></span>      ‚Üí Object<span class="token punctuation">.</span>prototype</code></pre></div>
<p>Et devinez quoi, <code class="language-text">x instanceof Y</code> fait exactement ce type de recherche.  Il suit la cha√Æne d√©marrant avec <code class="language-text">x.__proto__</code> √† la recherche de <code class="language-text">Y.prototype</code>.</p>
<p>D‚Äôhabitude, on utilise √ßa pour d√©terminer si un objet est une instance d‚Äôune classe donn√©e :</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">let</span> greeting <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeting <span class="token keyword">instanceof</span> <span class="token class-name">Greeting</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">// greeting (üïµÔ∏è‚Äç On commence ici)</span>
<span class="token comment">//   .__proto__ ‚Üí Greeting.prototype (‚úÖ Trouv√© !)</span>
<span class="token comment">//     .__proto__ ‚Üí React.Component.prototype</span>
<span class="token comment">//       .__proto__ ‚Üí Object.prototype</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeting <span class="token keyword">instanceof</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">// greeting (üïµÔ∏è‚Äç On commence ici)</span>
<span class="token comment">//   .__proto__ ‚Üí Greeting.prototype</span>
<span class="token comment">//     .__proto__ ‚Üí React.Component.prototype (‚úÖ Trouv√© !)</span>
<span class="token comment">//       .__proto__ ‚Üí Object.prototype</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeting <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">// greeting (üïµÔ∏è‚Äç On commence ici)</span>
<span class="token comment">//   .__proto__ ‚Üí Greeting.prototype</span>
<span class="token comment">//     .__proto__ ‚Üí React.Component.prototype</span>
<span class="token comment">//       .__proto__ ‚Üí Object.prototype (‚úÖ Trouv√© !)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeting <span class="token keyword">instanceof</span> <span class="token class-name">Banana</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token comment">// greeting (üïµÔ∏è‚Äç On commence ici)</span>
<span class="token comment">//   .__proto__ ‚Üí Greeting.prototype</span>
<span class="token comment">//     .__proto__ ‚Üí React.Component.prototype</span>
<span class="token comment">//       .__proto__ ‚Üí Object.prototype (üôÖ‚Äç Pas trouv√© !)</span></code></pre></div>
<p>Mais √ßa marcherait tout aussi bien pour d√©terminer si une classe en √©tend une autre¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Greeting<span class="token punctuation">.</span>prototype <span class="token keyword">instanceof</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// greeting</span>
<span class="token comment">//   .__proto__ ‚Üí Greeting.prototype (üïµÔ∏è‚Äç On commence ici)</span>
<span class="token comment">//     .__proto__ ‚Üí React.Component.prototype (‚úÖ Trouv√© !)</span>
<span class="token comment">//       .__proto__ ‚Üí Object.prototype</span></code></pre></div>
<p>Et voil√† comment on pourrait d√©terminer si quelque chose est une classe de composant React ou une fonction classique.</p>
<hr>
<p>Mais ce n‚Äôest pas ce que fait React. üò≥</p>
<p>Un des pi√®ges de la solution √† base d‚Äô<code class="language-text">instanceof</code>, c‚Äôest qu‚Äôelle ne marche pas lorsqu‚Äôon a de multiples copies de React dans la page, et que le composant qu‚Äôon examine h√©rite du <code class="language-text">React.Component</code> provenant d‚Äôune <em>autre</em> copie de React.  Avoir plusieurs copies de React dans un m√™me projet est une mauvaise id√©e pour plusieurs raisons, mais historiquement nous avons essay√© d‚Äô√©viter, autant que possible, que √ßa pose probl√®me. (Ceci dit, avec les Hooks, on <a href="https://github.com/facebook/react/issues/13991" target="_blank" rel="nofollow noopener noreferrer">devra peut-√™tre</a> exiger l‚Äôunicit√©.)</p>
<p>Une autre heuristique possible serait de v√©rifier si une m√©thode <code class="language-text">render</code> est pr√©sente sur le prototype.  Toutefois, √† l‚Äô√©poque on <a href="https://github.com/facebook/react/issues/4599#issuecomment-129714112" target="_blank" rel="nofollow noopener noreferrer">n‚Äô√©tait pas s√ªrs</a> de la fa√ßon dont l‚ÄôAPI √©voluerait.  Chaque v√©rification entra√Æne un co√ªt, on ne voulait pas avoir √† en faire plusieurs.  Par ailleurs, √ßa ne marcherait pas non plus si <code class="language-text">render</code> √©tait d√©finie comme m√©thode sur l‚Äôinstance, avec la syntaxe des initialiseurs de champs par exemple.</p>
<p>De sorte qu‚Äô√† la place, React <a href="https://github.com/facebook/react/pull/4663" target="_blank" rel="nofollow noopener noreferrer">a ajout√©</a> un drapeau sp√©cial sur le composant de base.  React v√©rifie la pr√©sence de ce drapeau, et c‚Äôest comme √ßa qu‚Äôil sait si il a affaire √† une classe de composant React ou non.</p>
<p>Au d√©but le drapeau √©tait d√©fini sur la classe de base <code class="language-text">React.Component</code> elle-m√™me¬†:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// Dans React</span>
<span class="token keyword">class</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Component<span class="token punctuation">.</span>isReactClass <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// On peut le v√©rifier comme ceci</span>
<span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Greeting<span class="token punctuation">.</span>isReactClass<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ‚úÖ Oui</span></code></pre></div>
<p>Seulement voil√†, certaines impl√©mentations de classes que nous voulions permettre <a href="https://github.com/scala-js/scala-js/issues/1900" target="_blank" rel="nofollow noopener noreferrer">ne copiaient pas</a> les propri√©t√©s statiques (ou ne d√©finissaient pas la propri√©t√© non standard <code class="language-text">__proto__</code>), de sorte que le drapeau disparaissait.</p>
<p>C‚Äôest pourquoi React <a href="https://github.com/facebook/react/pull/5021" target="_blank" rel="nofollow noopener noreferrer">a d√©plac√©</a> ce drapeau vers <code class="language-text">React.Component.prototype</code>:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// Dans React</span>
<span class="token keyword">class</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Component<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isReactComponent <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// On peut le v√©rifier comme ceci</span>
<span class="token keyword">class</span> <span class="token class-name">Greeting</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Greeting<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isReactComponent<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ‚úÖ Oui</span></code></pre></div>
<p><strong>Et c‚Äôest litt√©ralement tout ce qu‚Äôon a besoin de faire.</strong></p>
<p>Vous vous demandez peut-√™tre pourquoi c‚Äôest un objet, et pas juste un bool√©en.  En pratique √ßa n‚Äôa pas beaucoup d‚Äôimportance, mais les premi√®res versions de Jest (avant que Jest soit Bien‚Ñ¢) avait l‚Äô<em>automocking</em> activ√© par d√©faut.  Les mocks g√©n√©r√©s laissaient de c√¥t√© les propri√©t√©s primitives, <a href="https://github.com/facebook/react/pull/4663#issuecomment-136533373" target="_blank" rel="nofollow noopener noreferrer">ce qui p√©tait notre v√©rification</a>. Merci Jest.</p>
<p>La v√©rification de <code class="language-text">isReactComponent</code> reste <a href="https://github.com/facebook/react/blob/769b1f270e1251d9dbdce0fcbd9e92e502d059b8/packages/react-reconciler/src/ReactFiber.js#L297-L300" target="_blank" rel="nofollow noopener noreferrer">utilis√©e par React</a> jusqu‚Äô√† ce jour.</p>
<p>Si vous n‚Äô√©tendez pas <code class="language-text">React.Component</code>, React ne trouvera pas <code class="language-text">isReactComponent</code> sur le prototype et ne traitera pas le composant comme une classe.  Maintenant vous savez pourquoi <a href="https://stackoverflow.com/a/42680526/458193" target="_blank" rel="nofollow noopener noreferrer">la r√©ponse la plus populaire</a> √† l‚Äôerreur <code class="language-text">Cannot call a class as a function</code> consiste √† ajouter <code class="language-text">extends React.Component</code>. Pour finir, un <a href="https://github.com/facebook/react/pull/11168" target="_blank" rel="nofollow noopener noreferrer">avertissement a √©t√© ajout√©</a> si <code class="language-text">prototype.render</code> existe mais que <code class="language-text">prototype.isReactComponent</code> est manquant.</p>
<hr>
<p>Vous trouvez peut-√™tre que le titre de cet article √©tait un leurre grossier. <strong>La solution r√©elle est super simple, mais je suis parti sur une tangente de fou pour vous expliquer <em>pourquoi</em> React a fini par opter pour cette solution, et quelles √©taient les alternatives.</strong></p>
<p>D‚Äôapr√®s ma propre exp√©rience, c‚Äôest souvent le cas avec les APIs de biblioth√®ques.  Pour qu‚Äôune API soit facile √† utiliser, on doit souvent consid√©rer la s√©mantique du langage (voire, pour plusieurs langages, leurs √©volutions √† venir), la performance d‚Äôex√©cution, l‚Äôergonomie avec ou sans √©tapes de transpilation, l‚Äô√©tat de l‚Äô√©cosyst√®me et des solutions de <em>packaging</em>, la capacit√© √† produire des avertissements le plus en amont possible, et bien d‚Äôautres facteurs.  Le r√©sultat final n‚Äôest pas toujours le plus √©l√©gant, mais doit √™tre le plus pratique.</p>
<p><strong>Si l‚ÄôAPI finale a du succ√®s, <em>ses utilisateurs</em> n‚Äôauront jamais √† penser √† ce processus.</strong>  Ils peuvent ainsi se concentrer plut√¥t sur la cr√©ation de leurs applications.</p>
<p>Mais si vous √™tes par ailleurs curieux¬∑se‚Ä¶ c‚Äôest sympa de savoir comment √ßa marche sous le capot.</p></div><footer><p><a href="https://mobile.twitter.com/search?q=https%3A%2F%2Fyusufunlu.github.io%2FPersonal-Blog%2F%2Fhow-does-react-tell-a-class-from-a-function%2F" target="_blank" rel="noopener noreferrer">Discuss on Twitter</a> ‚Ä¢ <a href="https://github.com/gaearon/overreacted.io/edit/master/src/pages/how-does-react-tell-a-class-from-a-function/index.fr.md" target="_blank" rel="noopener noreferrer">Edit on GitHub</a></p></footer></article></main><aside><div style="margin:90px 0 40px 0;font-family:system-ui, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;,
    &quot;Roboto&quot;, &quot;Oxygen&quot;, &quot;Ubuntu&quot;, &quot;Cantarell&quot;, &quot;Fira Sans&quot;,
    &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif"><form action="https://app.convertkit.com/forms/812047/subscriptions" class="seva-form formkit-form" method="post" min-width="400 500 600 700 800" style="background-color:rgb(255, 255, 255);border-radius:6px"><div data-style="full"><div data-element="column" class="formkit-column" style="background-color:rgb(249, 250, 251)"><h1 class="formkit-header" data-element="header" style="color:rgb(77, 77, 77);font-size:20px;font-weight:700">Join the Newsletter</h1><div data-element="subheader" class="formkit-subheader" style="color:rgb(104, 104, 104)"><p>Subscribe to get my latest content by email.</p></div><div class="formkit-image"><svg xmlns="http://www.w3.org/2000/svg" width="46" height="46" viewBox="0 0 46 46" style="max-width:100%"><g fill="none" fill-rule="evenodd"><path fill="#DD92AB" d="M23,36 C22.813,36 22.627,35.948 22.463,35.844 L0.463,21.844 C0.159,21.651 -0.017,21.308 0.001,20.948 C0.02,20.589 0.23,20.266 0.553,20.105 L23,6 L45.447,20.105 C45.769,20.266 45.98,20.588 45.999,20.948 C46.018,21.308 45.841,21.65 45.537,21.844 L23.537,35.844 C23.373,35.948 23.187,36 23,36 Z"></path><path fill="#FFF" d="M38,37 L8,37 L8,1 C8,0.448 8.448,0 9,0 L37,0 C37.552,0 38,0.448 38,1 L38,37 Z"></path><path fill="#FFA7C4" d="M45,46 C44.916,46 44.831,45.989 44.748,45.968 L21.748,39.968 L22,33 L46,21 L46,45 C46,45.31 45.856,45.602 45.611,45.792 C45.435,45.928 45.219,46 45,46 Z"></path><path fill="#FFC3D7" d="M45,46 L1,46 C0.447,46 0,45.552 0,45 L0,21 L45.479,44.122 C45.88,44.341 46.083,44.804 45.969,45.247 C45.856,45.69 45.457,46 45,46 Z"></path><path fill="#FFA7C4" d="M19 20.414L14.293 15.707C13.902 15.316 13.902 14.684 14.293 14.293L19 9.586 20.414 11 16.414 15 20.414 19 19 20.414zM27 20.414L25.586 19 29.586 15 25.586 11 27 9.586 31.707 14.293C32.098 14.684 32.098 15.316 31.707 15.707L27 20.414z"></path></g></svg></div></div><div data-element="column" class="formkit-column"><ul class="formkit-alert formkit-alert-error" data-element="errors" data-group="alert"></ul><div data-element="fields" class="seva-fields formkit-fields"><div class="formkit-field"><input type="text" class="formkit-input" aria-label="Your first name" name="fields[first_name]" placeholder="Your first name" style="border-color:rgb(227, 227, 227);border-radius:4px;color:rgb(0, 0, 0);font-weight:400"/></div><div class="formkit-field"><input type="email" class="formkit-input" name="email_address" aria-label="Your email address" placeholder="Your email address" style="border-color:rgb(227, 227, 227);border-radius:4px;color:rgb(0, 0, 0);font-weight:400"/></div><button data-element="submit" class="formkit-submit formkit-submit" style="background-color:hsl(340, 63%, 55%);border-radius:24px;color:white;font-weight:700"><div class="formkit-spinner"></div><span>Subscribe</span></button></div><div data-element="guarantee" class="formkit-guarantee" style="color:rgb(77, 77, 77);font-size:13px;font-weight:400"><p>I won‚Äôt send you spam.</p><p>Unsubscribe at <em>any</em> time.</p></div></div></div></form></div><h3 style="font-family:Montserrat, sans-serif;margin-top:0.4375rem"><a style="box-shadow:none;text-decoration:none;color:var(--pink)" href="/Personal-Blog/">Overreacted</a></h3><div style="display:flex;margin-bottom:3.5rem"><img src="/Personal-Blog/static/profile-pic-69c77131fd248a7aaaf26fab021f469f.png" alt="Yusuf Unlu" style="margin-right:0.875rem;margin-bottom:0;height:3.5rem;border-radius:50%"/><p style="max-width:310px">Personal blog by <a href="https://mobile.twitter.com/yufusunlu">Yusuf Unlu</a>.<!-- --> <!-- -->I¬†explain with words and code.</p></div><nav><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li></li><li></li></ul></nav></aside></div></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-130227707-1', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"fr-how-does-react-tell-a-class-from-a-function-5a7","path":"/fr/how-does-react-tell-a-class-from-a-function/"};window.dataPath="112/path---fr-how-does-react-tell-a-class-from-a-function-5-a-7-311-ArQwPm31hepwQa5GrUMguoU9k0";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-198cd55e69a6a03b3f73.js"],"component---src-templates-blog-index-js":["/component---src-templates-blog-index-js-1d061c91bf8b4d1ed13d.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js.77da55083c18bdb7fbef.css","/component---src-templates-blog-post-js-ef2898a2e81c47683f5b.js"],"component---src-pages-404-js":["/component---src-pages-404-js.fd288bb02445d10643fa.css","/component---src-pages-404-js-b3cd5f330471999955d6.js"],"component---src-pages-confirm-js":["/component---src-pages-confirm-js.fd288bb02445d10643fa.css","/component---src-pages-confirm-js-009d25afd727cbb30f51.js"],"component---src-pages-thanks-js":["/component---src-pages-thanks-js.fd288bb02445d10643fa.css","/component---src-pages-thanks-js-8fa56c06867d62f44f13.js"],"pages-manifest":["/pages-manifest-39a0dca89e16fd875f78.js"]};/*]]>*/</script><script src="/Personal-Blog/webpack-runtime-816b037bee21ad2c738f.js" async=""></script><script src="/Personal-Blog/1-1b550cd61a5e170131aa.js" async=""></script><script src="/Personal-Blog/2-469c709c476faea7103a.js" async=""></script><script src="/Personal-Blog/0-b197e8c6c7ff26484233.js" async=""></script><script src="/Personal-Blog/app-198cd55e69a6a03b3f73.js" async=""></script><script src="/Personal-Blog/component---src-templates-blog-post-js-ef2898a2e81c47683f5b.js" async=""></script></body></html>