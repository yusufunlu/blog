<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/2.4ac699a3d6a5be115d81.css">@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:url(/static/merriweather-400-l-8796b7875d52e9cb9b280211e8d3f82d.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:url(/static/montserrat-900-l-5751237264c0468be0d48ad1cea75b90.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}body{--pink:#ffa7c4;background-color:var(--bg)}body.light{--bg:#fff;--header:var(--pink);--textNormal:#222;--textTitle:#222;--textLink:#d23669;--hr:rgba(0,0,0,0.2);--inlineCode-bg:rgba(255,229,100,0.2);--inlineCode-text:#1a1a1a}body.dark{-webkit-font-smoothing:antialiased;--bg:#282c35;--header:#fff;--textNormal:hsla(0,0%,100%,0.88);--textTitle:#fff;--textLink:var(--pink);--hr:hsla(0,0%,100%,0.2);--inlineCode-bg:#373c49;--inlineCode-text:#e6e6e6}body:lang(ar) article,body:lang(fa) article{direction:rtl}body:lang(ar) .language-text,body:lang(ar) article .translations,body:lang(ar) article pre,body:lang(fa) .language-text,body:lang(fa) article .translations,body:lang(fa) article pre{direction:ltr}body:lang(ar) .language-text,body:lang(fa) .language-text{display:inline-block}body:lang(ar) blockquote,body:lang(fa) blockquote{border-left:unset;border-right:.32813rem solid rgba(0,0,0,.9);padding-right:1.42188rem;padding-left:unset;margin-left:.75rem;margin-right:-1.75rem}body:lang(fa) article,body:lang(fa) header>h1{font-family:Vazir}body:lang(ar) article,body:lang(ar) header>h1{font-family:Cairo,sans-serif}body:lang(ko) article,body:lang(ko) header{word-break:keep-all}code[class*=language-],pre[class*=language-]{color:#fff;background:none;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;-webkit-font-feature-settings:normal;font-feature-settings:normal;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;margin-bottom:0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{overflow:auto;padding:1.3125rem}pre[class*=language-]::selection{background:#27292a}pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:hsla(0,0%,100%,.15)}:not(pre)>code[class*=language-]{border-radius:.3em;background:var(--inlineCode-bg);color:var(--inlineCode-text);padding:.15em .2em .05em;white-space:normal}.token.attr-name{color:#addb67;font-style:italic}.token.comment{color:#809393}.token.string,.token.url{color:#addb67}.token.variable{color:#d6deeb}.token.number{color:#f78c6c}.token.builtin,.token.char,.token.constant,.token.function{color:#82aaff}.token.punctuation{color:#c792ea}.token.doctype,.token.selector{color:#c792ea;font-style:"italic"}.token.class-name{color:#ffcb8b}.token.keyword,.token.operator,.token.tag{color:#ffa7c4}.token.boolean{color:#ff5874}.token.property{color:#80cbc4}.token.namespace{color:#b2ccd6}pre[data-line]{padding:1em 0 1em 3em;position:relative}.gatsby-highlight-code-line{background-color:#022a4b;display:block;padding-right:1em;padding-left:1.25em;border-left:.25em solid #ffa7c4}.gatsby-highlight,.gatsby-highlight-code-line{margin-right:-1.3125rem;margin-left:-1.3125rem}.gatsby-highlight{margin-bottom:1.75rem;border-radius:10px;background:#011627;-webkit-overflow-scrolling:touch;overflow:auto}@media (max-width:672px){.gatsby-highlight{border-radius:0}}.gatsby-highlight pre[class*=language-]{float:left;min-width:100%}.react-toggle{touch-action:pan-x;display:inline-block;position:relative;cursor:pointer;background-color:transparent;border:0;padding:0;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent}.react-toggle-screenreader-only{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.react-toggle-track{width:50px;height:24px;padding:0;border-radius:30px;background-color:#0f1114;transition:all .2s ease}.react-toggle-track-check{position:absolute;width:17px;height:17px;left:5px;top:0;bottom:0;margin-top:auto;margin-bottom:auto;line-height:0;opacity:0;transition:opacity .25s ease}.react-toggle--checked .react-toggle-track-check,.react-toggle-track-x{opacity:1;transition:opacity .25s ease}.react-toggle-track-x{position:absolute;width:17px;height:17px;right:5px;top:0;bottom:0;margin-top:auto;margin-bottom:auto;line-height:0}.react-toggle--checked .react-toggle-track-x{opacity:0}.react-toggle-thumb{position:absolute;top:1px;left:1px;width:22px;height:22px;border-radius:50%;background-color:#fafafa;box-sizing:border-box;transition:all .5s cubic-bezier(.23,1,.32,1) 0ms;-webkit-transform:translateX(0);transform:translateX(0)}.react-toggle--checked .react-toggle-thumb{-webkit-transform:translateX(26px);transform:translateX(26px);border-color:#19ab27}.react-toggle--focus .react-toggle-thumb{box-shadow:0 0 2px 3px #ffa7c4}.react-toggle:active .react-toggle-thumb{box-shadow:0 0 5px 5px #ffa7c4}</style><style data-href="/component---src-templates-blog-post-js.f3aea2f29a9b96501823.css">@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:url(/static/merriweather-400-i-l-9a3ea56a5f449980432ace5972181ef6.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:url(/static/merriweather-700-l-e24e02bb044cb07539a3a6bd12348d14.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:url(/static/merriweather-700-i-l-ad085ede31afcc5585ff34869b1cd029.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.formkit-form *{box-sizing:border-box}.formkit-form legend{border:none;font-size:inherit;margin-bottom:10px;padding:0;position:relative;display:table}.formkit-form fieldset{border:0;padding:.01em 0 0;margin:0;min-width:0}.formkit-form body:not(:-moz-handler-blocked) fieldset{display:table-cell}.formkit-form p{color:inherit;font-size:inherit;font-weight:inherit}.formkit-form[data-format="slide in"],.formkit-form[data-format=modal]{display:none}.formkit-form .formkit-checkboxes,.formkit-form .formkit-input,.formkit-form .formkit-select{width:100%}.formkit-form .formkit-button,.formkit-form .formkit-submit{border:0;border-radius:5px;color:#fff;cursor:pointer;display:inline-block;text-align:center;font-size:15px;font-weight:500;margin-bottom:15px;overflow:hidden;padding:0;position:relative;vertical-align:middle}.formkit-form .formkit-button:focus,.formkit-form .formkit-button:hover,.formkit-form .formkit-submit:focus,.formkit-form .formkit-submit:hover{outline:none}.formkit-form .formkit-button:focus>span,.formkit-form .formkit-button:hover>span,.formkit-form .formkit-submit:focus>span,.formkit-form .formkit-submit:hover>span{background-color:#dc658d}.formkit-form .formkit-button>span,.formkit-form .formkit-submit>span{display:block;transition:all .3s ease-in-out;padding:12px 24px}.formkit-form .formkit-input{background:#fff;font-size:15px;padding:12px;border:1px solid #e3e3e3;flex:1 0 auto;line-height:1.4;margin:0;transition:border-color .3s ease-out}.formkit-form .formkit-input:focus{outline:none;border-color:#1677be;transition:border-color .3s ease}.formkit-form .formkit-input::-webkit-input-placeholder{color:#848585}.formkit-form .formkit-input:-ms-input-placeholder{color:#848585}.formkit-form .formkit-input::-ms-input-placeholder{color:#848585}.formkit-form .formkit-input::placeholder{color:#848585}.formkit-form [data-group=dropdown]{position:relative;display:inline-block;width:100%}.formkit-form [data-group=dropdown]:before{content:"";top:calc(50% - 2.5px);right:10px;position:absolute;pointer-events:none;border-color:#4f4f4f transparent transparent;border-style:solid;border-width:6px 6px 0;height:0;width:0;z-index:999}.formkit-form [data-group=dropdown] select{height:auto;width:100%;cursor:pointer;color:#333;line-height:1.4;margin-bottom:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;font-size:15px;padding:12px 25px 12px 12px;border:1px solid #e3e3e3;background:#fff}.formkit-form [data-group=dropdown] select:focus{outline:none}.formkit-form [data-group=checkboxes]{text-align:left;margin:0}.formkit-form [data-group=checkboxes] [data-group=checkbox]{margin-bottom:10px}.formkit-form [data-group=checkboxes] [data-group=checkbox] *{cursor:pointer}.formkit-form [data-group=checkboxes] [data-group=checkbox]:last-of-type{margin-bottom:0}.formkit-form [data-group=checkboxes] [data-group=checkbox] input[type=checkbox]{display:none}.formkit-form [data-group=checkboxes] [data-group=checkbox] input[type=checkbox]+label:after{content:none}.formkit-form [data-group=checkboxes] [data-group=checkbox] input[type=checkbox]:checked+label:after{border-color:#fff;content:""}.formkit-form [data-group=checkboxes] [data-group=checkbox] input[type=checkbox]:checked+label:before{background:#10bf7a;border-color:#10bf7a}.formkit-form [data-group=checkboxes] [data-group=checkbox] label{position:relative;display:inline-block;padding-left:28px}.formkit-form [data-group=checkboxes] [data-group=checkbox] label:after,.formkit-form [data-group=checkboxes] [data-group=checkbox] label:before{position:absolute;content:"";display:inline-block}.formkit-form [data-group=checkboxes] [data-group=checkbox] label:before{height:16px;width:16px;border:1px solid #e3e3e3;background:#fff;left:0;top:3px}.formkit-form [data-group=checkboxes] [data-group=checkbox] label:after{height:4px;width:8px;border-left:2px solid #4d4d4d;border-bottom:2px solid #4d4d4d;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);left:4px;top:8px}.formkit-form .formkit-alert{background:#f9fafb;border:1px solid #e3e3e3;border-radius:5px;flex:1 0 auto;list-style:none;margin:25px auto;padding:12px;text-align:center;width:100%}.formkit-form .formkit-alert:empty{display:none}.formkit-form .formkit-alert-success{background:#d3fbeb;border-color:#10bf7a;color:#0c905c}.formkit-form .formkit-alert-error{background:#fde8e2;border-color:#f2643b;color:#ea4110}.formkit-form .formkit-spinner{display:flex;height:0;width:0;margin:0 auto;position:absolute;top:0;left:0;right:0;overflow:hidden;text-align:center;transition:all .3s ease-in-out}.formkit-form .formkit-spinner>div{margin:auto;width:12px;height:12px;background-color:#fff;opacity:.3;border-radius:100%;display:inline-block;-webkit-animation:formkit-bouncedelay-formkit-form-data-uid-4a352cb1fd- 1.4s ease-in-out infinite both;animation:formkit-bouncedelay-formkit-form-data-uid-4a352cb1fd- 1.4s ease-in-out infinite both}.formkit-form .formkit-spinner>div:first-child{-webkit-animation-delay:-.32s;animation-delay:-.32s}.formkit-form .formkit-spinner>div:nth-child(2){-webkit-animation-delay:-.16s;animation-delay:-.16s}.formkit-form .formkit-submit[data-active] .formkit-spinner{opacity:1;height:100%;width:50px}.formkit-form .formkit-submit[data-active] .formkit-spinner~span{opacity:0}@-webkit-keyframes formkit-bouncedelay-formkit-form-data-uid-4a352cb1fd-{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes formkit-bouncedelay-formkit-form-data-uid-4a352cb1fd-{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}.formkit-form{box-shadow:0 2px 15px 0 rgba(210,214,220,.5);max-width:700px;overflow:hidden}.formkit-form [data-style=full]{width:100%;display:block}.formkit-form .formkit-header{margin-top:0;margin-bottom:20px;font-family:inherit}.formkit-form .formkit-subheader{margin:15px 0}.formkit-form .formkit-column{background-size:cover;background-repeat:no-repeat;background-position:50%;padding:20px}.formkit-form .formkit-column:nth-child(2){border-top:1px solid #e9ecef}.formkit-form .formkit-field{margin:0 0 15px}.formkit-form .formkit-input,.formkit-form .formkit-submit{width:100%}.formkit-form .formkit-guarantee{font-size:13px;margin:0 0 15px}.formkit-form .formkit-guarantee>p{margin:0}.formkit-form .formkit-powered-by{color:#7d7d7d;display:block;font-size:12px;margin-bottom:0;text-align:center}.formkit-form .formkit-powered-by[data-active=false]{opacity:.5}.formkit-form[min-width~="600"] [data-style=full],.formkit-form[min-width~="700"] [data-style=full],.formkit-form[min-width~="800"] [data-style=full]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.formkit-form[min-width~="600"] .formkit-submit,.formkit-form[min-width~="700"] .formkit-submit,.formkit-form[min-width~="800"] .formkit-submit{width:auto}.formkit-form[min-width~="600"] .formkit-column,.formkit-form[min-width~="700"] .formkit-column,.formkit-form[min-width~="800"] .formkit-column{padding:40px}.formkit-form[min-width~="600"] .formkit-column:nth-child(2),.formkit-form[min-width~="700"] .formkit-column:nth-child(2),.formkit-form[min-width~="800"] .formkit-column:nth-child(2){border-top:none}</style><meta name="generator" content="Gatsby 2.0.91"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" title="Dan Abramov&#x27;s Overreacted Blog RSS Feed" href="/rss.xml"/><link rel="shortcut icon" href="/icons/icon-48x48.png"/><link rel="manifest" href="/manifest.webmanifest"/><title data-react-helmet="true">useEffectå®Œå…¨ã‚¬ã‚¤ãƒ‰ â€” Overreacted</title><meta data-react-helmet="true" name="theme-color" content="#282c35"/><meta data-react-helmet="true" name="description" content="ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®ä¸€éƒ¨"/><meta data-react-helmet="true" property="og:url" content="https://overreacted.io/ja/a-complete-guide-to-useeffect/"/><meta data-react-helmet="true" property="og:title" content="useEffectå®Œå…¨ã‚¬ã‚¤ãƒ‰"/><meta data-react-helmet="true" property="og:description" content="ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®ä¸€éƒ¨"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@dan_abramov"/><meta data-react-helmet="true" name="twitter:title" content="useEffectå®Œå…¨ã‚¬ã‚¤ãƒ‰"/><meta data-react-helmet="true" name="twitter:description" content="ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®ä¸€éƒ¨"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:inherit;font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);border-left-color:inherit;opacity:0.8;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:var(--hr);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"â€” ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:var(--textLink);text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}a.anchor{box-shadow:none;}a.anchor svg[aria-hidden="true"]{stroke:var(--textLink);}p code{font-size:1rem;}h1 code, h2 code, h3 code, h4 code, h5 code, h6 code{font-size:inherit;}li code{font-size:1rem;}blockquote.translation{font-size:1em;}</style><link as="script" rel="preload" href="/component---src-templates-blog-post-js-5ff9d93420b5b2cefece.js"/><link as="script" rel="preload" href="/app-83825dcbe188439d174e.js"/><link as="script" rel="preload" href="/0-b197e8c6c7ff26484233.js"/><link as="script" rel="preload" href="/2-31a6021f1637c5720eda.js"/><link as="script" rel="preload" href="/1-1b550cd61a5e170131aa.js"/><link as="script" rel="preload" href="/webpack-runtime-dea655677e505366ecd7.js"/><link as="fetch" rel="preload" href="/static/d/472/path---ja-a-complete-guide-to-useeffect-ae-9-e23-LvXwMLbvzwf7aFMogprKT2cg6dg.json" crossorigin="use-credentials"/></head><body class="light"><script>
              (function() {
                window.__onThemeChange = function() {};
                function setTheme(newTheme) {
                  window.__theme = newTheme;
                  preferredTheme = newTheme;
                  document.body.className = newTheme;
                  window.__onThemeChange(newTheme);
                }

                var preferredTheme;
                try {
                  preferredTheme = localStorage.getItem('theme');
                } catch (err) { }

                window.__setPreferredTheme = function(newTheme) {
                  setTheme(newTheme);
                  try {
                    localStorage.setItem('theme', newTheme);
                  } catch (err) {}
                }

                var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
                darkQuery.addListener(function(e) {
                  window.__setPreferredTheme(e.matches ? 'dark' : 'light')
                });

                setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
              })();
            </script><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div style="color:var(--textNormal);background:var(--bg);transition:color 0.2s ease-out, background 0.2s ease-out;min-height:100vh"><div style="margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem"><header style="display:flex;justify-content:space-between;align-items:center;margin-bottom:2.625rem"><h3 style="font-family:Montserrat, sans-serif;margin-top:0;margin-bottom:0;height:42px;line-height:2.625rem"><a style="box-shadow:none;text-decoration:none;color:rgb(255, 167, 196)" href="/">Overreacted</a></h3><div style="height:24px"></div></header><main><article><header><h1 style="color:var(--textTitle)">useEffectå®Œå…¨ã‚¬ã‚¤ãƒ‰</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.4rem">2019 M03 9<!-- --> â€¢ ğŸ±ğŸ± 31 min read</p><div class="translations"><p style="font-size:0.9em;border:1px solid var(--hr);border-radius:0.75em;padding:0.75em;background:var(--inlineCode-bg);word-break:keep-all;font-family:system-ui, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;,
    &quot;Roboto&quot;, &quot;Oxygen&quot;, &quot;Ubuntu&quot;, &quot;Cantarell&quot;, &quot;Fira Sans&quot;,
    &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif"><span><span>Translated by readers into: </span><a href="/pt-br/a-complete-guide-to-useeffect/">PortuguÃªs do Brasil</a> â€¢ <b>æ—¥æœ¬èª</b> â€¢ <a href="/zh-hans/a-complete-guide-to-useeffect/">ç®€ä½“ä¸­æ–‡</a> â€¢ <a href="/zh-hant/a-complete-guide-to-useeffect/">ç¹é«”ä¸­æ–‡</a></span><br/><br/><a href="/a-complete-guide-to-useeffect/">Read the original</a> â€¢ <a href="https://github.com/gaearon/overreacted.io/edit/master/src/pages/a-complete-guide-to-useeffect/index.ja.md" target="_blank" rel="noopener noreferrer">Improve this translation</a> â€¢ <a href="/ja">View all translated posts</a> </p></div></header><div><p>ã‚ãªãŸã¯ Hooks ã‚’ä½¿ã£ã¦è¤‡æ•°ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ›¸ãã¾ã—ãŸã€‚ã¡ã‚‡ã£ã¨ã—ãŸã‚¢ãƒ—ãƒªã‚‚ä½œã£ãŸã“ã¨ãŒã‚ã‚‹ã§ã—ã‚‡ã†ã€‚æº€è¶³ã‚‚ã—ã¦ã„ã‚‹ã€‚API ã«ã‚‚æ…£ã‚Œã¦ã€ãã®éç¨‹ã§ã‚³ãƒ„ã‚‚æ´ã‚“ã§ãã¾ã—ãŸã€‚ã—ã‹ã‚‚é‡è¤‡ã—ãŸãƒ­ã‚¸ãƒƒã‚¯ã‚’è»¢ç”¨ã§ãã‚‹ã‚ˆã† Custom Hooks ã‚’ä½œã‚Šã€åŒåƒšã«è‡ªæ…¢ã—ã¦è¦‹ãŸã‚Šã€‚</p>
<p>ã§ã‚‚ useEffect ã‚’ä½¿ã†åº¦ã€ã„ã¾ã„ã¡ãƒ”ãƒ³ã¨ãã¾ã›ã‚“ã€‚class ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã¨ã¯ä¼¼ã¦ã„ã‚‹ã‘ã©ã€ä½•ã‹ãŒé•ã†ã€‚ãã—ã¦ã„ã‚ã‚“ãªç–‘å•ã‚’æŠ±ãå§‹ã‚ã¾ã™ã€‚</p>
<ul>
<li>ğŸ¤” <code class="language-text">componentDidMount</code> ã‚’ <code class="language-text">useEffect</code> ã§å†ç¾ã™ã‚‹æ–¹æ³•ã¯ï¼Ÿ</li>
<li>ğŸ¤” <code class="language-text">useEffect</code> å†…ã§æ­£ç¢ºã«éåŒæœŸå‡¦ç†ã‚’è¡Œã†æ–¹æ³•ã¨ã¯ï¼Ÿã€€<code class="language-text">[]</code>ã£ã¦ãªã«ï¼Ÿ</li>
<li>ğŸ¤” é–¢æ•°ã‚’ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®ä¾å­˜é–¢ä¿‚ã¨ã—ã¦è¨˜ã™ã¹ãï¼Ÿ</li>
<li>ğŸ¤” éåŒæœŸå‡¦ç†ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ãŒãŸã¾ã«èµ·ã“ã‚‹ã®ã¯ãªãœï¼Ÿ</li>
<li>ğŸ¤” å¤ã„ state ã‹ props ãŒã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã«ãŸã¾ã«å…¥ã‚‹ã®ã¯ãªãœï¼Ÿ</li>
</ul>
<p>ç§ã‚‚ Hooks ã‚’ä½¿ã„å§‹ã‚ãŸæ™‚ã€åŒã˜ã‚ˆã†ãªç–‘å•ã‚’æŠ±ã„ã¦ã¾ã—ãŸã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›¸ãå§‹ã‚ãŸæ™‚ã‚‚ã€ã¾ã å®Œç’§ã«ç†è§£ã—ã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚ä»Šå›ã¯ã€ç§ãŒãã®å¾ŒçµŒé¨“ã—ãŸ ã‚¢ãƒãƒ¢ãƒ¼ãƒ¡ãƒ³ãƒˆã‚’å…±æœ‰ã—ã¾ã™ã€‚<strong>ã“ã®è¨˜äº‹ã‚’èª­ã‚€ã“ã¨ã«ã‚ˆã£ã¦ã€ä¸Šè¨˜ã«æŒ™ã’ãŸè³ªå•ã‚’å½“ãŸã‚Šå‰ã«ã‚ã‹ã‚‹ã‚ˆã†ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚</strong></p>
<p>ç­”ãˆãŒè¦‹ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã«ã¯ã€ä¸€æ­©ä¸‹ãŒã£ã¦å…¨ä½“å›³ã‚’ä¿¯ç°ã—ã¦ç†è§£ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®è¨˜äº‹ã®ç›®çš„ã¯ç®‡æ¡æ›¸ãã§ç­”ãˆã‚’æ•™ãˆã‚‹ã“ã¨ã§ã¯ãªãã€ <code class="language-text">useEffect</code> ã‚’å®Œç’§ã«ç†è§£ã—ã¦ã„ãŸã ãã“ã¨ã§ã™ã€‚ç¿’ã†ã“ã¨ã¯ãã‚Œã»ã©å¤šãã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãã‚Œã©ã“ã‚ã‹ã€è¦šãˆã¦ã„ã‚‹ã“ã¨ã‚’æ„è­˜çš„ã«å¿˜ã‚Œã‚‹ã“ã¨ã«æ³¨åŠ›ã—ã¦ã„ãã¾ã™ã€‚</p>
<p><strong><code class="language-text">useEffect</code> Hook ã‚’æ…£ã‚Œã¦ã„ã‚‹ class ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ‘ãƒ©ãƒ€ã‚¤ãƒ ã¨åˆ†é›¢ã—ã¦åˆã‚ã¦ç†è§£ã§ãã¾ã—ãŸã€‚</strong></p>
<blockquote>
<p>â€œè¦šãˆãŸã“ã¨ã‚’å…¨ã¦å¿˜ã‚Œã‚‹ã®ã˜ã‚ƒ.â€ â€” Yoda</p>
</blockquote>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/6203a1f1f2c771816a5ba0969baccd12/5ed8a/yoda.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 497px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 64.38631790744466%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAwX/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAF5WKs71REF/8QAGxAAAQUBAQAAAAAAAAAAAAAAAgABAxESEyH/2gAIAQEAAQUCvzvk9Woz0njdBK5j/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Bh//EAB0QAAICAQUAAAAAAAAAAAAAAAABAhEhMTJBUZH/2gAIAQEABj8CK4Nno10Obm8FvU//xAAbEAEBAQEAAwEAAAAAAAAAAAABEQAhMVFxgf/aAAgBAQABPyH0Zd076TuCbR9Rz80qZiwUvg37TTf/2gAMAwEAAgADAAAAEEPf/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAERMUH/2gAIAQMBAT8QlaUf/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAx/9oACAECAQE/EFOQF//EABwQAQEAAgIDAAAAAAAAAAAAAAERACExQVFx0f/aAAgBAQABPxA0TUOLkyoSi0+4SldSl6yfaQttpzhvHAwULvWAwOi0F8zP/9k='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="ç©ºæ°—ã‚’å—…ããƒ¨ãƒ¼ãƒ€. ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³: â€œãƒ™ãƒ¼ã‚³ãƒ³ã®åŒ‚ã„ãŒã™ã‚‹.â€"
        title=""
        src="/static/6203a1f1f2c771816a5ba0969baccd12/5ed8a/yoda.jpg"
        srcset="/static/6203a1f1f2c771816a5ba0969baccd12/5645f/yoda.jpg 148w,
/static/6203a1f1f2c771816a5ba0969baccd12/3f2ca/yoda.jpg 295w,
/static/6203a1f1f2c771816a5ba0969baccd12/5ed8a/yoda.jpg 497w"
        sizes="(max-width: 497px) 100vw, 497px"
      />
    </span>
  </span>
  
  </a>
    </p>
<hr>
<p><strong>ã“ã®è¨˜äº‹ã¯ <a href="https://ja.reactjs.org/docs/hooks-effect.html" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">useEffect</code></a> API ã‚’ã‚ã‚‹ç¨‹åº¦ç†è§£ã—ã¦ã„ã‚‹ã“ã¨ãŒå‰æã§ã™</strong></p>
<p><strong>ã—ã‹ã‚‚<em>ã™ã”ã„</em>é•·æ–‡ã§ã™ã€‚å°ã•ãªæœ¬ä¸¦ã¿ã§ã™ã€‚ç§ãŒå€‹äººçš„ã«å¥½ã‚€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãªã®ã§ã€ã‚‚ã—æ€¥ãã‚‚ã—ãã¯ãã“ã¾ã§èˆˆå‘³ãªã„å ´åˆã¯ã€ä¸‹ã« TLDR ã‚’æ›¸ã„ãŸã®ã§ãã¡ã‚‰ã‚’èª­ã‚“ã§ãã ã•ã„</strong></p>
<p><strong>ã‚‚ã—ã“ã®ã‚ˆã†ãªãƒ‡ã‚£ãƒ¼ãƒ—ãƒ€ã‚¤ãƒ–ãŒã—ã£ãã‚Šã“ãªã„å ´åˆã¯ã€ä»–ã§èª¬æ˜ã•ã‚Œã‚‹ã®ã‚’å¾…ã£ãŸã»ã†ãŒã„ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚React ãŒ 2013 å¹´ã«å‡ºãŸæ™‚ã¨åŒã˜ã‚ˆã†ã«ã€äººã€…ãŒæ–°ãŸãªãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ã‚’ç†è§£ã—ã¦æ•™ãˆã‚‹ã®ã«ã¯æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚</strong></p>
<p>â€”</p>
<h2 id="tldrï¼ˆé•·ã™ãã€èª­ã‚“ã§ãªã„ï¼‰"><a href="#tldr%EF%BC%88%E9%95%B7%E3%81%99%E3%81%8E%E3%80%81%E8%AA%AD%E3%82%93%E3%81%A7%E3%81%AA%E3%81%84%EF%BC%89" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TLDRï¼ˆé•·ã™ãã€èª­ã‚“ã§ãªã„ï¼‰</h2>
<p>ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã¯å…¨ã¦ã‚’èª­ã¿ãŸããªã„äººå‘ã‘ã«ç°¡æ½”ã«è³ªå•ã«ç­”ãˆã¦ã„ã¾ã™ã€‚ç†è§£ã§ããªã„éƒ¨åˆ†ãŒã‚ã‚Œã°ã€ä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ãã®éƒ¨åˆ†ã«é–¢ä¿‚ã‚ã‚‹ã¨ã“ã‚ã‚’èª­ã‚“ã§ãã ã•ã„ã€‚</p>
<p>ã“ã®è¨˜äº‹ã‚’å…¨ã¦èª­ã‚€ã®ã§ã‚ã‚Œã°é æ…®ãªãã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯é£›ã°ã—ã¦ãã ã•ã„ã€‚æœ€å¾Œã«ãƒªãƒ³ã‚¯ã‚’è²¼ã‚Šã¾ã™ã€‚</p>
<p><strong>ğŸ¤” <code class="language-text">componentDidMount</code>ã‚’<code class="language-text">useEffect</code>ã§å†ç¾ã™ã‚‹æ–¹æ³•ã¯ï¼Ÿ</strong></p>
<p><code class="language-text">useEffect(fn, [])</code> ã§ã‚‚å†ç¾ã§ãã¾ã™ãŒã€å…¨ãåŒã˜ã¨ã„ã†è¨³ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ <code class="language-text">componentDidMount</code> ã¨ã¯é•ã„ã€props ã¨ state ã‚’<em>ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ¼</em>ã—ã¾ã™ã€‚ãªã®ã§ã€callback ã®ä¸­ã§ã‚‚åˆæœŸ props ã¨ state ã‚’å‚ç…§ã§ãã¾ã™ã€‚ä¸€ç•ªæœ€æ–°ã®ãªã«ã‹ã‚’å‚ç…§ã—ãŸã„å ´åˆã¯ã€ref ã¨ã—ã¦æ›¸ã‘ã¾ã™ã€‚ã§ã™ãŒå¤§æ¦‚ã¯ ref ã¨ã—ã¦æ›¸ã‹ãªãã¦ã‚‚ã„ã„ã‚ˆã†ã‚³ãƒ¼ãƒ‰ã‚’æ§‹æˆã™ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚è¦šãˆã¦æ¬²ã—ã„ã“ã¨ã¯ã€effects ã¨ <code class="language-text">componentDidMount</code> ã‚„ä»–ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ã¯åˆ¥ã§ã‚ã‚‹ã“ã¨ã§ã™ã€‚ãªã®ã§ã€ãã‚Œãã‚Œã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ¡ã‚½ãƒƒãƒ‰ã®ä»£ç”¨ã‚’æ¢ãã†ã¨ã™ã‚‹ã¨ä½™è¨ˆã«æ··ä¹±ã—ã¦ã—ã¾ã„ã¾ã™ã€‚åŠ¹ç‡çš„ã«ãªã‚‹ãŸã‚ã«ã¯ã€Œã‚¨ãƒ•ã‚§ã‚¯ãƒˆã§è€ƒãˆã‚‹ã€å¿…è¦ãŒã‚ã‚Šã€ãã®ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ã¯ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã«åå¿œã™ã‚‹ã“ã¨ã§ã¯ãªã props ã‚„ state ã®å¤‰åŒ–ã‚’ DOM ã«ã‚·ãƒ³ã‚¯ãƒ­ã•ã›ã‚‹ã€ã¨ã„ã†æ–¹ã«è¿‘ã„ã§ã™ã€‚</p>
<p><strong>ğŸ¤” <code class="language-text">useEffect</code> å†…ã§æ­£ç¢ºã«éåŒæœŸå‡¦ç†ã‚’è¡Œã†æ–¹æ³•ã¨ã¯ï¼Ÿ <code class="language-text">[]</code> ã£ã¦ãªã«ï¼Ÿ</strong></p>
<p>ã“ã®<a href="https://www.robinwieruch.de/react-hooks-fetch-data/" target="_blank" rel="nofollow noopener noreferrer">è¨˜äº‹</a>ã‚’å‚è€ƒã«ã—ã¦ã¿ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚æœ€å¾Œã¾ã§èª­ã‚€ã‚ˆã†ã«ï¼ã“ã®è¨˜äº‹ã»ã©é•·ãã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<code class="language-text">[]</code>ã¯ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ React ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã«æºã‚ã‚‹å€¤ã‚’ãªã«ä¸€ã¤ä½¿ç”¨ã—ã¦ã„ãªã„ã®ã§ã€ä¸€åº¦ã ã‘å®Ÿè¡Œã—ã¦ã‚‚è‰¯ã„ã¨ã„ã†ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¦ã¾ã™ã€‚ã§ã™ãŒå€¤ãŒå®Ÿéš›ã«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã§<em>ä½¿ç”¨</em>ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ãƒã‚°ã®æ ¹æºã¨ã‚‚ãªã‚Šã¾ã™ã€‚ä¾å­˜é–¢ä¿‚ã‚’è§£æ¶ˆã—ã¦æ­£ã—ãå€¤ã‚’çœãã«ã¯è¤‡æ•°ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ï¼ˆä¸»ã« <code class="language-text">useReducer</code> ã¨ <code class="language-text">useCallback</code> ï¼‰ã‚’ç”¨ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
<p><strong>ğŸ¤” é–¢æ•°ã‚’ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®ä¾å­˜é–¢ä¿‚ã¨ã—ã¦è¨˜ã™ã¹ãï¼Ÿ</strong></p>
<p>æ¨è–¦ã•ã‚Œã‚‹æ–¹æ³•ã¨ã—ã¦ã¯ props ã‚„ state ã‚’å¿…è¦ã¨ã—ãªã„é–¢æ•°ã¯<em>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå¤–</em>ã«ãƒ›ã‚¤ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã—ã¦ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã§ã—ã‹ä½¿ã‚ã‚Œãªã„é–¢æ•°ã¯<em>ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…</em>ã«å…¥ã‚Œã‚‹æ–¹æ³•ã§ã™ã€‚ã—ã‹ã—ãã®ã‚ã¨ã«ã‚‚ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãŒãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ—å†…ã®é–¢æ•°ã‚’ä½¿ã†ã“ã¨ãŒã‚ã‚‹ã®ã§ã‚ã‚Œã°ï¼ˆprops ã‹ã‚‰ã®é–¢æ•°ã‚‚å«ã‚€ï¼‰ã€ <code class="language-text">useCallback</code> ã§é–¢æ•°ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹å ´æ‰€ã‚’ãƒ©ãƒƒãƒ—ã—ã¦ãã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ãƒªãƒ”ãƒ¼ãƒˆã—ã¾ã™ã€‚ãªãœãã‚ŒãŒå¤§äº‹ã‹ã¨ã„ã†ã¨ã€é–¢æ•°ã¯ props ã‚„ state ã‚’<em>è¦‹ã‚‹</em>ã“ã¨ãŒã§ãã‚‹ã®ã§ã€React ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã«æºã‚ã‚‹ã‹ã‚‰ã§ã™ã€‚è©³ã—ãã¯<a href="https://reactjs.org/docs/hooks-faq.html#is-it-safe-to-omit-functions-from-the-list-of-dependencies" target="_blank" rel="nofollow noopener noreferrer">FAQ</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
<p><strong>ğŸ¤” éåŒæœŸå‡¦ç†ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ãŒãŸã¾ã«èµ·ã“ã‚‹ã®ã¯ãªãœï¼Ÿ</strong></p>
<p>ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã§éåŒæœŸå‡¦ç†ã‚’ä¾å­˜é–¢ä¿‚ã‚’è¡¨ã™ç¬¬äºŒå¼•æ•°ã‚’ä¸ãˆãªã„ã§å®Ÿè¡Œã™ã‚‹ã¨èµ·ã“ã‚Šã¾ã™ã€‚ç¬¬äºŒå¼•æ•°ãŒãªã„å ´åˆã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯æ¯ render æ™‚ã«èµ°ã‚Šã€å†…éƒ¨ã§ state ã‚’ã‚»ãƒƒãƒˆã—ã¦ã‚‹ã¨å†åº¦ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ãƒˆãƒªã‚¬ãƒ¼ã™ã‚‹ã‹ã‚‰ã§ã™ã€‚ä¾å­˜é–¢ä¿‚ã‚’è¡¨ã™ç¬¬äºŒå¼•æ•°ã«<em>å¸¸ã«</em>å¤‰ã‚ã‚‹å€¤ãŒå…¥ã£ã¦ã‚‹å ´åˆã§ã‚‚ç„¡é™ãƒ«ãƒ¼ãƒ—ã¯èµ·ãã¾ã™ã€‚ã©ã‚ŒãŒå•é¡Œã®åŸå› ã‹ã¯ä¾å­˜é…åˆ—ã®ä¸­ã‹ã‚‰å€¤ã‚’ä¸€ã¤ä¸€ã¤å‰Šé™¤ã—ã¦ã„ãã“ã¨ã«ã‚ˆã£ã¦åˆ†ã‹ã‚Šã¾ã™ã€‚ã§ã™ãŒã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã§ä½¿ç”¨ã—ã¦ã‚‹å€¤ã‚’ä¾å­˜é…åˆ—ã‹ã‚‰å–ã‚Šå‡ºã—ãŸã‚Šï¼ˆã‚‚ã—ãã¯é—‡é›²ã« <code class="language-text">[]</code> ã‚’æŒ‡å®šã—ãŸã‚Šï¼‰ã™ã‚‹ã®ã¯å¤§æ¦‚ã«å ´åˆã€æ­£ã—ããªã„ç›´ã—æ–¹ã§ã™ã€‚ãã®ä»£ã‚ã‚Šã€å•é¡Œã®æ ¹æºã‹ã‚‰ç›´ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚ä¾‹ãˆã°ã€é–¢æ•°ãªã©ãŒã“ã®å•é¡Œã‚’èµ·ã“ã—ãŒã¡ã§ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã«å®šç¾©ã™ã‚‹ã‹ã€ãƒ›ã‚¤ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã‹ <code class="language-text">useCallback</code> ã§ãƒ©ãƒƒãƒ—ã™ã‚‹ã¨è‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å†ç”Ÿæˆã‚’é˜»æ­¢ã™ã‚‹ãŸã‚ã«ä½¿ã‚ã‚Œã‚‹ <code class="language-text">useMemo</code> ã‚‚åŒã˜ã‚ˆã†ãªç”¨é€”ã§ä½¿ãˆã¾ã™ã€‚</p>
<p><strong>ğŸ¤” å¤ã„ state ã‹ props ãŒã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã«ãŸã¾ã«å…¥ã‚‹ã®ã¯ãªãœï¼Ÿ</strong></p>
<p>ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯å¿…ãšå®šç¾©ã•ã‚ŒãŸ render ã® props ã¨ state ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã®æ–¹æ³•ã¯<a href="/ja/how-are-function-components-different-from-classes/">ãƒã‚°ã‚’é˜»æ­¢ã™ã‚‹ã®ã«æœ‰åŠ¹</a>ã§ã™ãŒã€å„ä»‹ã¨æ„Ÿã˜ã‚‹ã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚Šã¾ã™ã€‚ãã®å ´åˆã¯ã€æ˜ç¢ºã«å€¤ã‚’ mutable ref ã«ä¿å­˜ã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ï¼ˆãƒªãƒ³ã‚¯ã•ã‚Œã¦ã„ã‚‹è¨˜äº‹ã®æœ€å¾Œã®æ–¹ã§èª¬æ˜ã—ã¦ã¾ã™ï¼‰ã€‚ã‚‚ã—å¤ã„ render ã‹ã‚‰ã® props ã‚„ state ã‚’å‚ç…§ã—ã¦ã„ã¦æœŸå¾…ã—ã¦ã„ãªã„å ´åˆã¯ã€ä¾å­˜é…åˆ—ã«ä½•ã‹å…¥ã‚Œå¿˜ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®<a href="https://github.com/facebook/react/issues/14920" target="_blank" rel="nofollow noopener noreferrer">lint ãƒ«ãƒ¼ãƒ«</a>ã‚’ä½¿ã£ã¦ã€å…¥ã‚Œå¿˜ã‚Œãªã„ã‚ˆã†ã«æ…£ã‚Œã¾ã—ã‚‡ã†ã€‚ä½¿ã„å§‹ã‚ã¦æ•°æ—¥çµŒã¦ã°ã€ç¿’æ…£ã«ãªã‚‹ã¯ãšã§ã™ã€‚ã“ã¡ã‚‰ã®<a href="https://reactjs.org/docs/hooks-faq.html#why-am-i-seeing-stale-props-or-state-inside-my-function" target="_blank" rel="nofollow noopener noreferrer">FAQ</a>ã«ã‚‚ç­”ãˆã¦ã‚‹ã®ã§å‚ç…§ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p>
<hr>
<p>ã“ã® TLDR ãŒå½¹ã«ç«‹ã£ãŸãªã‚‰å¬‰ã—ã„ã§ã™ã€‚ãã†ã§ãªã‘ã‚Œã°ã€æ·±å…¥ã‚Šã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p>
<hr>
<h2 id="ãã‚Œãã‚Œã®-render-ã¯ç‹¬è‡ªã®-props-ã¨-state-ã‚’ä¿æŒã—ã¦ã„ã‚‹"><a href="#%E3%81%9D%E3%82%8C%E3%81%9E%E3%82%8C%E3%81%AE-render-%E3%81%AF%E7%8B%AC%E8%87%AA%E3%81%AE-props-%E3%81%A8-state-%E3%82%92%E4%BF%9D%E6%8C%81%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ãã‚Œãã‚Œã® render ã¯ç‹¬è‡ªã® props ã¨ state ã‚’ä¿æŒã—ã¦ã„ã‚‹</h2>
<p>ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã«é–¢ã—ã¦è©±ã™å‰ã«ã€ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒªãƒ³ã‚°ã«ã¤ã„ã¦è©±ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
<p>ã¾ãšã€ã“ã“ã«ã¯ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ãŒã‚ã‚Šã¾ã™ã€‚ãƒã‚¤ãƒ©ã‚¤ãƒˆã•ã‚ŒãŸè¡Œã‚’è¦‹ã¦ãã ã•ã„ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="gatsby-highlight-code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">You clicked </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text"> times</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"></span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">Click me</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ã©ã†ã„ã†ã“ã¨ã§ã—ã‚‡ã†ï¼Ÿ <code class="language-text">count</code> ã¯ä½•ã¨ã‹ props ã¨ state ã®å¤‰æ›´ã‚’æ¤œçŸ¥ã—ã¦è‡ªå‹•çš„ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿã“ã®ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ã¯ React ã‚’å­¦ã¶æ™‚ã®æœ€åˆã®ç›´æ„Ÿã¨ã—ã¦ã¯å½¹ã«ç«‹ã¡ã¾ã™ãŒã€å®Ÿã¯<a href="https://overreacted.io/react-as-a-ui-runtime/" target="_blank" rel="nofollow noopener noreferrer">æ­£ã—ãã‚ã‚Šã¾ã›ã‚“</a>.</p>
<p><strong>ã“ã®ã‚µãƒ³ãƒ—ãƒ«ã§ã¯ã€ <code class="language-text">count</code> ã¯ãŸã ã®æ•°å­—ã§ã™ã€‚</strong> ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚„ã‚¦ã‚©ãƒƒãƒãƒ£ãƒ¼ã‚„ãƒ—ãƒ­ã‚­ã‚·ãªã©æ‰‹ã®è¾¼ã‚“ã ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å¤ãè‰¯ããŸã ã®æ•°å­—ã§ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">You clicked </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text"> times</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token comment">// ...</span></code></pre></div>
<p>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒä¸€ç•ªåˆã‚ã« render ã™ã‚‹éš›ã€<code class="language-text">useState()</code> ã‹ã‚‰å‡ºåŠ›ã•ã‚Œã‚‹ <code class="language-text">count</code> å¤‰æ•°ã¯ <code class="language-text">0</code> ã§ã™ã€‚<code class="language-text">setCount(1)</code>ã‚’å‘¼ã¶ã¨ã€React ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯å†åº¦å‘¼ã³å‡ºã—ã¾ã™ã€‚ãã®éš›ã€ <code class="language-text">count</code> ã¯ <code class="language-text">1</code> ã¨ãªã‚Šã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// åˆæœŸ render æ™‚</span>
<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// useState()ã®æˆ»ã‚Šå€¤</span></span>  <span class="token comment">// ...</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">You clicked </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text"> times</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// ã‚¯ãƒªãƒƒã‚¯å¾Œã€é–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹</span>
<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// useState()ã®æˆ»ã‚Šå€¤</span></span>  <span class="token comment">// ...</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">You clicked </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text"> times</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// ã‚‚ã†ä¸€åº¦ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€å†åº¦å‘¼ã°ã‚Œã‚‹</span>
<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// useState()ã®æˆ»ã‚Šå€¤</span></span>  <span class="token comment">// ...</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">You clicked </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text"> times</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p><strong>state ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹åº¦ã€React ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–¢æ•°ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚ãã‚Œãã‚Œã® render çµæœã¯<em>å®šæ•°ã¨ã—ã¦å®šç¾©</em>ã•ã‚ŒãŸ <code class="language-text">counter</code> state ã‚’<em>è¦‹ã‚‹</em>ã“ã¨ãŒã§ãã¾ã™</strong></p>
<p>ã—ãŸãŒã£ã¦ã€ã“ã®è¡Œã¯ä½•ã‚‚ç‰¹åˆ¥ãªãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’ã—ã¦ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">You clicked </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text"> times</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre></div>
<p><strong>ä½•ã‚’ã—ã¦ã‚‹ã‹ã¨ã„ã†ã¨ã€render çµæœã«æ•°å­—ã‚’çµ„ã¿è¾¼ã‚“ã§ã„ã‚‹ã ã‘ã§ã™ã€‚</strong> ã“ã®æ•°å­—ã¯ React ãŒæä¾›ã—ã¦ã„ã¾ã™ã€‚ <code class="language-text">setCount</code> ã™ã‚‹ã¨ã€React ã¯é•ã£ãŸ <code class="language-text">count</code> ã®å€¤ã‚’ä½¿ã£ã¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‘¼ã³å‡ºã—ã¦ã„ã¾ã™ã€‚ãã—ã¦ã€render çµæœã«ãƒãƒƒãƒã™ã‚‹ã‚ˆã† DOM ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦ã‚‹ã®ã§ã™ã€‚</p>
<p>ã“ã“ã§è¦šãˆã¦ã„ã¦æ¬²ã—ã„ã®ã¯ <code class="language-text">count</code> å®šæ•°ã¯ç‰¹å®šã® render ã§æ™‚é–“ã®çµŒéã¨å…±ã«å¤‰åŒ–ã™ã‚‹ã®ã§ã¯ãªã„ã¨ã„ã†ã“ã¨ã§ã™ã€‚ä½•ãŒèµ·ã“ã£ã¦ã‚‹ã‹ã¨ã„ã†ã¨ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã¦ã„ã‚‹ã®ã§ã™ - ãã—ã¦å„ render ã¯ãã‚Œãã‚Œãã® render ã«éš”é›¢ã•ã‚ŒãŸ <code class="language-text">count</code>å€¤ã‚’ <code class="language-text">è¦‹ã‚‹</code> ã“ã¨ãŒã§ãã‚‹ã®ã§ã™ã€‚</p>
<p><em>ï¼ˆã“ã®ãƒ—ãƒ­ã‚»ã‚¹ã«ã¤ã„ã¦ã‚‚ã£ã¨æ·±æ˜ã‚Šã—ãŸã„å ´åˆã¯<a href="https://overreacted.io/react-as-a-ui-runtime/" target="_blank" rel="nofollow noopener noreferrer">React as a UI Runtime</a>ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚ï¼‰</em></p>
<h2 id="ãã‚Œãã‚Œã®-render-ã¯ç‹¬è‡ªã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã‚’ä¿æŒã—ã¦ã„ã‚‹"><a href="#%E3%81%9D%E3%82%8C%E3%81%9E%E3%82%8C%E3%81%AE-render-%E3%81%AF%E7%8B%AC%E8%87%AA%E3%81%AE%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E3%83%8F%E3%83%B3%E3%83%89%E3%83%A9%E3%82%92%E4%BF%9D%E6%8C%81%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ãã‚Œãã‚Œã® render ã¯ç‹¬è‡ªã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã‚’ä¿æŒã—ã¦ã„ã‚‹</h2>
<p>ã“ã“ã¾ã§ã¯é †èª¿ã§ã™ã­ã€‚ã§ã¯ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã¯ã©ã†ã§ã—ã‚‡ã†ï¼Ÿ</p>
<p>ã“ã®ä¾‹ã‚’è¦‹ã¦ã¿ã¦ãã ã•ã„ã€‚3 ç§’å¾Œã« <code class="language-text">count</code> ã®å€¤ã‚’ alert ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã§ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="gatsby-highlight-code-line">  <span class="token keyword">function</span> <span class="token function">handleAlertClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"You clicked on: "</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span></span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">You clicked </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text"> times</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">Click me</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleAlertClick<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">ã‚¢ãƒ©ãƒ¼ãƒˆã‚’è¡¨ç¤º</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="gatsby-highlight-code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"><span class="token punctuation">}</span></span></code></pre></div>
<p>ã“ã®ã‚ˆã†ãªæ‰‹é †ã‚’è¸ã‚“ã ã¨ã—ã¾ã—ã‚‡ã†ï¼š</p>
<ul>
<li>count ã‚’ 3 ã¾ã§<strong>å¢—ã‚„ã™</strong></li>
<li>â€œã‚¢ãƒ©ãƒ¼ãƒˆã‚’è¡¨ç¤ºâ€ã‚’<strong>æŠ¼ä¸‹</strong></li>
<li>ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãŒç™ºç«ã™ã‚‹å‰ã« count ã‚’ 5 ã¾ã§<strong>å¢—ã‚„ã™</strong></li>
</ul>
<p><img src="/counter-46c55d5f1f749462b7a173f1e748e41e.gif" alt="ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ãƒ‡ãƒ¢"></p>
<p>ã‚¢ãƒ©ãƒ¼ãƒˆã¯ä½•ã‚’è¡¨ç¤ºã™ã‚‹ã§ã—ã‚‡ã†ï¼Ÿã‚¢ãƒ©ãƒ¼ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹æ™‚ã® count state ã® 5 ã‚’è¡¨ç¤ºã™ã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿãã‚Œã¨ã‚‚æŠ¼ä¸‹ã—ãŸæ™‚ã® count state ã® 3 ã‚’è¡¨ç¤ºã™ã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p>
<hr>
<p><em>ã“ã®å…ˆãƒã‚¿ãƒãƒ¬</em></p>
<hr>
<p>è‡ªåˆ†ã§ä¸€åº¦<a href="https://codesandbox.io/s/w2wxl3yo0l" target="_blank" rel="nofollow noopener noreferrer">å†ç¾ã—ã¦ã¿ã¦ãã ã•ã„ï¼</a></p>
<p>ã‚‚ã—ã“ã®æŒ™å‹•ãŒæ„å‘³ã‚’ãªã•ãªã„å ´åˆã¯ã€ã‚‚ã£ã¨ç¾å®Ÿçš„ãªä¾‹ã‚’æƒ³åƒã—ã¦ã¿ã¦ãã ã•ã„ï¼šå—å–äºº ID ã‚’ state ã«ä¿æŒã™ã‚‹ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã¨ã€é€ã‚‹ãƒœã‚¿ãƒ³ãªã©ã€‚<a href="https://overreacted.io/how-are-function-components-different-from-classes/" target="_blank" rel="nofollow noopener noreferrer">ã“ã®è¨˜äº‹</a>ãŒç†ç”±ã‚’æ·±æ˜ã‚Šã—ã¦ã„ã¾ã™ãŒæ­£è§£ã¯ 3 ã§ã™ã€‚</p>
<p>ã‚¢ãƒ©ãƒ¼ãƒˆã¯æŠ¼ä¸‹æ™‚ã® state ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ¼ã—ã¾ã™ã€‚</p>
<p><em>ï¼ˆ5 ã‚’è¡¨ç¤ºã•ã›ã‚‹ã‚ˆã†ãªå®Ÿè£…ã‚’ã™ã‚‹æ–¹æ³•ã¯ã‚ã‚Šã¾ã™ãŒã€ä»Šå›ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚±ãƒ¼ã‚¹ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ã¾ã™ã€‚ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã™ã‚‹éš›ã¯æœ€ã‚‚å®¹æ˜“ãªæ–¹æ³•ã¨é¿é›£ãƒãƒƒãƒã‚’æ˜ç¢ºã«åŒºåˆ¥ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼‰</em></p>
<hr>
<p>ãªãœã“ã®ã‚ˆã†ãªæŒ™å‹•ã‚’ã™ã‚‹ã®ã§ã—ã‚‡ã†ï¼Ÿ</p>
<p>å…ˆã»ã©ã€ <code class="language-text">count</code> ã¯å®šæ•°ã§ã‚ã‚Šå‘¼ã³å‡ºã•ã‚Œã‚‹é–¢æ•°ã”ã¨ã«ä¿æŒã—ã¦ã„ã‚‹ã¨è­°è«–ã—ã¾ã—ãŸã€‚<strong>é–¢æ•°ã¯ä½•åº¦ã‚‚å‘¼ã°ã‚Œã‚‹ï¼ˆrender æ¯ã«ä¸€åº¦ï¼‰ãŒã€ãã®éƒ½åº¦ <code class="language-text">count</code>å€¤ã¯å®šæ•°ã§ã‚ã‚Šä½•ã‹ã®å€¤ã§ã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ã‚‹ï¼ˆãã® render ã® stateï¼‰</strong> ã¨ã„ã†ã®ã¯å¼·èª¿ã™ã‚‹ä¾¡å€¤ãŒã‚ã‚Šã¾ã™ã€‚</p>
<p>ã“ã‚Œã¯ React ç‰¹æœ‰ã®æŒ™å‹•ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚é€šå¸¸ã®é–¢æ•°ã‚‚åŒã˜ã‚ˆã†ãªæŒ™å‹•ã‚’ã—ã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> name <span class="token operator">=</span> person<span class="token punctuation">.</span>name<span class="token punctuation">;</span></span>  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"ã“ã‚“ã«ã¡ã¯, "</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> someone <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"Dan"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">sayHi</span><span class="token punctuation">(</span>someone<span class="token punctuation">)</span><span class="token punctuation">;</span>

someone <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"Yuzhi"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">sayHi</span><span class="token punctuation">(</span>someone<span class="token punctuation">)</span><span class="token punctuation">;</span>

someone <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"Dominic"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">sayHi</span><span class="token punctuation">(</span>someone<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ã“ã®<a href="https://codesandbox.io/s/mm6ww11lk8" target="_blank" rel="nofollow noopener noreferrer">ä¾‹</a>ã§ã¯ã€someone ã¨ã„ã†å¤‰æ•°ãŒä½•åº¦ã‚‚å†ä»£å…¥ã•ã‚Œã¦ã¾ã™ï¼ˆReact ä¸Šã®ã©ã“ã‹ã¨åŒã˜ã‚ˆã†ã«ã€<em>ç¾åœ¨</em>ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ state ã‚‚ä»£ã‚ã‚Šå¾—ã¾ã™ã€‚ï¼‰<strong>ã§ã™ãŒã€sayHi é–¢æ•°ã®ä¸­ã«ã¯ãƒ­ãƒ¼ã‚«ãƒ« name å®šæ•°ãŒå­˜åœ¨ã—ã¦ãŠã‚Šã€ãã®å®šæ•°ã¯ç‰¹å®šã®å‘¼ã³å‡ºã—ã¨ãã®å¼•æ•°ã§ä¸ãˆã‚‰ã‚ŒãŸ <code class="language-text">person</code> ã«ç´ã¥ã„ã¦ã„ã¾ã™</strong> name å®šæ•°ã¯ãƒ­ãƒ¼ã‚«ãƒ«ãªã®ã§ã€å‘¼ã³å‡ºã—ã”ã¨ã«éš”é›¢ã•ã‚Œã¦ã„ã¾ã™ï¼çµæœã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãŒç™ºç«ã•ã‚Œã‚‹æ™‚ã€ãã‚Œãã‚Œã® alert ã¯ å¼•æ•°ã§ä¸ãˆã‚‰ã‚ŒãŸ <code class="language-text">name</code> ã‚’<em>è¦šãˆã¦</em>ã„ã¾ã™ã€‚</p>
<p>ä¸Šã®ä¾‹ãŒãªãœã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãŒæŠ¼ä¸‹æ™‚ã® <code class="language-text">count</code> ã‚’ä¿æŒã—ã¦ã‚‹ã‹èª¬æ˜ã—ã¦ãã‚Œã¦ã¾ã™ã€‚åŒã˜ã‚ˆã†ãªå†ä»£å…¥ã®æ–¹é‡ã‚’æ¡ç”¨ã—ãŸå ´åˆã€ãã‚Œãã‚Œã® render ã¯ç‰¹å®šã® <code class="language-text">count</code> ãŒ<em>è¦‹ãˆã¦</em>ã„ã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// åˆæœŸ render</span>
<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// Returned by useState()</span></span>  <span class="token comment">// ...</span>
  <span class="token keyword">function</span> <span class="token function">handleAlertClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"You clicked on: "</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// æŠ¼ä¸‹ã•ã‚Œã‚‹ã¨ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹</span>
<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// Returned by useState()</span></span>  <span class="token comment">// ...</span>
  <span class="token keyword">function</span> <span class="token function">handleAlertClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"You clicked on: "</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// å†æŠ¼ä¸‹å¾Œã€ã¾ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹</span>
<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// Returned by useState()</span></span>  <span class="token comment">// ...</span>
  <span class="token keyword">function</span> <span class="token function">handleAlertClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"You clicked on: "</span> <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ãªã®ã§ã€å®Ÿè³ªçš„ã«ã¯ãã‚Œãã‚Œã® render ã¯ç‹¬è‡ªã® <code class="language-text">handleAlertClick</code> ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¿”ã—ã¦ã„ã¾ã™ã€‚ãã—ã¦ãã‚Œãã‚Œã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ ç‹¬è‡ªã® <code class="language-text">count</code> ã‚’<em>è¦šãˆã¦</em>ã„ã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// åˆæœŸ render</span>
<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">function</span> <span class="token function">handleAlertClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"You clicked on: "</span> <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="gatsby-highlight-code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleAlertClick<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span> <span class="token comment">// 0 ãŒå…¥ã£ã¦ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³</span></span>  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// æŠ¼ä¸‹ã•ã‚Œã‚‹ã¨ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹</span>
<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">function</span> <span class="token function">handleAlertClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"You clicked on: "</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="gatsby-highlight-code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleAlertClick<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span> <span class="token comment">// 1 ãŒå…¥ã£ã¦ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³</span></span>  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// å†æŠ¼ä¸‹å¾Œã€ã¾ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹</span>
<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">function</span> <span class="token function">handleAlertClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"You clicked on: "</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="gatsby-highlight-code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleAlertClick<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span> <span class="token comment">// 2 ãŒå…¥ã£ã¦ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³</span></span>  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ã“ã®ç†ç”±ã‹ã‚‰ã€ã“ã®<a href="https://codesandbox.io/s/w2wxl3yo0l" target="_blank" rel="nofollow noopener noreferrer">ãƒ‡ãƒ¢</a>ã®ä¸­ã§ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã¯ç‰¹å®šã® render ã«å±ã—ã¦ãŠã‚Šã€æŠ¼ä¸‹ã™ã‚‹ã¨ãã®ç‰¹å®š render ã®ä¸­ã® <code class="language-text">counter</code> state ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚</p>
<p><strong>ç‰¹å®šã® render ã®ä¸­ã§ã¯ props ã¨ state ã¯ä¸€ç”Ÿå¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚</strong> props ã¨ state ãŒç‰¹å®šã® render ã«éš”é›¢ã•ã‚Œã¦ã„ã¦åŒã˜ã¨ã„ã†ã“ã¨ã¯ã€ãã‚Œã‚’ä½¿ç”¨ã—ã¦ã‚‹å€¤ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã‚‚å«ã‚€ï¼‰ã‚‚ãã†ã§ã™ã€‚ãã®å€¤ã‚‚ç‰¹å®šã® render ã«å±ã—ã¦ã„ã‚‹ã®ã§ã™ã€‚ãªã®ã§ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©å†…ã®éåŒæœŸé–¢æ•°ã•ãˆã‚‚åŒã˜ <code class="language-text">count</code> ã®å€¤ã‚’å‚ç…§ã§ãã¾ã™ã€‚</p>
<p><em>æ³¨è¨˜ï¼šä¸Šè¨˜ã®ä¾‹ã§ç§ã¯ <code class="language-text">count</code> ã®å€¤ã‚’ç›´æŒ‡å®šã—ã¾ã—ãŸã€‚<code class="language-text">count</code> ã®å€¤ã¯ç‰¹å®šã® render å†…ã§ã¯å¤‰ã‚ã‚Šå¾—ãªã„ã®ã§ã€ã“ã®ä»£å…¥æ–¹æ³•ã¯å®‰å…¨ã§ã™ã€‚å®šæ•°ã§å®šç¾©ã•ã‚Œã¦ã„ã¦æ•°å­—ã§ã™ã€‚ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãªã©ã‚‚åŒã˜ã‚ˆã†ã«è€ƒãˆã¦å•é¡Œãªã„ã¨æ€ã„ã¾ã™ãŒã€ãã‚Œã¯ mutate ã—ãªã„ã“ã¨ãŒå‰æãªã‚‰ã°ã€ã§ã™ã€‚mutate ã™ã‚‹ä»£ã‚ã‚Šã«æ–°ã—ãä½œæˆã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§<code class="language-text">setSomething(newObj)</code>ã¨å‘¼ã³å‡ºã™ã®ã¯å®‰å…¨ã§ã€ãªãœã‹ã¨ã„ã†ã¨éå»ã® render ã«å±ã—ã¦ã„ã‚‹ state ã¯æãªã‚ã‚Œã¦ã„ãªã„ã‹ã‚‰ã§ã™ã€‚</em></p>
<h2 id="ãã‚Œãã‚Œã®-render-ã¯ç‹¬è‡ªã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ä¿æŒã—ã¦ã„ã‚‹"><a href="#%E3%81%9D%E3%82%8C%E3%81%9E%E3%82%8C%E3%81%AE-render-%E3%81%AF%E7%8B%AC%E8%87%AA%E3%81%AE%E3%82%A8%E3%83%95%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E4%BF%9D%E6%8C%81%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ãã‚Œãã‚Œã® render ã¯ç‹¬è‡ªã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ä¿æŒã—ã¦ã„ã‚‹</h2>
<p>ã“ã®è¨˜äº‹ã¯ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã«é–¢ã™ã‚‹è¨˜äº‹ã®ã¯ãšã ã£ãŸã‚“ã§ã™ãŒã€ã¾ã ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®ã“ã¨ã«ã¤ã„ã¦è©±ã—ã¦ã¾ã›ã‚“ã§ã—ãŸã­ï¼ãã‚Œã§ã¯ä»Šã‹ã‚‰ãã‚Œã‚’æ­£ã—ã¾ã—ã‚‡ã†ã€‚ã©ã†ã‚„ã‚‰ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚‚ä»–ã¨ä½•ã‚‚å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
<p>ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚ã‚‹<a href="https://ja.reactjs.org/docs/hooks-effect.html" target="_blank" rel="nofollow noopener noreferrer">ä¾‹</a>ã«æˆ»ã£ã¦ã¿ã¾ã—ã‚‡ã†ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="gatsby-highlight-code-line">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token string">`You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times`</span></span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">You clicked </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text"> times</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">Click me</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><strong>ã“ã“ã§ã‚ãªãŸã«è³ªå•ã§ã™ã€‚ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ã©ã®ã‚ˆã†ã«ã—ã¦æœ€æ–°ã® <code class="language-text">count</code> state ã‚’èª­ã‚€ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ</strong></p>
<p>ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚„ã‚¦ã‚©ãƒƒãƒãƒ£ãƒ¼ãŒã‚¨ãƒ•ã‚§ã‚¯ãƒˆé–¢æ•°å†…ã§ <code class="language-text">count</code> ã®å€¤ã‚’ãƒ©ã‚¤ãƒ–ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦ãŸã‚Šã€ã‚‚ã—ãã¯ <code class="language-text">count</code> ã¯ mutable ãªå¤‰æ•°ã§ã‚ã‚Š React ãŒã†ã¾ã„å…·åˆã«æœ€æ–°ã®å€¤ã‚’ã‚»ãƒƒãƒˆã—ã¦ã‚‹ã‹ã‚‰ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã§ã‚‚æœ€æ–°ã®å€¤ã‚’å‚ç…§ã§ãã¦ã‚‹ã®ã ã¨æ€ã†ã‹ã‚‚ã—ã‚Œãªã„ã€‚</p>
<p>ã§ã‚‚ãã‚Œã¯é•ã†ã€‚</p>
<p><code class="language-text">count</code> ã¯å®šæ•°ã§ã‚ã‚Šã€ç‰¹å®šã® render ã«å±ã—ã¦ã„ã‚‹ã¨ã„ã†ã®ã¯å…ˆã»ã©èª¬æ˜ã—ãŸã€‚ã‚ã‚‹ render ã«ç´ã¥ã„ã¦ã„ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã¯åŒã˜ã‚¹ã‚³ãƒ¼ãƒ—å†…ã«å±ã—ã¦ã„ã‚‹ <code class="language-text">count</code> ã®å€¤ã‚’å‚ç…§ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚‚åŒã˜ã§ã‚ã‚‹ã€‚</p>
<p><strong>ã€Œå¤‰åŒ–ã€ã—ãªã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã§ <code class="language-text">count</code> å¤‰æ•°ãŒå¤‰åŒ–ã—ã¦ã„ã‚‹è¨³ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ <em>ã‚¨ãƒ•ã‚§ã‚¯ãƒˆé–¢æ•°ãã®ã‚‚ã®</em> ãŒ render ã”ã¨ã«ç•°ãªã£ã¦ã„ã‚‹ã®ã§ã™</strong></p>
<p>ãã‚Œãã‚Œã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ç‰¹å®šã® render å†…ã® <code class="language-text">count</code> ã®å€¤ã‚’å‚ç…§ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// åˆæœŸ render</span>
<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span>
<span class="gatsby-highlight-code-line">    <span class="token comment">// åˆæœŸ render ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆé–¢æ•°</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token string">`You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">0</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times`</span></span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// æŠ¼ä¸‹ã•ã‚Œã‚‹ã¨ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹</span>
<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span>
<span class="gatsby-highlight-code-line">    <span class="token comment">// 2å›ç›®ã® render ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆé–¢æ•°</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token string">`You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times`</span></span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// å†æŠ¼ä¸‹å¾Œã€ã¾ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹</span>
<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span>
<span class="gatsby-highlight-code-line">    <span class="token comment">// 3å›ç›®ã® render ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆé–¢æ•°</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token string">`You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times`</span></span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ..</span>
<span class="token punctuation">}</span></code></pre></div>
<p>React ã¯ã‚ãªãŸãŒä¸ãˆãŸã‚¨ãƒ•ã‚§ã‚¯ãƒˆé–¢æ•°ã‚’è¦šãˆã¦ãŠã‚Šã€DOMã«å¤‰æ›´ãŒèµ°ã£ã¦ãƒ–ãƒ©ã‚¦ã‚¶ã«æç”»ã•ã‚ŒãŸå¾Œã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚</p>
<p>æ¦‚å¿µçš„ã«ã¯ä¸€ã¤ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆï¼ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å¤‰ãˆã‚‹ï¼‰ãªã®ã§ã™ãŒã€render ã•ã‚Œã‚‹ã”ã¨ã« <em>åˆ¥ã®é–¢æ•°</em> ã¨ã—ã¦è¡¨ã•ã‚Œã¦ã„ã¾ã™ - ãã—ã¦ãã‚Œãã‚Œã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆé–¢æ•°ã¯ç‰¹å®šã® render ã«å±ã™ã‚‹ props ã¨ state ã‚’å‚ç…§ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<p><strong>æ¦‚å¿µçš„ã«ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ <em>render çµæœ</em> ã®ä¸€éƒ¨ã§ã‚ã‚‹ã¨æƒ³åƒã—ã¦ã‚‚ã‚‰ã£ã¦ã‚‚ã„ã„ã§ã™ã€‚</strong></p>
<hr>
<p>å®Œå…¨ã«ç†è§£ã—ã¦ã‚‹ã‹ç¢ºèªã™ã‚‹ãŸã‚ã«ã€åˆæœŸ render ã§ä½•ãŒèµ·ã“ã‚‹ã‹ãŠã•ã‚‰ã„ã—ã¾ã—ã‚‡ã†ï¼š</p>
<ul>
<li><strong>Reactï¼š</strong> state ãŒ <code class="language-text">0</code> ã®æ™‚ã®UIã‚’ã¡ã‚‡ã†ã ã„ã€‚</li>
<li>
<p><strong>ã‚ãªãŸã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼š</strong></p>
<ul>
<li>ã“ã‚ŒãŒ render çµæœã ã‚ˆï¼š
<code class="language-text">&lt;p&gt;You clicked 0 times&lt;/p&gt;</code>.</li>
<li>ãã‚Œã¨ã€çµ‚ã‚ã£ãŸå¾Œã«ã“ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã®ã‚’å¿˜ã‚Œãªã„ã§ã­ï¼š <code class="language-text">() =&gt; { document.title = &#39;You clicked 0 times&#39; }</code>.</li>
</ul>
</li>
<li><strong>Reactï¼š</strong> äº†è§£ã€‚UIã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆä¸­ã€‚ã­ã‡ãƒ–ãƒ©ã‚¦ã‚¶ã€DOMã«è‰²ã€…è¿½åŠ ã—ã¦ã‚‹ã‚ˆ</li>
<li><strong>ãƒ–ãƒ©ã‚¦ã‚¶ï¼š</strong> ã„ã„ã­ã€‚ç”»é¢ã«æç”»ã—ãŸã‚ˆã€‚</li>
<li>
<p><strong>Reactï¼š</strong> äº†è§£ã€‚ã§ã¯ä»Šã‹ã‚‰ä¸ãˆã‚‰ã‚ŒãŸã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã€‚</p>
<ul>
<li><code class="language-text">() =&gt; { document.title = &#39;You clicked 0 times&#39; }</code>ã‚’å®Ÿè¡Œä¸­</li>
</ul>
</li>
</ul>
<hr>
<p>ã§ã¯ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‚‰ã©ã†ãªã‚‹ã‹ã‚‚ãŠã•ã‚‰ã„ã—ã¦ãŠã“ã†ï¼š</p>
<ul>
<li><strong>ã‚ãªãŸã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼š</strong> ã­ã‡ React, state ã‚’ <code class="language-text">1</code> ã«ã‚»ãƒƒãƒˆã—ã¦ã€‚</li>
<li><strong>Reactï¼š</strong> state ãŒ <code class="language-text">1</code> ã®æ™‚ã®UIã‚’ã¡ã‚‡ã†ã ã„ã€‚</li>
<li>
<p><strong>ã‚ãªãŸã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼š</strong></p>
<ul>
<li>ã“ã‚ŒãŒ render çµæœã ã‚ˆï¼š
<code class="language-text">&lt;p&gt;You clicked 1 times&lt;/p&gt;</code>.</li>
<li>ãã‚Œã¨ã€çµ‚ã‚ã£ãŸå¾Œã«ã“ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã®ã‚’å¿˜ã‚Œãªã„ã§ã­ï¼š <code class="language-text">() =&gt; { document.title = &#39;You clicked 1 times&#39; }</code>.</li>
</ul>
</li>
<li><strong>Reactï¼š</strong> äº†è§£ã€‚UIã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆä¸­ã€‚ã­ã‡ãƒ–ãƒ©ã‚¦ã‚¶ã€DOMã«è‰²ã€…è¿½åŠ ã—ã¦ã‚‹ã‚ˆ</li>
<li><strong>ãƒ–ãƒ©ã‚¦ã‚¶ï¼š</strong> ã„ã„ã­ã€‚ç”»é¢ã«æç”»ã—ãŸã‚ˆã€‚</li>
<li>
<p><strong>Reactï¼š</strong> äº†è§£ã€‚ã§ã¯ä»Šã‹ã‚‰ã“ã®ç‰¹å®šã® render ã«å±ã™ã‚‹ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã€‚</p>
<ul>
<li><code class="language-text">() =&gt; { document.title = &#39;You clicked 1 times&#39; }</code>ã‚’å®Ÿè¡Œä¸­</li>
</ul>
</li>
</ul>
<hr>
<h2 id="ãã‚Œãã‚Œã®-render-ã¯å…¨ã¦ã‚’ä¿æŒã—ã¦ã„ã‚‹"><a href="#%E3%81%9D%E3%82%8C%E3%81%9E%E3%82%8C%E3%81%AE-render-%E3%81%AF%E5%85%A8%E3%81%A6%E3%82%92%E4%BF%9D%E6%8C%81%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ãã‚Œãã‚Œã® render ã¯å…¨ã¦ã‚’ä¿æŒã—ã¦ã„ã‚‹</h2>
<p><strong>ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ render ã®å¾Œã«å®Ÿè¡Œã•ã‚Œã€æ¦‚å¿µçš„ã«ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå‡ºåŠ›ã®ä¸€éƒ¨ã§ã‚ã‚Šã€ç‰¹å®šã® render å†…ã® state ã¨ props ã‚’å‚ç…§ã§ãã‚‹ã¨ã„ã†ã®ã¯ç†è§£ã—ã¦ã„ãŸã ã‘ãŸã¨æ€ã†</strong></p>
<p>æ€è€ƒå®Ÿé¨“ã‚’ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã®ã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦è€ƒãˆã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="gatsby-highlight-code-line">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">You clicked </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text"> times</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">        Click me</span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>å°‘ã—é…ã‚‰ã›ã¦è¤‡æ•°å›ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ãƒ­ã‚°ã¯ã©ã®ã‚ˆã†ãªçµæœã«ãªã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p>
<hr>
<p><em>ã“ã®å…ˆãƒã‚¿ãƒãƒ¬</em></p>
<hr>
<p>ã“ã®è³ªå•ã¯ã²ã£ã‹ã‘å•é¡Œã§ã‚ã‚Šç›´æ„Ÿçš„ã§ã¯ãªã„ã¨æ€ã‚ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚ã§ã™ãŒé•ã„ã¾ã™ï¼ç‰¹å®šã® render å†…ã«å±ã™ã‚‹ <code class="language-text">count</code> ã®å€¤ãŒé †æ¬¡å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚ã”è‡ªåˆ†ã§ä¸€åº¦<a href="https://codesandbox.io/s/lyx20m1ol" target="_blank" rel="nofollow noopener noreferrer">è©¦ã—ã¦ã¿ã¦ãã ã•ã„</a></p>
<p><img src="/timeout_counter-a5727d333c270e05942f508707265378.gif" alt="1, 2, 3, 4, 5 ã¨é †æ¬¡å‡ºåŠ›ã•ã‚Œã‚‹ç”»é¢éŒ²ç”»"></p>
<p>ã€Œå½“ãŸã‚Šå‰ã˜ã‚ƒã‚“ï¼ã“ã‚Œä»¥å¤–ã©ã®ã‚ˆã†ãªæŒ™å‹•ã™ã‚‹ã®ï¼Ÿã€ã¨æ€ã‚ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚</p>
<p>class ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® <code class="language-text">this.state</code> ã¯ã€ã“ã®ã‚ˆã†ãªæŒ™å‹•ã‚’ã—ã¾ã›ã‚“ã‚ˆã€‚ã“ã®<a href="https://codesandbox.io/s/kkymzwjqz3" target="_blank" rel="nofollow noopener noreferrer">ã‚³ãƒ¼ãƒ‰</a>ãŒåŒã˜ã‚ˆã†ãªæŒ™å‹•ã‚’ã™ã‚‹ã¨æ€ã†ã®ã¯ã‚ˆãã‚ã‚‹å‹˜é•ã„ã§ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">this.state.count</code> ã¯ç‰¹å®šã® render ã«å±ã™ã‚‹å€¤ã§ã¯ãªãã€å¸¸ã«æœ€æ–°ã® count ã®å€¤ã‚’å‚ç…§ã—ã¾ã™ã€‚ãªã®ã§ã€ä»£ã‚ã‚Šã« <code class="language-text">5</code> ãŒé †ç•ªã«è¡¨ç¤ºã•ã‚Œã¾ã™ï¼š</p>
<p><img src="/timeout_counter_class-264b329edc111a1973003bdf2bcacd65.gif" alt="5, 5, 5, 5, 5 ã¨é †æ¬¡å‡ºåŠ›ã•ã‚Œã‚‹ç”»é¢éŒ²ç”»"></p>
<p>Hooks ã¯ JavaScript ã®ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ã«é ¼ã‚Šãã£ã¦ã„ã‚‹ã®ã«ã€class ã®å®Ÿè£…ãŒã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ã¨ã‚ˆãé–¢é€£ã¥ã‘ã‚‰ã‚Œã‚‹<a href="https://wsvincent.com/javascript-closure-settimeout-for-loop/" target="_blank" rel="nofollow noopener noreferrer">ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå†…ã«é•ã†å€¤ãŒå…¥ã‚‹ä¸æ€è­°ãªç¾è±¡</a>ã«è‹¦ã—ã‚€ãªã‚“ã¦ã€çš®è‚‰ã§ã™ã­ã€‚ãªãœã‹ã¨ã„ã†ã¨ã€æ··åŒã®å…ƒã¯ mutation ã§ã‚ã‚Šã€ï¼ˆReact ã¯ <code class="language-text">this.state</code> ã‚’ mutate ã—ã¦æœ€æ–°ã®å€¤ã‚’æŒ‡ã™ã‚ˆã†ã«ã—ã¦ã‚‹ï¼‰ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£è‡ªä½“ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
<p><strong>ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ã¯ã€ã‚¯ãƒ­ãƒ¼ã‚ºã™ã‚‹å€¤ãŒå¤‰ã‚ã‚‰ãªã„å ´åˆã«ã¨ã¦ã‚‚å½¹ã«ç«‹ã¡ã¾ã™ã€‚åŸºæœ¬çš„ã«å®šæ•°ã‚’å‚ç…§ã™ã‚‹ã¨ã„ã†ã“ã¨ãªã®ã§ã€ä½•ã‚‚é›£ã—ãè€ƒãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“</strong> ãã—ã¦å…ˆã»ã©ã«ã‚‚è¿°ã¹ãŸã‚ˆã†ã«ã€ props ã¨ state ã¯ç‰¹å®šã® render å†…ã§ã¯ä¸€ç”Ÿå¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚ã¡ãªã¿ã«ã€class ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ç›´ã™ã“ã¨ãŒã§ãã¾ã™â€¦ <a href="https://codesandbox.io/s/w7vjo07055" target="_blank" rel="nofollow noopener noreferrer">ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ã‚’ä½¿ã£ã¦ã€‚</a></p>
<h2 id="æµã‚Œã«é€†ã‚‰ã†"><a href="#%E6%B5%81%E3%82%8C%E3%81%AB%E9%80%86%E3%82%89%E3%81%86" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æµã‚Œã«é€†ã‚‰ã†</h2>
<p>ã“ã®æ™‚ç‚¹ã§æ˜ç¤ºçš„ã«é‡è¦ãªã“ã¨ãŒè¨€ãˆã¾ã™ã€‚ãã‚Œã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ render å†…ã®<strong>å…¨ã¦</strong>ã®é–¢æ•°ï¼ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§å®šç¾©ã•ã‚Œã¦ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€APIã®å‘¼ã³å‡ºã—ãªã©ã‚’å«ã‚€ï¼‰ã¯å®šç¾©ã•ã‚Œã¦ã‚‹ç‰¹å®šã® render å†…ã® props ã¨ state ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ¼ã—ã¾ã™ã€‚</p>
<p>ãªã®ã§ã€ã“ã®äºŒã¤ã®ä¾‹ã¯åŒæ§˜ã®æŒ™å‹•ã‚’ã—ã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>counter<span class="token punctuation">)</span><span class="token punctuation">;</span></span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> counter <span class="token operator">=</span> props<span class="token punctuation">.</span>counter<span class="token punctuation">;</span></span>  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span><span class="token punctuation">;</span></span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p><strong>props ã‹ state ã‚’ã€Œæ—©ã‚ã«ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§å‘¼ã¼ã†ãŒå‘¼ã°ã¾ã„ãŒé–¢ä¿‚ã‚ã‚Šã¾ã›ã‚“ã€‚</strong> ãªãœãªã‚‰å¤‰ã‚ã‚‰ãªã„ã‹ã‚‰ã§ã™ï¼ä¸€ã¤ã® render å†…ã®ã‚¹ã‚³ãƒ¼ãƒ—ã§ã¯ã€ props ã¨ state ã¯å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚ï¼ˆåˆ†å‰²ä»£å…¥ã™ã‚‹ã¨ã•ã‚‰ã«åˆ†ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚ï¼‰</p>
<p>ã§ã™ãŒã€ç‰¹å®šã® render å†…ã®å€¤ã§ã¯ãªãæœ€æ–°ã®å€¤ã‚’ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã§å®šç¾©ã•ã‚Œã¦ã‚‹ callbackå†…ã§ <em>ä½¿ã„ãŸã„</em> å ´åˆã‚‚ã‚ã‚Šã¾ã™ã‚ˆã­ã€‚ã“ã‚Œã‚’æˆã—é‚ã’ã‚‹ä¸€ç•ªç°¡å˜ãªæ–¹æ³•ã¯ã€ã“ã®<a href="https://overreacted.io/how-are-function-components-different-from-classes/" target="_blank" rel="nofollow noopener noreferrer">è¨˜äº‹</a>ã®æœ€å¾Œã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚‚èª¬æ˜ã•ã‚Œã¦ã‚‹ã‚ˆã†ã«ã€ refs ã‚’ä½¿ã†ã“ã¨ã§ã™ã€‚</p>
<p>ã§ã™ãŒã€ <em>æœªæ¥ã®</em> props ã‚„ state ã‚’èª­ã¿ãŸã„ã¨ã„ã†ã“ã¨ã¯ React ã®æµã‚Œã«é€†ã‚‰ã£ã¦ã„ã‚‹ã¨ã„ã†ã®ã‚’ç”¨å¿ƒã—ã¦ãã ã•ã„ã€‚é–“é•ã£ã¦ã¯ã„ã¾ã›ã‚“ï¼ˆãã—ã¦æ™‚ã€…å¿…è¦ï¼‰ãŒã€ãƒ‘ãƒ©ãƒ€ã‚¤ãƒ ã‹ã‚‰æŠœã‘å‡ºã™ã¨ã„ã†æ„å‘³ã§ã‚ã¾ã‚Š
ç¶ºéº—ã«ã¯è¦‹ãˆãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã“ã‚Œã¯æ„å›³ã—ãŸä»•æ§˜ã§ã€ãªãœã‹ã¨ã„ã†ã¨ã©ã®ã‚³ãƒ¼ãƒ‰ãŒè„†ãã€ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«é ¼ã£ã¦ã„ã‚‹ã‹æ´—ã„å‡ºã—ãƒã‚¤ãƒ©ã‚¤ãƒˆã—ã¦ãã‚Œã‚‹å½¹å‰²ã‚’æ‹…ã£ã¦ã„ã¾ã™ã€‚classes ã§ã¯ã“ã®ç¾è±¡ãŒèµ·ãã¦ã‚‚ã‚ã¾ã‚Šæ˜ã‚‰ã‹ã«ã¯ã•ã‚Œã¾ã›ã‚“ã€‚</p>
<p>ã“ã¡ã‚‰ãŒ class ã®å‹•ä½œã¨åŒã˜ã‚ˆã†ãªå‹•ãã‚’ã™ã‚‹ counter ã®ä¾‹ã§ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> latestCount <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">    <span class="token comment">// mutable ãªæœ€æ–°ã®å€¤ã‚’ã‚»ãƒƒãƒˆã™ã‚‹</span></span><span class="gatsby-highlight-code-line">    latestCount<span class="token punctuation">.</span>current <span class="token operator">=</span> count<span class="token punctuation">;</span></span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      <span class="token comment">// mutable ãªæœ€æ–°ã®å€¤ã‚’èª­ã‚€</span></span><span class="gatsby-highlight-code-line">      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`You clicked </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>latestCount<span class="token punctuation">.</span>current<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> times`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span></code></pre></div>
<p><img src="/timeout_counter_refs-78f7948263dd13b023498b23cb99f4fc.gif" alt="S5, 5, 5, 5, 5 ã¨é †æ¬¡å‡ºåŠ›ã•ã‚Œã‚‹ç”»é¢éŒ²ç”»"></p>
<p>React ã§ä½•ã‹ã‚’ mutate ã™ã‚‹ã¨ã„ã†è¡Œç‚ºã¯é¢¨å¤‰ã‚ã‚Šã«è¦‹ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã§ã™ãŒã€ã¾ã•ã«ã“ã®æ–¹æ³•ã§ React ã¯ classes ã® <code class="language-text">this.state</code> ã‚’ reassign ã—ã¦ã„ã¾ã™ã€‚ç‰¹å®šã® render ã§ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ¼ã•ã‚ŒãŸ props ã¨ state ã¨ã¯é•ã„ã€ <code class="language-text">latestCount.current</code> ã¯ç‰¹å®šã® callback ã®å€¤ã‚’å¤‰ã‚ã‚‰ãšã«å‚ç…§ã§ãã‚‹ã€ã¨ã¯é™ã‚Šã¾ã›ã‚“ã€‚å®šç¾©ä¸Šã¯ã€ã„ã¤ã§ã‚‚ mutate å¯èƒ½ãªã®ã§ã™ã€‚ã“ã®ã‚ˆã†ãªç†ç”±ã‹ã‚‰ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ãªãã€è‡ªåˆ†ã‹ã‚‰é¸ã‚“ã§ä½¿ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
<h2 id="ã§ã¯-cleanup-ã¯ã©ã†ã§ã—ã‚‡ã†ï¼Ÿ"><a href="#%E3%81%A7%E3%81%AF-cleanup-%E3%81%AF%E3%81%A9%E3%81%86%E3%81%A7%E3%81%97%E3%82%87%E3%81%86%EF%BC%9F" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ã§ã¯ Cleanup ã¯ã©ã†ã§ã—ã‚‡ã†ï¼Ÿ</h2>
<p><a href="https://reactjs.org/docs/hooks-effect.html#effects-with-cleanup" target="_blank" rel="nofollow noopener noreferrer">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§èª¬æ˜</a>ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€ä¸€éƒ¨ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ cleanup phase ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãªã©ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’å…ƒã«æˆ»ã™å½¹å‰²ã‚’æœãŸã—ã¾ã™ã€‚</p>
<p>ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ãã ã•ã„ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    ChatAPI<span class="token punctuation">.</span><span class="token function">subscribeToFriendStatus</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>id<span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      ChatAPI<span class="token punctuation">.</span><span class="token function">unsubscribeFromFriendStatus</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>id<span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>åˆæœŸ render æ™‚ã«ã¯ <code class="language-text">props</code> ã¯ <code class="language-text">{id: 10}</code> ã¨ã—ã¦ã€2å›ç›®ã® render æ™‚ã¯ <code class="language-text">{id: 20}</code> ã«ãªã‚‹ã¨ã—ã¾ã—ã‚‡ã†ã€‚ã“ã®ã‚ˆã†ãªã“ã¨ãŒèµ·ãã‚‹ã¨æ€ã‚ã‚Œã‚‹ã§ã—ã‚‡ã†ï¼š</p>
<ul>
<li>React ãŒ <code class="language-text">{id: 10}</code> ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ cleanup ã™ã‚‹ã€‚</li>
<li>React ãŒã€€<code class="language-text">{id: 20}</code> ã® UI ã‚’ render ã™ã‚‹ã€‚</li>
<li>React ãŒ <code class="language-text">{id: 20}</code> ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã€‚</li>
</ul>
<p>ï¼ˆã¡ã‚‡ã£ã¨é•ã„ã¾ã™ã€‚ï¼‰</p>
<p>ã“ã®ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ã§ã¯ã€re-render å‰ã« cleanup ã¯å®Ÿè¡Œã•ã‚Œã‚‹ã®ã§ å¤ã„ props ãŒè¦‹ãˆã¦ã„ã‚‹ã¨æ€ã‚ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚ãã—ã¦ã€æ–°ã—ã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ re-render å¾Œã«å®Ÿè¡Œã•ã‚Œã‚‹ã®ã§æœ€æ–°ã® props ãŒè¦‹ãˆã¦ã„ã‚‹ã¨ã€‚ã§ã™ãŒã“ã‚Œã¯ class ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã®ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ã«åŸºã¥ã„ã¦ã„ã¦ã€ã“ã“ã§ã¯ <strong>æ­£ç¢ºã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</strong> ç†ç”±ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p>
<p>React ã¯<a href="https://medium.com/@dan_abramov/this-benchmark-is-indeed-flawed-c3d6b5b6f97f" target="_blank" rel="nofollow noopener noreferrer">ãƒ–ãƒ©ã‚¦ã‚¶ãŒæç”»ã—ãŸå¾Œ</a>ã«åˆã‚ã¦ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ã“ã®æ–¹æ³•ã ã¨ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’ãƒ–ãƒ­ãƒƒã‚¯ã™ã‚‹ã“ã¨ãŒãªã„ã®ã§ã€ã‚¢ãƒ—ãƒªã‚’æ—©ãã—ã¦ãã‚Œã¾ã™ã€‚ãã‚Œã¨åŒæ§˜ã§ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã® cleanup ã‚‚é…ã‚Œã¦å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ <strong>å‰ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯æ–°ã—ã„ props ã§ re-render ã•ã‚Œã¦ã‹ã‚‰ cleanup ã•ã‚Œã¾ã™ï¼š</strong></p>
<ul>
<li>React ãŒã€€<code class="language-text">{id: 20}</code> ã® UI ã‚’ render ã™ã‚‹ã€‚</li>
<li>ãƒ–ãƒ©ã‚¦ã‚¶ãŒæç”»ã™ã‚‹ã€‚<code class="language-text">{id: 20}</code> ã®æ™‚ã® UI ãŒç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚‹ã€‚</li>
<li><strong>React ãŒ <code class="language-text">{id: 10}</code> ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ cleanup ã™ã‚‹ã€‚</strong></li>
<li>React ãŒ <code class="language-text">{id: 20}</code> ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã€‚</li>
</ul>
<p>ã§ã‚‚ã©ã†ã‚„ã£ã¦å‰ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã® cleanup ã¯ props ãŒ <code class="language-text">{id: 20}</code> ã«å¤‰ã‚ã£ã¦ re-render ã•ã‚ŒãŸ<em>å¾Œã«</em>å®Ÿè¡Œã•ã‚Œã¦ã‚‹ã®ã«ã€å¤ã„ <code class="language-text">{id: 10}</code> ã® props ãŒè¦‹ãˆã¦ã‚‹ã®ï¼Ÿã¨æ€ã‚ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚</p>
<p>å‰ã«ã‚‚é­é‡ã—ãŸå•é¡Œã§ã™ã­â€¦ ğŸ¤”</p>
<p><img src="/deja_vu-5fe238cf03a21dfa32af624124fcdcff.gif" alt="ãƒ‡ãƒ»ã‚¸ãƒ£ãƒ´ (æ˜ ç”»ãƒãƒˆãƒªãƒƒã‚¯ã‚¹ã§ã®çŒ«ã®ã‚·ãƒ¼ãƒ³)"></p>
<p>å‰ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‹ã‚‰å¼•ç”¨ã—ã¾ã™ï¼š</p>
<blockquote>
<p>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ render å†…ã®<strong>å…¨ã¦</strong>ã®é–¢æ•°ï¼ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§å®šç¾©ã•ã‚Œã¦ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€APIã®å‘¼ã³å‡ºã—ãªã©ã‚’å«ã‚€ï¼‰ã¯å®šç¾©ã•ã‚Œã¦ã‚‹ç‰¹å®šã® render å†…ã® props ã¨ state ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ¼ã—ã¾ã™ã€‚</p>
</blockquote>
<p>ã“ã‚Œã§ç­”ãˆã¯æ˜ç¢ºã§ã™ã­ï¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã® cleanup ã¯ã©ã†ã„ã†æ„å‘³ã§ã‚ã‚ã†ã¨æœ€æ–°ã®å€¤ã‚’èª­ã‚“ã ã‚Šã—ã¾ã›ã‚“ã€‚ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ç‰¹å®šã® render å†…ã® props ã‚’èª­ã‚“ã§ã„ã‚‹ã®ã§ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// åˆæœŸ render æ™‚ã€ props ã¯ {id: 10}</span>
<span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span>
    <span class="token comment">// åˆæœŸ render ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆé–¢æ•°</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      ChatAPI<span class="token punctuation">.</span><span class="token function">subscribeToFriendStatus</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">      <span class="token comment">// åˆæœŸ render ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ cleanup</span></span><span class="gatsby-highlight-code-line">      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">        ChatAPI<span class="token punctuation">.</span><span class="token function">unsubscribeFromFriendStatus</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">      <span class="token punctuation">}</span><span class="token punctuation">;</span></span>    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// 2å›ç›®ã® render æ™‚ã€props ã¯ {id: 20}</span>
<span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span>
    <span class="token comment">// 2å›ç›®ã® render ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆé–¢æ•°</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      ChatAPI<span class="token punctuation">.</span><span class="token function">subscribeToFriendStatus</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 2å›ç›®ã® render ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ cleanup</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        ChatAPI<span class="token punctuation">.</span><span class="token function">unsubscribeFromFriendStatus</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> handleStatusChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>å¸å›½ã¯æ»…ã³éºç°ã«å¤‰ã‚ã‚Šã€å¤ªé™½ã®å¤–å±¤ã¯å‰Šãè½ã¨ã•ã‚Œç™½è‰²çŸ®æ˜Ÿã«å¤‰å½¢ã—ã€æœ€å¾Œã®æ–‡æ˜ã¯çµ‚ã‚ã‚Šã‚’è¿ãˆã¾ã™ã€‚ã§ã™ãŒèª°ã‚‚åˆæœŸ render ã® cleanup ã‚’å®šç¾©ã•ã‚ŒãŸç‰¹å®šã® render å†…ã® <code class="language-text">{id: 10}</code> ä»¥å¤–ã®ã‚‚ã®ã‚’ cleanup ã•ã›ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚</p>
<p>ã“ã‚Œã‚‰ã®ç†ç”±ã«ã‚ˆã‚Š React ã¯æç”»å¾Œã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã®ã§ã™ - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚ãªãŸã®ã‚¢ãƒ—ãƒªã‚’æ—©ãã™ã‚‹ãŸã‚ã«ã€‚å¤ã„ props ã¯ã‚³ãƒ¼ãƒ‰ãŒå¿…è¦ãªæ™‚ã®ãŸã‚ã«å­˜åœ¨ã¯ã—ã¦ã„ã¾ã™ã€‚</p>
<h2 id="ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã§ã¯ãªãã€ã‚·ãƒ³ã‚¯ãƒ­"><a href="#%E3%83%A9%E3%82%A4%E3%83%95%E3%82%B5%E3%82%A4%E3%82%AF%E3%83%AB%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8F%E3%80%81%E3%82%B7%E3%83%B3%E3%82%AF%E3%83%AD" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã§ã¯ãªãã€ã‚·ãƒ³ã‚¯ãƒ­</h2>
<p>React ã®ä½•ãŒå¥½ãã‹ã£ã¦ã„ã†ã¨ã€åˆæœŸ render ã®çµæœè¨˜è¿°ã¨ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒçµ±ä¸€ã•ã‚Œã¦ã„ã‚‹ã¨ã“ã‚ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å‡è³ªåŒ–ã‚’é˜²ãã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<p>ã“ã®ã‚ˆã†ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚ã‚‹ã¨ã—ã¾ã—ã‚‡ã†ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Greeting<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      Hello, </span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">&lt;Greeting name=&quot;Dan&quot; /&gt;</code> ã‚’ render ã—ã¦å¾Œã« <code class="language-text">&lt;Greeting name=&quot;Yuzhi&quot; &gt;</code> ã«å¤‰ãˆã‚ˆã†ãŒã€ç›´æ¥ <code class="language-text">&lt;Greeting name=&quot;Yuzhi&quot; /&gt;</code> ã‚’ render ã—ã‚ˆã†ãŒé–¢ä¿‚ã‚ã‚Šã¾ã›ã‚“ã€‚æœ€çµ‚çš„ã«ã¯ã€ã©ã¡ã‚‰ã®ã‚±ãƒ¼ã‚¹ã§ã‚‚ â€œHello, Yuzhiâ€ ã¨å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚</p>
<p>ã‚ˆãäººã¯ã€Œã™ã¹ã¦ã¯éç¨‹ã ã€‚çµæœã§ã¯ãªã„ã€ã¨è¨€ã„ã¾ã™ã€‚ã§ã™ãŒã€ React ã®å ´åˆã¯é€†ã§ã™ã€‚<strong>å…¨ã¦ã¯çµæœã§ã‚ã‚Šã€éç¨‹ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</strong> ã“ã‚ŒãŒ jQuery ã® <code class="language-text">$.addClass</code> ã¨ <code class="language-text">$.removeClass</code>ï¼ˆéç¨‹ï¼‰ãªã©ã®å‘¼ã³å‡ºã—ã¨ React ã§<em>ã‚ã‚‹ã¹ã</em> CSS ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©ã™ã‚‹è¡Œç‚ºï¼ˆçµæœï¼‰ã®é•ã„ã§ã™ã€‚</p>
<p><strong>React ã¯ç¾åœ¨ã® props ã¨ state ã«å¿œã˜ã¦ DOM ã‚’ã‚·ãƒ³ã‚¯ãƒ­ã—ã¾ã™ã€‚</strong> render æ™‚ã¯ mount ã‚„ update ã«åŒºåˆ¥ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
<p>ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’åŒã˜ã‚ˆã†ã«è€ƒãˆã‚‹ã®ãŒæ­£è§£ã§ã—ã‚‡ã†ã€‚<strong><code class="language-text">useEffect</code> ã¯ã€React tree ä»¥å¤–ã®ã‚‚ã®ã‚’ props ã¨ state ã«å¿œã˜ã¦ <em>ã‚·ãƒ³ã‚¯ãƒ­</em> ã—ã¦ãã‚Œã¾ã™ã€‚</strong> </p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Hello, '</span> <span class="token operator">+</span> name<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Greeting<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">      Hello, </span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ã“ã‚Œã¯ã€<em>mount/update/unmount</em> ã®ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ã¨ã¯å¾®å¦™ã«ç•°ãªã‚Šã¾ã™ã€‚ ã“ã‚Œã¯ã—ã£ã‹ã‚Šç†è§£ã—ã¾ã—ã‚‡ã†ã€‚<strong>åˆæœŸ render ã‹å¦ã‹ã§é•ã†æŒ™å‹•ã‚’ã™ã‚‹ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’æ›¸ã“ã†ã¨ã—ã¦ã‚‹å ´åˆã¯ã€React ã®æµã‚Œã«é€†ã‚‰ã£ã¦ã„ã¾ã™ï¼</strong> ã‚‚ã—ã€çµæœãŒ <em>éç¨‹</em> ã«é ¼ã£ã¦ã—ã¾ã£ã¦ã„ã‚‹å ´åˆã¯ã€ã‚·ãƒ³ã‚¯ãƒ­ã«å¤±æ•—ã—ã¦ã„ã¾ã™ã€‚</p>
<p>props A, B, ã¨ C ã¨é †ã« render ã—ã‚ˆã†ãŒ C ã§ã„ããªã‚Š render ã—ã‚ˆã†ãŒé–¢ä¿‚ãªã„ã¯ãšã§ã™ã€‚å¤šå°‘é•ã„ã¯ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒï¼ˆä¾‹ãˆã° data ã‚’ fetch ã—ã¦ã„ã‚‹é–“ãªã©ï¼‰ã€æœ€çµ‚çµæœã¯åŒã˜ã§ã‚ã‚‹ã¯ãšã§ã™ã€‚</p>
<p>ãã‚Œã§ã‚‚ã€å…¨ã¦ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ render <em>æ¯</em>ã«å®Ÿè¡Œã•ã›ã‚‹ã®ã¯åŠ¹ç‡çš„ã§ã¯ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼ˆãã—ã¦å ´åˆã«ã‚ˆã£ã¦ã¯ç„¡é™ãƒ«ãƒ¼ãƒ—ã«ã‚‚ç¹‹ãŒã‚Šã¾ã™ï¼‰ã€‚</p>
<p>ã©ã†ã—ãŸã‚‰è§£æ±ºã§ãã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p>
<h2 id="react-ã«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’æ¯”è¼ƒã™ã‚‹ã“ã¨ã‚’æ•™ãˆã‚‹"><a href="#react-%E3%81%AB%E3%82%A8%E3%83%95%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E6%AF%94%E8%BC%83%E3%81%99%E3%82%8B%E3%81%93%E3%81%A8%E3%82%92%E6%95%99%E3%81%88%E3%82%8B" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React ã«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’æ¯”è¼ƒã™ã‚‹ã“ã¨ã‚’æ•™ãˆã‚‹</h2>
<p>ã“ã®æ•™è¨“ã¯ã‚‚ã†æ—¢ã« DOM æ“ä½œã§ç¿’ã£ã¦ã„ã¾ã™ã€‚React ã¯ DOM ãŒã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚ŒãŸç®‡æ‰€ã ã‘èªè­˜ã—ã¦ã€å…¨ã¦ã‚’è§¦ã‚‰ãšã«å¤‰æ›´ç‚¹ã ã‘ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¾ã™ã€‚</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Greeting<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
  Hello, Dan
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></code></pre></div>
<p>ã‚’</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Greeting<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
  Hello, Yuzhi
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span></code></pre></div>
<p>ã¸ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ã¨ã—ã¾ã™ã€‚ã“ã®æ™‚ã€ React ã¯äºŒã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å—ã‘å–ã‚Šã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> oldProps <span class="token operator">=</span> <span class="token punctuation">{</span>className<span class="token punctuation">:</span> <span class="token string">'Greeting'</span><span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token string">'Hello, Dan'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newProps <span class="token operator">=</span> <span class="token punctuation">{</span>className<span class="token punctuation">:</span> <span class="token string">'Greeting'</span><span class="token punctuation">,</span> children<span class="token punctuation">:</span> <span class="token string">'Hello, Yuzhi'</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>ãã‚Œãã‚Œã® props ã‚’æ¯”ã¹ã¦ã€ <code class="language-text">children</code> ã¯å¤‰æ›´ã—ã¦ã„ã‚‹ã®ã§ DOM ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¯å¿…è¦ã§ã™ãŒ <code class="language-text">className</code> ã¯å¤‰ã‚ã£ã¦ã„ãªã„ã®ã§ã€ã“ã®ã‚ˆã†ãªå‡¦ç†ã‚’ã—ã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">domNode<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'Hello, Yuzhi'</span><span class="token punctuation">;</span>
<span class="token comment">// domNode.classNameã¯è§¦ã‚‹å¿…è¦ãªã—</span></code></pre></div>
<p><strong>ã“ã®ã‚ˆã†ãªå‡¦ç†ã‚’ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã§ã‚‚ã§ãã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒãªã„å ´åˆã¯å®Ÿè¡Œã—ãªã„ã€ã¨ã‹ã§ããŸã‚‰ã„ã„ã§ã™ã‚ˆã­ã€‚</strong></p>
<p>ä¾‹ãˆã°ã€state ã®å¤‰æ›´ã«ã‚ˆã‚Šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå† render ã™ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Greeting</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>counter<span class="token punctuation">,</span> setCounter<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Hello, '</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Greeting<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">      Hello, </span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="gatsby-highlight-code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setCounter</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span></span><span class="gatsby-highlight-code-line"><span class="token plain-text">        Increment</span></span><span class="gatsby-highlight-code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text"></span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ã§ã™ãŒã€æˆ‘ã€…ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ <code class="language-text">counter</code> ã® state ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã›ã‚“ã€‚ <strong>ã“ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ã€<code class="language-text">document.title</code> ã‚’ <code class="language-text">name</code> prop ã§ã‚·ãƒ³ã‚¯ãƒ­ã•ã›ã¦ã„ã¾ã™ã€‚ã§ã™ãŒã€ <code class="language-text">name</code> prop ã¯å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚</strong> ãªã®ã§ã€ <code class="language-text">document.title</code> ã‚’ <code class="language-text">counter</code> ãŒå¤‰ã‚ã‚‹ã”ã¨ã«ãƒªã‚¢ã‚µã‚¤ãƒ³ã™ã‚‹ã®ã¯ã€åŠ¹ç‡çš„ã¨ã¯è¨€ãˆã¾ã›ã‚“ã€‚</p>
<p>React ã¯å˜ç´”ã« DOM ã®é•ã„ã‚’å‹æ‰‹ã«æ¤œçŸ¥ã§ãã‚‹ã‚ˆã†ã«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚‚é•ã„ã‚’æ¤œçŸ¥ã§ããªã„ã®ï¼Ÿã¨æ€ã„ã¾ã™ã‚ˆã­ã€‚</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">let</span> <span class="token function-variable function">oldEffect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Hello, Dan'</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token function-variable function">newEffect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Hello, Dan'</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// React ã¯ã“ã®äºŒã¤ã®é–¢æ•°ãŒåŒã˜ã“ã¨ã‚’ã—ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ãŒåˆ†ã‹ã‚‹ã®ã‹ï¼Ÿ</span></code></pre></div>
<p>å®Ÿã¯ã§ãã¾ã›ã‚“ã€‚React ã¯ä¸€åº¦é–¢æ•°ã‚’å‘¼ã°ãªã„ã¨ã€ãã®é–¢æ•°ãŒä½•ã‚’ã—ã¦ã„ã‚‹ã‹æ¨æ¸¬ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚</p>
<p>ãªã®ã§ã€ã‚‚ã—ä¸å¿…è¦ãªã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’å†å®Ÿè¡Œã—ãŸããªã„å ´åˆã¯ã€ä¾å­˜é…åˆ—ï¼ˆdeps ã¨ã‚‚è¨€ã‚ã‚Œã‚‹ï¼‰ã¨ã„ã†ã‚‚ã®ã‚’ç¬¬ 2 å¼•æ•°ã¨ã—ã¦ <code class="language-text">useEffect</code> ã«æ¸¡ã—ã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Hello, '</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Our deps</span></span></code></pre></div>
<p><strong>ã€Œé–¢æ•°ã®æˆ»ã‚Šå€¤ãŒåˆ†ã‹ã‚‰ãªã„ã®ã¯çŸ¥ã£ã¦ã‚‹ã‘ã©ã€render scope å†…ã§ <code class="language-text">name</code> ã—ã‹ä½¿ã£ã¦ãªã„ã“ã¨ã‚’ç´„æŸã™ã‚‹ã‚ˆã€ã¨ React ã«è¨€ã£ã¦ã‚‹ã¿ãŸã„ãªã‚‚ã®ã§ã™ã€‚</strong></p>
<p>ã‚‚ã—é…åˆ—å†…ã®ãã‚Œãã‚Œã®å€¤ãŒç¾åœ¨ã¨ä¸€ã¤å‰ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå®Ÿè¡Œæ™‚ã¨åŒã˜ã§ã‚ã‚Œã°ã€ã‚·ãƒ³ã‚¯ãƒ­ã™ã‚‹ã‚‚ã®ãŒãªã„ã®ã§ React ã¯ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">oldEffect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Hello, Dan'</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> oldDeps <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Dan'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">newEffect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Hello, Dan'</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newDeps <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Dan'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// React ã¯é–¢æ•°ã®æˆ»ã‚Šå€¤ã‚’åˆ†ã‹ã‚‹ã“ã¨ã¯ã§ããªã„ãŒã€deps ã‚’æ¯”ã¹ã‚‹ã“ã¨ã¯ã§ãã‚‹ã€‚</span>
<span class="token comment">// ã“ã®ä¾‹ã§ã¯ã€ deps ã¯åŒã˜ã§ã‚ã‚‹ãŸã‚æ–°ã—ã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’å®Ÿè¡Œã›ãšã«æ¸ˆã‚€ã€‚</span></code></pre></div>
<p>ã‚‚ã—ä¸€ã¤ã§ã‚‚ deps ã®å€¤ãŒ render ã”ã¨ã«é•ã£ãŸã‚‰ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã¦ã¯ãªã‚‰ãªã„ã¨ã„ã†ã®ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚ã‚·ãƒ³ã‚¯ãƒ­ã‚¿ã‚¤ãƒ ã ï¼</p>
<h2 id="react-ã«ä¾å­˜é–¢ä¿‚ã®å˜˜ã‚’ã¤ã„ã¦ã¯ãªã‚‰ãªã„"><a href="#react-%E3%81%AB%E4%BE%9D%E5%AD%98%E9%96%A2%E4%BF%82%E3%81%AE%E5%98%98%E3%82%92%E3%81%A4%E3%81%84%E3%81%A6%E3%81%AF%E3%81%AA%E3%82%89%E3%81%AA%E3%81%84" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React ã«ä¾å­˜é–¢ä¿‚ã®å˜˜ã‚’ã¤ã„ã¦ã¯ãªã‚‰ãªã„</h2>
<p>React ã«å˜˜ã‚’ã¤ãã¨ã€å¾Œã«æ‚ªå½±éŸ¿ã‚’ä¸ãˆã‚‹ã“ã¨ã«ãªã‚‹ã€‚ç›´æ„Ÿçš„ã«ã¯ç†å±ˆã«åˆã†ã®ã ãŒã€class ã®ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ã‚’æµç”¨ã—ã¦ <code class="language-text">useEffect</code> ã‚’ä½¿ã†äººãŸã¡ã¯ãŸãã•ã‚“è¦‹ã¦ãã¾ã—ãŸï¼ˆãã—ã¦è‡ªåˆ†ã‚‚æœ€åˆã¯åŒã˜ã§ã—ãŸï¼ï¼‰ã€‚</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">SearchResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ã“ã‚Œã¯é©ã—ã¦ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿå¿…ãšã—ã‚‚ãã†ã§ã‚ã‚‹ã¨ã¯é™ã‚Šã¾ã›ã‚“ - ã‚‚ã£ã¨è‰¯ã„æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p><em>ï¼ˆHooks ã® <a href="https://ja.reactjs.org/docs/hooks-faq.html#is-it-safe-to-omit-functions-from-the-list-of-dependencies" target="_blank" rel="nofollow noopener noreferrer">FAQ</a> ã«è©³ã—ãæ–¹æ³•ã‚’æ›¸ã„ã¦ã„ã¾ã™ã€‚ã“ã®ä¾‹ã«ã¯ã¾ãŸå¾Œã§<a href="#moving-functions-inside-effects">æˆ»ã£ã¦ãã¾ã™</a>ï¼‰</em></p>
<p>ã€Œã§ã‚‚ã€ mount æ™‚ã ã‘ã«å®Ÿè¡Œã—ãŸã„ï¼ã€ã¨æ€ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã¨ã‚Šã‚ãˆãšä»Šã¯ã“ã‚Œã ã‘è¦šãˆã¦ãã ã•ã„ï¼š deps ã‚’æŒ‡å®šã™ã‚‹å ´åˆã€ <strong>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã®å€¤ãŒã‚ã‚Šã‚¨ãƒ•ã‚§ã‚¯ãƒˆã§ã‚‚ä½¿ã‚ã‚Œã¦ã‚‹å ´åˆã¯ã€å…¨ã¦è¨˜è¿°ã—ã¦ãã ã•ã„ã€‚</strong> ãã‚Œã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã® props, state, ãã—ã¦é–¢æ•°ã‚‚å«ã¿ã¾ã™ã€‚</p>
<p>ã§ã™ãŒç¨€ã«å•é¡Œã‚’å¼•ãèµ·ã“ã™å ´åˆã‚‚ã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€ç„¡é™ refetch ãƒ«ãƒ¼ãƒ—ã«å‡ºãã‚ã—ãŸã‚Šã€ã‚½ã‚±ãƒƒãƒˆãŒä½•åº¦ã‚‚ä½œã‚‰ã‚ŒãŸã‚Šã€‚ <strong>ã“ã‚Œã‚‰ã®è§£æ±ºç­–ã¯å¯¾è±¡ deps ã‚’é…åˆ—å†…ã‹ã‚‰å‰Šé™¤ã™ã‚‹ã“ã¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</strong> æœ€å–„ã®è§£æ±ºç­–ã¯å¾Œã»ã©ãŠè¦‹ã›ã—ã¾ã™ã€‚</p>
<p>ã§ã™ãŒè§£æ±ºç­–ã‚’è¦‹ã‚‹å‰ã«ã€ãªãœèµ·ã“ã‚‹ã®ã‹æ¢ã£ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p>
<h2 id="ä¾å­˜é–¢ä¿‚ã«å˜˜ã‚’ã¤ãã¨ä½•ãŒèµ·ã“ã‚‹ã®ã‹"><a href="#%E4%BE%9D%E5%AD%98%E9%96%A2%E4%BF%82%E3%81%AB%E5%98%98%E3%82%92%E3%81%A4%E3%81%8F%E3%81%A8%E4%BD%95%E3%81%8C%E8%B5%B7%E3%81%93%E3%82%8B%E3%81%AE%E3%81%8B" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä¾å­˜é–¢ä¿‚ã«å˜˜ã‚’ã¤ãã¨ä½•ãŒèµ·ã“ã‚‹ã®ã‹</h2>
<p>ã‚‚ã—ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã§ä½¿ã‚ã‚Œã¦ã‚‹å…¨ã¦ã®å€¤ãŒ deps ã«å«ã¾ã‚Œã¦ã„ã‚‹ã¨ã€ React ã¯ã„ã¤ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’å†å®Ÿè¡Œã™ã‚‹ã‹åˆ†ã‹ã‚Šã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Hello, '</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre></div>
<p><img src="/deps-compare-correct-fae247cd068eedbd4b62ba50592d2b3d.gif" alt="ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãŒå…¥ã‚Œæ›¿ã‚ã£ã¦ã‚‹æ§˜å­"></p>
<p><em>ï¼ˆä¾å­˜ã™ã‚‹å€¤ãŒ render å¾Œã«ç•°ãªã‚‹ãŸã‚ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’å†å®Ÿè¡Œã—ã¾ã™ã€‚ï¼‰</em></p>
<p>ã§ã™ãŒä¾å­˜é…åˆ—ã‚’ <code class="language-text">[]</code> ã¨ã—ãŸå ´åˆã€æœ€æ–°ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Hello, '</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é–“é•ã„ï¼š name ãŒ deps ã«å…¥ã£ã¦ã¾ã›ã‚“</span></span></code></pre></div>
<p><img src="/deps-compare-wrong-25f75db3f9f57ffe1426912093577445.gif" alt="ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãŒå…¥ã‚Œæ›¿ã‚ã£ã¦ã‚‹æ§˜å­"></p>
<p><em>ï¼ˆä¾å­˜ã™ã‚‹å€¤ãŒ render å¾Œã‚‚åŒã˜ãªã®ã§ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚ï¼‰</em></p>
<p>ã±ã£ã¨è¦‹ã ã¨ã“ã®å•é¡Œã¯å½“ãŸã‚Šå‰ã ã¨æ€ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã§ã™ãŒã€ç›´æ„Ÿçš„ã« class ã§ã®è§£æ±ºç­–ãŒæ€ã„æµ®ã‹ã‚“ã§æ··ä¹±ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚</p>
<p>ä¾‹ãˆã°ã€æ¯ç§’ 1 ã¥ã¤ increment ã—ã¦ã„ãã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã—ã¦ã‚‹ã¨ã—ã¾ã—ã‚‡ã†ã€‚ class ã®ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ã§ã¯ setInterval ã‚’ä¸€åº¦ã ã‘ã‚»ãƒƒãƒˆã—ã¦ã€ãã‚Œã‚’çµ‚ã‚ã‚Šæ¬¡ç¬¬ destroy ã™ã‚‹ã®ãŒç›´æ„Ÿçš„ã«æ€ã„æµ®ã‹ã¶ã§ã—ã‚‡ã†ã€‚ã“ã¡ã‚‰ãŒå®Ÿéš›ã«å®Ÿè£…ã—ãŸ<a href="https://codesandbox.io/s/n5mjzjy9kl" target="_blank" rel="nofollow noopener noreferrer">ä¾‹</a>ã§ã™ã€‚ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’ <code class="language-text">useEffect</code> ã®ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ã«ç½®ãæ›ãˆã‚‹ã¨ã€ç›´æ„Ÿçš„ã« <code class="language-text">[]</code> ã‚’ deps ã«ä¸ãˆã¦ã—ã¾ã„ã¾ã™ã€‚ãªãœãªã‚‰ä¸€åº¦ã ã‘å®Ÿè¡Œã—ãŸã„ã‹ã‚‰ã§ã—ã‚‡ï¼Ÿ</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ã§ã™ãŒã€ã“ã®ä¾‹ã ã¨<a href="https://codesandbox.io/s/91n5z8jo7r" target="_blank" rel="nofollow noopener noreferrer">ä¸€åº¦ã—ã‹ increment ã—ã¾ã›ã‚“</a> ã€‚<em>ã‚ã‚Œï¼Ÿ</em></p>
<p>ã‚ãªãŸã®ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ãŒã€Œä¾å­˜é…åˆ—ã¯å†å®Ÿè¡Œã—ãŸã„ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’æŒ‡å®šã•ã›ã¦ãã‚Œã‚‹ã€ã ã¨ã€ã“ã®ä¾‹ã§ã‚ãªãŸã¯è‡ªåˆ†ã®å­˜åœ¨æ„ç¾©ã‚’å•ã†ã“ã¨ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚intervalãªã®ã§ä¸€åº¦ã ã‘å®Ÿè¡Œ <em>ã—ãŸã„</em> ã®ã«ã€ä½•ãŒå•é¡Œã‚’å¼•ãèµ·ã“ã—ã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p>
<p>ã§ã™ãŒã€dependencies ã¯ React ã«å¯¾ã—ã¦ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãŒ render scope å†…ã§ä½¿ã† <em>å…¨ã¦</em> ã®å€¤ã«å¯¾ã™ã‚‹ãƒ’ãƒ³ãƒˆã§ã‚ã‚‹ã¨ã„ã†ã®ã‚’çŸ¥ã£ã¦ã„ã‚‹ã¨ã€ç†ã«ã‹ãªã£ã¦ã¾ã™ã€‚ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã§ <code class="language-text">count</code> ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã«ã€ä¾å­˜é…åˆ—ã« <code class="language-text">[]</code> ã¨æŒ‡å®šã™ã‚‹ã“ã¨ã§å˜˜ã‚’ã¤ãã¾ã—ãŸã€‚ãƒã‚°ã‚’å¼•ãèµ·ã“ã™ã®ã‚‚æ™‚é–“ã®å•é¡Œã§ã™ã€‚</p>
<p>åˆæœŸ render æ™‚ã¯ã€ <code class="language-text">count</code> ã¯ <code class="language-text">0</code> ã§ã™ã€‚ãªã®ã§ã€ <code class="language-text">setCount(count + 1)</code> ã¯åˆæœŸ render ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã§ã¯ <code class="language-text">setCount(0 + 1)</code> ã¨ã„ã†æ„å‘³ã§ã™ã€‚ <strong><code class="language-text">[]</code> ã‚’æŒ‡å®šã—ã¦ã‚‹ã®ã§å†å®Ÿè¡Œã¯ã•ã‚Œã¾ã›ã‚“ã€‚ãªã®ã§ã€ <code class="language-text">setCount(0 + 1)</code> ã‚’æ¯ç§’å‘¼ã³ç¶šã‘ã¦ã„ã‚‹ã®ã§ã™ï¼š</strong></p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// åˆæœŸ render æ™‚ã¯ state = 0</span>
<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span>
    <span class="token comment">// åˆæœŸ render ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">        <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Always setCount(1)</span></span>      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="gatsby-highlight-code-line">    <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// åˆæœŸä»¥é™äºŒåº¦ã¨å®Ÿè¡Œã•ã‚Œãªã„</span></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// ãã®å¾Œå…¨ã¦ã® render ã§ã¯ state = 1</span>
<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span>
<span class="gatsby-highlight-code-line">    <span class="token comment">// ã“ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯å¸¸ã«ç„¡è¦–ã•ã‚Œã‚‹ã€‚</span></span><span class="gatsby-highlight-code-line">    <span class="token comment">// ãªãœãªã‚‰ã€ç©ºé…åˆ—ã¨å˜˜ã‚’ã¤ã„ãŸã‹ã‚‰ã§ã‚ã‚‹ã€‚</span></span>    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã®å€¤ã«ä¾å­˜ã—ã¦ã„ã‚‹ã®ã«ã€ ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ã©ã®å€¤ã«ã‚‚ä¾å­˜ã—ã¦ã„ãªã„ã¨å˜˜ã‚’ã¤ãã¾ã—ãŸï¼</p>
<p>ã“ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã«ã¯ã‚ã‚‹ãŒã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã«ã¯ãªã„ <code class="language-text">count</code> ã®å€¤ã‚’ä½¿ã£ã¦ã„ã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token comment">// ...</span></span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ãªã®ã§ã€ ä¾å­˜é…åˆ—ã« <code class="language-text">[]</code> ã¨æŒ‡å®šã™ã‚‹ã¨ãƒã‚°ã‚’èµ·ã“ã—ã¾ã™ã€‚ React ã¯ä¾å­˜é…åˆ—ã®ä¸­èº«ã®å€¤ã‚’æ¯”è¼ƒã—ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ï¼š</p>
<p><img src="/interval-wrong-29e53bd0c9b7d2ac70d3cd924886b030.gif" alt="å¤ã„ interval ã® closure ã®å›³"></p>
<p><em>ï¼ˆé…åˆ—å†…ã®å€¤ãŒåŒã˜ãªã®ã§ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚ï¼‰</em></p>
<p>ã“ã®ã‚ˆã†ãªé›£é¡Œã¯ç†è§£ã«è‹¦ã—ã¿ã¾ã™ã€‚ãªã®ã§ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã®ä¾å­˜é–¢ä¿‚ã«ã¤ã„ã¦ã¯å¸¸ã«æ­£ç›´ã§ã‚ã‚‹ã“ã¨ã‚’ãƒ«ãƒ¼ãƒ«åŒ–ã™ã‚‹ã®ã‚’ã‚ªã‚¹ã‚¹ãƒ¡ã—ã¾ã™ã€‚ã‚‚ã—ãƒãƒ¼ãƒ å†…ã§å¾¹åº•ã™ã‚‹å ´åˆã¯ã€<a href="https://github.com/facebook/react/issues/14920" target="_blank" rel="nofollow noopener noreferrer">lint rule</a> ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚</p>
<h2 id="ä¾å­˜é–¢ä¿‚ã«æ­£ç›´ã«ãªã‚‹äºŒã¤ã®æ–¹æ³•"><a href="#%E4%BE%9D%E5%AD%98%E9%96%A2%E4%BF%82%E3%81%AB%E6%AD%A3%E7%9B%B4%E3%81%AB%E3%81%AA%E3%82%8B%E4%BA%8C%E3%81%A4%E3%81%AE%E6%96%B9%E6%B3%95" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä¾å­˜é–¢ä¿‚ã«æ­£ç›´ã«ãªã‚‹äºŒã¤ã®æ–¹æ³•</h2>
<p>ä¾å­˜é–¢ä¿‚ã«æ­£ç›´ãªã‚‹æ–¹æ³•ã¨ã—ã¦ã€äºŒã¤ã®æ–¹é‡ãŒã‚ã‚Šã¾ã™ã€‚ä¸€èˆ¬çš„ã«ã¯æœ€åˆã®ç­–ã§å§‹ã‚ã¦ã€äºŒå€‹ç›®ã®ç­–ã¯å¿…è¦ã§ã‚ã‚Œã°é©ç”¨ã—ã¦ãã ã•ã„ã€‚</p>
<p><strong>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§å®šç¾©ã•ã‚Œã¦ã„ã¦ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹å…¨ã¦ã®å€¤ã‚’ä¾å­˜é…åˆ—ã®ä¸­ã«å…¥ã‚Œã¦ãã ã•ã„ã€‚ãã‚ŒãŒä¸€ã¤ç›®ã®æ–¹æ³•ã§ã™ã€‚</strong>ã€€<code class="language-text">count</code> ã‚’ deps ã¨ã—ã¦å…¥ã‚Œã¦ã¿ã¾ã—ã‚‡ã†ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">    <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre></div>
<p>ã“ã‚Œã§ã€ä¾å­˜é…åˆ—ã¯æ­£ã—ããªã‚Šã¾ã—ãŸã€‚<em>æœ€é©ãª</em> æ–¹æ³•ã¨ã¯è¨€ãˆã¾ã›ã‚“ãŒã€ã“ã‚ŒãŒä¸€ç•ªåˆã‚ã«ç›´ã™ã¹ãã“ã¨ã§ã™ã€‚ã“ã‚Œã§ã€ <code class="language-text">count</code> ã®å€¤ãŒå¤‰ã‚ã‚Œã°ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯å†å®Ÿè¡Œã•ã‚Œã¦ã€ <code class="language-text">setCount(count + 1)</code> ã¯ãã® render ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ <code class="language-text">count</code> ã‚’æ­£ã—ãå‚ç…§ã—ã¾ã™ã€‚</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// åˆæœŸ render æ™‚ã€state = 0</span>
<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span>
    <span class="token comment">// åˆæœŸ render æ™‚ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">        <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// setCount(count + 1)</span></span>      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="gatsby-highlight-code-line">    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// [count]</span></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// 2å›ç›®ã® render æ™‚ã€state = 1</span>
<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span>
    <span class="token comment">// 2å›ç›®ã® render æ™‚ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">        <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// setCount(count + 1)</span></span>      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="gatsby-highlight-code-line">    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// [count]</span></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ã“ã†ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦<a href="https://codesandbox.io/s/0x0mnlyq8l" target="_blank" rel="nofollow noopener noreferrer">ã“ã®å•é¡Œ</a>ã¯è§£æ±ºã•ã‚Œã¾ã™ãŒã€ <code class="language-text">count</code> ãŒå¤‰ã‚ã‚‹åº¦ã« interval ãŒ clear ã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚ã“ã‚Œã¯æœ›ã¾ã—ããªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼š</p>
<p><img src="/interval-rightish-5734271ddfa94d2d65ac6160515e0069.gif" alt="re-subscribe ã™ã‚‹ interval ã®å›³"></p>
<p><em>ï¼ˆä¾å­˜é…åˆ—ã®ä¸­ã®å€¤ãŒé•ã†ã®ã§ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’å†å®Ÿè¡Œã—ã¾ã™ã€‚ï¼‰</em></p>
<hr>
<p><strong>ã‚ˆãå¤‰ã‚ã‚‹å€¤ã‚’ãã‚‚ãã‚‚<em>å¿…è¦</em>ã¨ã—ãªã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãæ›ãˆã‚‹ã¨ã„ã†ã®ãŒã€äºŒã¤ç›®ã®æ–¹æ³•ã§ã™ã€‚</strong> ä¾å­˜é–¢ä¿‚ã«ã¤ã„ã¦å˜˜ã¯ã¤ããŸãã¯ã‚ã‚Šã¾ã›ã‚“ - ãªã®ã§ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã®ä¾å­˜ã™ã‚‹å€¤ã‚’<em>æ¸›ã‚‰ã™</em>ã®ã§ã™ã€‚</p>
<p>ä¾å­˜é…åˆ—ã®ä¸­èº«ã‚’æ¸›ã‚‰ã™æ–¹æ³•ã‚’ã¿ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p>
<hr>
<h2 id="è‡ªå¾‹çš„ãªã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹"><a href="#%E8%87%AA%E5%BE%8B%E7%9A%84%E3%81%AA%E3%82%A8%E3%83%95%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E4%BD%9C%E3%82%8B" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>è‡ªå¾‹çš„ãªã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹</h2>
<p><code class="language-text">count</code> ã®å€¤ã‚’ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‹ã‚‰å‡ºã—ãŸã„ã¨ã—ã¾ã—ã‚‡ã†ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre></div>
<p>ãã†ã™ã‚‹ã«ã¯ã€ã¾ãšãªãœ <code class="language-text">count</code> ãŒå¿…è¦ãªã®ã‹è€ƒãˆã¾ã—ã‚‡ã†ã€‚ <code class="language-text">setCount</code> ã®ä¸­ã§ã—ã‹ä½¿ã£ã¦ãªã„ã‚ˆã†ã«è¦‹ãˆã¾ã™ã€‚ã“ã®å ´åˆã ã¨ã€ <code class="language-text">count</code> ã‚’ã‚¹ã‚³ãƒ¼ãƒ—å†…ã«å«ã‚ã‚‹å¿…è¦ã¯å®Ÿã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å‰ã® state ã«åŸºã¥ã„ã¦ state ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸã„å ´åˆã¯ã€<code class="language-text">setState</code> ã®<a href="https://ja.reactjs.org/docs/hooks-reference.html#functional-updates" target="_blank" rel="nofollow noopener noreferrer">é–¢æ•°å‹ã®æ›´æ–°</a>ã‚’ä½¿ãˆã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      <span class="token function">setCount</span><span class="token punctuation">(</span>c <span class="token operator">=></span> c <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>ã“ã®ã‚ˆã†ãªã‚±ãƒ¼ã‚¹ã‚’åƒ•ã¯ã€Œä¸æ­£ãªä¾å­˜ã€ã¨å‘¼ã‚“ã§ã„ã¾ã™ã€‚ ç¢ºã‹ã«ã€ <code class="language-text">setCount(count + 1)</code> ã¨ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã«æ›¸ã„ãŸã®ã§ <code class="language-text">count</code> ã¯ä¾å­˜é…åˆ—å†…ã«å¿…è¦ãªå€¤ã§ã™ã€‚ã§ã™ãŒã€ <code class="language-text">count + 1</code> ã«å½¢æˆã—ã¦ React ã«é€ã‚Šè¿”ã™äº‹ã«ã—ã‹ <code class="language-text">count</code> ã‚’ä½¿ã£ã¦ã„ã¾ã›ã‚“ã€‚ã—ã‹ã—ã€ React ã¯ç¾åœ¨ã® <code class="language-text">count</code> ã®å€¤ã‚’ã‚‚ã†<em>çŸ¥ã£ã¦ã„ã¾ã™</em>ã€‚ <strong>ä»Šã®å€¤ãªã©é–¢ä¿‚ãªãã€ã‚„ã‚‹ã“ã¨ã¯ React ã« state ã‚’ increment ã™ã‚‹ã¨ã„ã†ã“ã¨ã‚’ä¼ãˆã‚‹ã ã‘ã§ã™ã€‚</strong></p>
<p><code class="language-text">setCount(c =&gt; c + 1)</code> ã¯ã¾ã•ã«ãã‚Œã‚’ã—ã¾ã™ã€‚ React ã« state ã‚’ã©ã®ã‚ˆã†ã«å¤‰æ›´ã™ã¹ãã‹æŒ‡ç¤ºã‚’é€ã£ã¦ã„ã‚‹ã¨è€ƒãˆã¦ãã ã•ã„ã€‚ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’<a href="/react-as-a-ui-runtime/#batching">ãƒãƒƒãƒå‡¦ç†ã—ãŸã„</a>æ™‚ãªã©ã€ä»–ã®ã‚±ãƒ¼ã‚¹ã§ã‚‚é–¢æ•°å‹ã®æ›´æ–°ã¯å½¹ã«ç«‹ã¡ã¾ã™ã€‚</p>
<p><strong>æˆ‘ã€…ã¯ä½•ã‚‚ä¸æ­£ãªã“ã¨ã¯ã—ã¦ã„ã¾ã›ã‚“ã€‚å®Ÿéš›ã«ä¾å­˜é…åˆ—ã‹ã‚‰æŠœãå‡ºã™ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«<em>å®Ÿè£…ã—ãŸ</em>ã ã‘ã§ã™ã€‚æˆ‘ã€…ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ã‚‚ã† render scope å†…ã® <code class="language-text">counter</code> ã®å€¤ã‚’å‚ç…§ã™ã‚‹ã“ã¨ã¯ãªããªã‚Šã¾ã—ãŸï¼š</strong></p>
<p><a href="/interval-right-f128ad20c28317ed27a3cb68197fc906.gif">å‹•ã interval ã®å›³</a></p>
<p><em>ï¼ˆä¾å­˜é…åˆ—ã®ä¸­ã®å€¤ãŒåŒã˜ãªã®ã§ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚ï¼‰</em></p>
<p>ä¸€åº¦<a href="https://codesandbox.io/s/q3181xz1pj" target="_blank" rel="nofollow noopener noreferrer">è©¦ã—ã¦ã¿ã¦ãã ã•ã„</a>ã€‚</p>
<p>ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ä¸€åº¦ã—ã‹å®Ÿè¡Œã•ã‚Œãªã„ã®ã«ã‚‚é–¢ã‚ã‚‰ãšã€åˆæœŸ render ã«ç´ã¥ã„ã¦ã„ã‚‹ interval ã® callback ã¯ <code class="language-text">c =&gt; c + 1</code> ã®æŒ‡ç¤ºã‚’ interval ãŒç™ºç«ã™ã‚‹åº¦ã«é€ã‚‹ã“ã¨ãŒå®¹æ˜“ã«ã§ãã¾ã™ã€‚ç¾åœ¨ã® <code class="language-text">counter</code> ã® state ã‚’çŸ¥ã‚‹å¿…è¦ãŒãªããªã£ãŸã®ã§ã™ã€‚ãªãœãªã‚‰ã€ React ãŒã‚‚ã†çŸ¥ã£ã¦ã„ã‚‹ã‹ã‚‰ã€‚</p>
<h2 id="é–¢æ•°ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¨-google-docs"><a href="#%E9%96%A2%E6%95%B0%E3%82%A2%E3%83%83%E3%83%97%E3%83%87%E3%83%BC%E3%83%88%E3%81%A8-google-docs" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>é–¢æ•°ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¨ Google Docs</h2>
<p>ã‚·ãƒ³ã‚¯ãƒ­ãŒã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹ã¨è©±ã—ãŸã“ã¨ã‚’è¦šãˆã¦ã„ã¾ã™ã‹ï¼Ÿã‚·ãƒ³ã‚¯ãƒ­ã®èˆˆå‘³æ·±ã„ç‚¹ã¨ã—ã¦ã€ã‚·ã‚¹ãƒ†ãƒ æ„Ÿã®æƒ…å ±ä¼é”ã¯ãªã‚‹ã¹ããã‚Œãã‚Œã®çŠ¶æ…‹ã¨éš”é›¢ã•ã‚Œã¦è¡Œã‚ã‚Œã‚‹ã¹ãã¨ã„ã†ã®ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€Google Docs ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç·¨é›†ã™ã‚‹éš›ã€<em>å…¨ã¦</em>ã®ãƒšãƒ¼ã‚¸ã‚’ã‚µãƒ¼ãƒãƒ¼ã«é€ã£ã¦ã„ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãã‚Œã¯éåŠ¹ç‡ã§ã‚ã‚‹ã‹ã‚‰ã§ã™ã€‚ä»£ã‚ã‚Šã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å‹•ãã‚’è¡¨ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’é€ã‚‹ã®ã§ã™ã€‚</p>
<p>æˆ‘ã€…ã®ã‚±ãƒ¼ã‚¹ã¯å°‘ã—é•ã„ã¾ã™ãŒã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®æŒ™å‹•ã¯ã»ã¼åŒã˜ã‚ˆã†ãªåŸç†ã§ã™ã€‚<strong>å¿…è¦æœ€ä½é™ã®æƒ…å ±ã‚’ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã‹ã‚‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«é€ã‚‹ã“ã¨ãŒæœ€é©åŒ–ã®åŠ©ã‘ã«ãªã‚Šã¾ã™ã€‚</strong> <code class="language-text">setCount(c =&gt; c + 1)</code> ã®ã‚ˆã†ãªé–¢æ•°ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå‹ã¯ã€ <code class="language-text">setCount(count + 1)</code> ã®ã‚ˆã†ã«ä¸å¿…è¦ãª state ã¨ç´ã¥ã„ã¦ã„ãªã„ã®ã§ä¼é”ã™ã‚‹æƒ…å ±é‡ã¯åœ§å€’çš„ã«å°‘ãªã„ã®ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¾ã—ã¦ã„ã‚‹ã ã‘ã§ã™ï¼ˆå¢—åŠ ï¼‰ã€‚å¿…è¦æœ€ä½é™ã® state ã‚’è¦‹å‡ºã™ã®ã¯ React è‡ªä½“ã‚’ç†è§£ã™ã‚‹ã®ã«é‡è¦ã§ã€ã“ã‚Œã¯ãã‚Œã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆç‰ˆã¨è¨€ãˆã‚‹ã§ã—ã‚‡ã†ã€‚</p>
<p>çµæœã‚ˆã‚Š<em>æ„å›³</em>ã‚’ç¬¦å·åŒ–ã™ã‚‹è¡Œç‚ºã¯ã€Google Docs ãŒå¤šäººæ•°ç·¨é›†ã‚’å¯èƒ½ã¨ã—ãŸæ–¹æ³•ã¨ä¼¼ã¦ã„ã¾ã™ã€‚å°‘ã—è¨€ã„éãã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€é–¢æ•°ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚‚ React ã®ä¸Šã§ã¯åŒã˜ã‚ˆã†ãªæŒ™å‹•ã‚’ã—ã¦ã„ã¾ã™ã€‚è¤‡æ•°ã®ã‚½ãƒ¼ã‚¹ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã‚„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãªã©ï¼‰ã‹ã‚‰ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒç¢ºå®Ÿã«ãƒãƒƒãƒé©ç”¨ã•ã‚Œã¦ã€ã‹ã¤äºˆæ¸¬çš„ã§ã‚ã‚‹ã®ã‚’ä¿è¨¼ã—ã¦ãã‚Œã¾ã™ã€‚</p>
<p><strong>ã§ã™ãŒã€<code class="language-text">setCount(c =&gt; c + 1)</code> ã‚‚ãã“ã¾ã§åŠ¹ç‡çš„ã¨ã¯è¨€ãˆãªã„ã§ã™ã€‚</strong> ã§ãã‚‹ã“ã¨ãŒåˆ¶é™ã•ã‚Œã¦ã„ã‚‹ã®ã¨ã€å°‘ã—ä¸è‡ªç„¶ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€å¤‰æ•°ãŒäºŒã¤å®šç¾©ã•ã‚Œã¦ã„ã¦ãã‚Œãã‚ŒãŒãŠäº’ã„ã®å€¤ã«ä¾å­˜ã—ã¦ã„ãŸã‚Šã€ <code class="language-text">prop</code> ã®å€¤ã‹ã‚‰æ¬¡ã® <code class="language-text">state</code> ã‚’è¨ˆç®—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯ã†ã¾ãã„ãã¾ã›ã‚“ã€‚ã§ã™ãŒã€å¹¸ã„ã«ã‚‚ <code class="language-text">setCount(c =&gt; c + 1)</code> ã¯ã‚‚ã£ã¨ãƒ‘ãƒ¯ãƒ•ãƒ«ãªä»£æ›¿æ‰‹æ®µãŒã‚ã‚‹ã®ã§ã™ã€‚ãã‚ŒãŒ <code class="language-text">useReducer</code> ã§ã™ã€‚</p>
<h2 id="ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‹ã‚‰ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’åˆ†é›¢ã™ã‚‹"><a href="#%E3%82%A2%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%8B%E3%82%89%E3%82%A2%E3%83%83%E3%83%97%E3%83%87%E3%83%BC%E3%83%88%E3%82%92%E5%88%86%E9%9B%A2%E3%81%99%E3%82%8B" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‹ã‚‰ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’åˆ†é›¢ã™ã‚‹</h2>
<p>å…ˆã»ã©ã®ä¾‹ã‚’å°‘ã—å¤‰ãˆã¦ã€<code class="language-text">count</code> ã¨ <code class="language-text">step</code> ã®äºŒã¤ã® <code class="language-text">state</code> å¤‰æ•°ã‚’æŒã£ã¦ã„ã‚‹ã“ã¨ã«ã—ã¾ã—ã‚‡ã†ã€‚ <code class="language-text">step</code> ã®ã‚¤ãƒ³ãƒ—ãƒƒãƒˆã«ã‚ˆã£ã¦æˆ‘ã€…ã® <code class="language-text">interval</code> ã¯ <code class="language-text">count</code> ã®å€¤ã‚’å¢—ã‚„ã—ã¦ã„ãã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>step<span class="token punctuation">,</span> setStep<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      <span class="token function">setCount</span><span class="token punctuation">(</span>c <span class="token operator">=></span> c <span class="token operator">+</span> step<span class="token punctuation">)</span><span class="token punctuation">;</span></span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>step<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text"></span>
<span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>step<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>e <span class="token operator">=></span> <span class="token function">setStep</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text"></span>
<span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>(ãƒ‡ãƒ¢ã¯<a href="https://codesandbox.io/s/zxn70rnkx" target="_blank" rel="nofollow noopener noreferrer">ã“ã¡ã‚‰</a>ã€‚)</p>
<p>ç§ãŸã¡ã¯<strong>ä½•ã‚‚ä¸æ­£ãªã“ã¨ã¯ã—ã¦ã„ã¾ã›ã‚“ã€‚</strong> <code class="language-text">step</code> ã‚’ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã§ä½¿ã„å§‹ã‚ãŸãŸã‚ã€ä¾å­˜é…åˆ—ã®ä¸­ã«è¶³ã—ã¾ã—ãŸã€‚ãªã®ã§ã€ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã¡ã‚ƒã‚“ã¨å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚</p>
<p>ä»Šã®ä»•æ§˜ã®ã¾ã¾ã ã¨ã€ <code class="language-text">step</code> ã¯ä¾å­˜é…åˆ—ã®ä¸­ã«ã‚ã‚‹ã®ã§ <code class="language-text">step</code> ãŒå¤‰ã‚ã‚Œã° <code class="language-text">interval</code> ã¯ãƒªã‚¹ã‚¿ãƒ¼ãƒˆã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚ãã—ã¦ã»ã¨ã‚“ã©ã®å ´åˆã€ãã‚Œã¯æ±‚ã‚ã¦ã„ã‚‹æŒ™å‹•ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ã‚¯ãƒªã‚¢ã—ã¦æ–°ã—ã„ <code class="language-text">interval</code> ã‚’ç«‹ã¦ã‚‹ã®ã¯å•é¡Œã‚ã‚Šã¾ã›ã‚“ã—ã€æ­£å½“ãªç†ç”±ãªããã‚Œã‚’æ‹’ã‚€å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
<p>ã§ã™ãŒã€ <code class="language-text">step</code> ãŒå¤‰ã‚ã£ã¦ã‚‚ <code class="language-text">interval</code> ã®æ™‚é–“ã‚’æ­¢ã‚ãŸããªã„ã¨ã—ã¾ã—ã‚‡ã†ã€‚ã©ã†ã—ãŸã‚‰ <code class="language-text">step</code> ã‚’ä¾å­˜é…åˆ—ã‹ã‚‰å–ã‚Šé™¤ã‘ã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p>
<p><strong>ã‚‚ã—å¤‰æ•°ãŒã‚‚ã†ä¸€ã¤ã®å¤‰æ•°ã®ç¾åœ¨å€¤ã«ä¾å­˜ã—ã¦ã—ã¾ã£ã¦ã„ã‚‹å ´åˆã¯ã€ãã‚Œã‚‰ã‚’ <code class="language-text">useReducer</code> ã«ç½®ãæ›ãˆãŸæ–¹ãŒã„ã„ã§ã—ã‚‡ã†ã€‚</strong></p>
<p>ã‚‚ã— <code class="language-text">setSomething(something =&gt; ...)</code> ã®ã‚ˆã†ãªæ›¸ãæ–¹ã‚’ã—ã¦ã„ã‚‹ã®ã§ã‚ã‚Œã°ã€ ä»£ã‚ã‚Šã« <code class="language-text">reducer</code> ã‚’ä½¿ã†ã“ã¨ã‚’è€ƒãˆãŸæ–¹ãŒã„ã„ã§ã—ã‚‡ã†ã€‚ <code class="language-text">reducer</code> ã¯<strong>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§èµ·ã“ã£ãŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¨ãã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«å¿œã˜ã¦ state ãŒã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã‚‹é–¢ä¿‚æ€§ã‚’åˆ†é›¢ã—ã¦ãã‚Œã¾ã™ã€‚</strong></p>
<p>ä¾å­˜é…åˆ—ã®ä¸­ã® <code class="language-text">step</code> ã‚’ <code class="language-text">dispatch</code> ã«å¤‰ãˆã¦ã¿ã¾ã—ã‚‡ã†ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="gatsby-highlight-code-line"><span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialState<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token keyword">const</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> step <span class="token punctuation">}</span> <span class="token operator">=</span> state<span class="token punctuation">;</span>

<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'tick'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// etCount(c => c + step) ã®ä»£ã‚ã‚Š;</span></span>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>dispatch<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre></div>
<p>(ãƒ‡ãƒ¢ã¯<a href="https://codesandbox.io/s/xzr480k0np" target="_blank" rel="nofollow noopener noreferrer">ã“ã¡ã‚‰</a>ã€‚)</p>
<p>ãªãœã“ã¡ã‚‰ã®æ–¹æ³•ãŒè‰¯ã„ã®ã‹ç–‘å•ã«æ€ã‚ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚<strong>React ã¯ <code class="language-text">dispatch</code> é–¢æ•°ãŒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ©ã‚¤ãƒ•ã‚¿ã‚¤ãƒ ã®é–“ã¯å¸¸ã« constant ã§ã‚ã‚‹ã“ã¨ã‚’ä¿è¨¼ã—ã¦ãã‚Œã¾ã™ã€‚ãªã®ã§ã€ä¸Šè¨˜ã®ä¾‹ã§ã¯ interval ã«å†ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</strong></p>
<p>å•é¡Œã‚’è§£æ±ºã—ã¾ã—ãŸï¼</p>
<p><em>ï¼ˆ<code class="language-text">dispatch</code> ã€ <code class="language-text">setState</code> ã‚„ <code class="language-text">useRef</code> ãªã©ã®ã‚³ãƒ³ãƒ†ãƒŠå¤‰æ•°ã¯ä¾å­˜é…åˆ—ã«å…¥ã‚Œã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãªãœã‹ã¨è¨€ã†ã¨ã€ static ã§ã‚ã‚‹ã¨ã„ã†ã“ã¨ã¯ React ãŒä¿è¨¼ã—ã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚ã§ã™ãŒå…¥ã‚Œã‚‹ã“ã¨ã«é–¢ã—ã¦ã¯ãªã‚“ã‚‰å•é¡Œã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ï¼‰</em></p>
<p>ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã§ <code class="language-text">state</code> ã‚’èª­ã‚€ä»£ã‚ã‚Šã«ã€ <em>ä½•ãŒèµ·ã“ã£ãŸã‹</em>ã®æƒ…å ±ã‚’å«ã‚“ã ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ <code class="language-text">dispatch</code> ã—ã¾ã™ã€‚ã“ã†ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€ <code class="language-text">step</code> å¤‰æ•°ã¨ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’åˆ†é›¢ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ã©ã®ã‚ˆã†ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ã‹ã¯èˆˆå‘³ã‚’æŒãŸãšã€<em>ä½•ãŒèµ·ã“ã£ãŸã‹</em>ã ã‘æ•™ãˆã¦ãã‚Œã¾ã™ã€‚ãã—ã¦ <code class="language-text">reducer</code> ã¯ãã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä¸€å…ƒåŒ–ã—ã¦ãã‚Œã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span>
  count<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  step<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> step <span class="token punctuation">}</span> <span class="token operator">=</span> state<span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'tick'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> count <span class="token operator">+</span> step<span class="token punctuation">,</span> step <span class="token punctuation">}</span><span class="token punctuation">;</span></span>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'step'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> step<span class="token punctuation">:</span> action<span class="token punctuation">.</span>step <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>(å…ˆã»ã©ã®ãƒ‡ãƒ¢ã‚’è¦‹éã”ã—ã¦ã—ã¾ã£ãŸå ´åˆã¯<a href="https://codesandbox.io/s/xzr480k0np" target="_blank" rel="nofollow noopener noreferrer">ã“ã¡ã‚‰ã®ãƒ‡ãƒ¢ã‚’ã”è¦§ãã ã•ã„ã€‚</a></p>
<h2 id="ãªãœ-usereducer-ã¯-react-hooks-ã®ãƒãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ‰ãªã®ã‹"><a href="#%E3%81%AA%E3%81%9C-usereducer-%E3%81%AF-react-hooks-%E3%81%AE%E3%83%81%E3%83%BC%E3%83%88%E3%83%A2%E3%83%BC%E3%83%89%E3%81%AA%E3%81%AE%E3%81%8B" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ãªãœ <code class="language-text">useReducer</code> ã¯ React Hooks ã®ãƒãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ‰ãªã®ã‹</h2>
<p><code class="language-text">state</code> ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒä¸€ã¤å‰ã‚„åˆ¥ã® <code class="language-text">state</code> å¤‰æ•°ã«ä¾å­˜ã—ã¦ã‚‹å ´åˆã«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®ä¾å­˜é…åˆ—ã‹ã‚‰å–ã‚Šå‡ºã™æ–¹æ³•ã‚’å­¦ã³ã¾ã—ãŸã€‚ <strong>ã§ã™ãŒã€æ¬¡ã® <code class="language-text">state</code> ã‚’è¨ˆç®—ã™ã‚‹ã«ã‚ãŸã£ã¦ <code class="language-text">props</code> ãŒå¿…è¦ãªå ´åˆã¯ã©ã†ã§ã—ã‚‡ã†ï¼Ÿ</strong> ä¾‹ãˆã°ã€APIãŒ <code class="language-text">&lt;Counter step={1}&gt;</code> ã ã¨ã—ã¾ã—ã‚‡ã†ã€‚ã“ã®å ´åˆã ã¨ã€ <code class="language-text">props.step</code> ã‚’ä¾å­˜é…åˆ—ã«å…¥ã‚Œã‚‹ä»¥å¤–ã®æ‰‹æ®µã¯ãªã„ã¨æ€ã„ã¾ã™ã‚ˆã­ã€‚</p>
<p>ã„ãˆã€å–ã‚Šå‡ºã™æ–¹æ³•ã¯ã‚ã‚Šã¾ã™ï¼ <em><code class="language-text">reducer</code> è‡ªä½“</em>ã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã«å…¥ã‚Œã¦ <code class="language-text">props</code> ã‚’èª­ã‚€ã‚ˆã†ã«ã—ãŸã‚‰ã„ã„ã®ã§ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="gatsby-highlight-code-line"><span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> step <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'tick'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      <span class="token keyword">return</span> state <span class="token operator">+</span> step<span class="token punctuation">;</span></span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'tick'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>dispatch<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯å¤šå°‘ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã«å½±éŸ¿ã‚’åŠã¼ã—ã¾ã™ãŒã€ <code class="language-text">reducer</code> å†…ã§ <code class="language-text">props</code> ã‚’å‚ç…§ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã™ã€‚ï¼ˆãƒ‡ãƒ¢ã¯<a href="https://codesandbox.io/s/7ypm405o8q" target="_blank" rel="nofollow noopener noreferrer">ã“ã¡ã‚‰</a>ã€‚ï¼‰</p>
<p><strong>ã“ã®å ´åˆã§ã‚‚ã€ <code class="language-text">dispatch</code> ã¯å† render ã•ã‚Œã¦ã‚‚ä¸å¤‰ã§ã‚ã‚‹ã“ã¨ã¯ä¿è¨¼ã•ã‚Œã¦ã„ã¾ã™ã€‚</strong> ãªã®ã§ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®ä¾å­˜é…åˆ—ã‹ã‚‰å–ã‚Šé™¤ããŸã„å ´åˆã¯å–ã‚Šé™¤ãã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ãªãœã‹ã¨ã„ã†ã¨ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’å†å®Ÿè¡Œã™ã‚‹ã“ã¨ã¯ãªã„ã‹ã‚‰ã§ã™ã€‚</p>
<p>ã©ã†ã—ã¦ reducer ã¯åˆ¥ã® render ã«å±ã—ã¦ã„ã‚‹ props ã‚’èª­ã‚€ã“ã¨ãŒã§ãã‚‹ã®ï¼Ÿã¨æ€ã‚ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚ãªãœã‹ã¨è¨€ã†ã¨ã€ <code class="language-text">dispatch</code> ã‚’ã™ã‚‹æ™‚ã« React ã¯ãã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã ã‘ã‚’è¦šãˆã¦ã€æ¬¡ã® render æ™‚ã« reducer ã‚’å‘¼ã³ã¾ã™ã€‚ãã®æ™‚ã«ã¯æœ€æ–°ã® props ãŒã‚¹ã‚³ãƒ¼ãƒ—å†…ã«å­˜åœ¨ã—ã¦ãŠã‚Šã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®ä¸­ã‹ã©ã†ã‹ã¨ã„ã†ã®ã¯é–¢ä¿‚ãªããªã‚Šã¾ã™ã€‚</p>
<p><strong>ã“ã‚Œã‚‰ã®ç†ç”±ã‹ã‚‰ç§ã¯ <code class="language-text">useReducer</code> ã‚’ React ã®<em>ãƒãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ‰</em> ã¨å‘¼ã‚“ã§ã„ã¾ã™ã€‚ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãƒ­ã‚¸ãƒƒã‚¯ã¨ãã‚Œã‚‰ã‚’å®£è¨€çš„ã«è¨˜è¿°ã™ã‚‹è¡¨ç¾ã‚’åˆ†é›¢ã—ã¦ãã‚Œã¾ã™ã€‚ã“ã†ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€ä¸å¿…è¦ãªä¾å­˜å¤‰æ•°ã‚’ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‹ã‚‰å–ã‚Šé™¤ãã“ã¨ãŒã§ãã€å¿…è¦æœ€ä½é™ã® render ã§æ¸ˆã‚€ã®ã§ã™ã€‚</strong></p>
<h2 id="ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã«é–¢æ•°ã‚’å…¥ã‚Œã‚‹"><a href="#%E3%82%A8%E3%83%95%E3%82%A7%E3%82%AF%E3%83%88%E5%86%85%E3%81%AB%E9%96%A2%E6%95%B0%E3%82%92%E5%85%A5%E3%82%8C%E3%82%8B" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã«é–¢æ•°ã‚’å…¥ã‚Œã‚‹</h2>
<p>é–¢æ•°ã¯ä¾å­˜é…åˆ—ã«å…¥ã‚Œã‚‹å¿…è¦ãŒãªã„ã¨æ€ã†ã®ã¯ã‚ˆãã‚ã‚‹é–“é•ã„ã§ã™ã€‚ä¾‹ãˆã°ã€ã“ã®ä¾‹ã¯ã¾ã¨ã‚‚ã«å‹•ãã‚ˆã†ã«è¦‹ãˆã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">SearchResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> setData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> hits<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">axios</span><span class="token punctuation">(</span>
      <span class="token string">'https://hn.algolia.com/api/v1/search?query=react'</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setData</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ã“ã‚Œã§ã‚‚ã„ã„ï¼Ÿ</span></span>
  <span class="token comment">// ...</span></code></pre></div>
<p><em>(<a href="https://codesandbox.io/s/8j4ykjyv0" target="_blank" rel="nofollow noopener noreferrer">ã“ã®ä¾‹</a> ã¯ Robin Wieruch ã®ç´ æ™´ã‚‰ã—ã„è¨˜äº‹ã‹ã‚‰æŠœç²‹ã—ã¦ã„ã¾ã™ â€” <a href="https://www.robinwieruch.de/react-hooks-fetch-data/" target="_blank" rel="nofollow noopener noreferrer">è©³ã—ãã¯ã“ã¡ã‚‰</a>!)</em></p>
<p>å…ˆã«è¨€ã£ã¦ãŠãã¨ã€ã“ã®ä¾‹ã¯ã¡ã‚ƒã‚“ã¨å‹•ãã¾ã™ã€‚<strong>ã§ã™ãŒã€ãƒ­ãƒ¼ã‚«ãƒ«é–¢æ•°ã‚’ä¾å­˜é…åˆ—ã«å«ã‚ãªã„ä¸€ç•ªã®å•é¡Œã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒè‚¥å¤§åŒ–ã—ã¦ã„ãã¨å…¨ã¦ã®ã‚±ãƒ¼ã‚¹ã‚’ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã—ã¦ã„ã‚‹ã‹åˆ†ã‹ã‚‰ãªããªã‚‹ã¨ã„ã†ç‚¹ã§ã™ã€‚</strong></p>
<p>ä¾‹ãˆã°ã€ä¸‹è¨˜ã®ã‚³ãƒ¼ãƒ‰ã®ã‚ˆã†ã«ã‚³ãƒ¼ãƒ‰ãŒåˆ†é›¢ã•ã‚Œã¦ã„ã¦ã€ã•ã‚‰ã«ãã‚Œãã‚Œã®é–¢æ•°ãŒäº”å€å¤šã„ã¨æƒ³åƒã—ã¦è¦‹ã¦ãã ã•ã„ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">SearchResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ã“ã®é–¢æ•°ãŒã“ã‚Œã‚ˆã‚Šå¤šã„ã¨æƒ³åƒã—ã¦ãã ã•ã„</span>
  <span class="token keyword">function</span> <span class="token function">getFetchUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'https://hn.algolia.com/api/v1/search?query=react'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ã“ã®é–¢æ•°ã‚‚ã€ã“ã‚Œã‚ˆã‚Šå¤šã„ã¨æƒ³åƒã—ã¦ãã ã•ã„</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token function">getFetchUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setData</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>æ¬¡ã«ã€ã©ã¡ã‚‰ã‹ã®é–¢æ•°ã« <code class="language-text">state</code> ã‹ <code class="language-text">prop</code> ã‚’ç”¨ã„ã‚‹ã¨ã—ã¾ã—ã‚‡ã†ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">SearchResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>query<span class="token punctuation">,</span> setQuery<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ã“ã®é–¢æ•°ãŒã“ã‚Œã‚ˆã‚Šå¤šã„ã¨æƒ³åƒã—ã¦ãã ã•ã„</span>
  <span class="token keyword">function</span> <span class="token function">getFetchUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">    <span class="token keyword">return</span> <span class="token string">'https://hn.algolia.com/api/v1/search?query='</span> <span class="token operator">+</span> query<span class="token punctuation">;</span></span>  <span class="token punctuation">}</span>

  <span class="token comment">// ã“ã®é–¢æ•°ã‚‚ã€ã“ã‚Œã‚ˆã‚Šå¤šã„ã¨æƒ³åƒã—ã¦ãã ã•ã„</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token function">getFetchUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setData</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ã“ã®å ´åˆã€ã‚‚ã—é–¢æ•°ãŒå‘¼ã°ã‚Œã¦ã„ã‚‹ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®ä¾å­˜é…åˆ—ã®ä¸­èº«ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—å¿˜ã‚Œã‚‹ã¨ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ <code class="language-text">prop</code> ã‚„ <code class="language-text">state</code> ã‹ã‚‰ã®å¤‰æ›´ã‚’ã‚·ãƒ³ã‚¯ãƒ­ã§ãã¾ã›ã‚“ã€‚ãã‚Œã¯ã‚ˆããªã„ã§ã™ã­ã€‚</p>
<p>ã§ã™ãŒã€é‹ã‚ˆãã“ã®å•é¡Œã«ã¯ç°¡å˜ãªè§£æ±ºæ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚ <strong>ã‚‚ã—ãã‚Œã‚‰ã®é–¢æ•°ã¯ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã§ã—ã‹å‘¼ã°ã‚Œã¦ã„ãªã„ã®ã§ã‚ã‚Œã°ã€ç›´æ¥ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã«ç§»ã—ã¾ã—ã‚‡ã†ï¼š</strong></p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">SearchResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">    <span class="token comment">// é–¢æ•°å®šç¾©ã‚’ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã«ç§»ã—ã¾ã—ãŸ</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">function</span> <span class="token function">getFetchUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      <span class="token keyword">return</span> <span class="token string">'https://hn.algolia.com/api/v1/search?query=react'</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line"></span><span class="gatsby-highlight-code-line">    <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token function">getFetchUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">      <span class="token function">setData</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span></span>
    <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ… ä¾å­˜é…åˆ—ã¯ã‚ªãƒƒã‚±ãƒ¼</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>(<a href="https://codesandbox.io/s/04kp3jwwql" target="_blank" rel="nofollow noopener noreferrer">ãƒ‡ãƒ¢ã¯ã“ã¡ã‚‰</a>.)</p>
<p>ã“ã®æ–¹æ³•ã‚’ç”¨ã„ã‚‹åˆ©ç‚¹ã¯ãªã‚“ã§ã—ã‚‡ã†ã‹ï¼Ÿã‚‚ã†ä¾å­˜é–¢ä¿‚ã«ã¤ã„ã¦é–¢æ•°ã‚’ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æˆ‘ã€…ã®ä¾å­˜é…åˆ—ã¯å˜˜ã‚’ã¤ã„ã¦ã„ã¾ã›ã‚“ï¼š <strong>æ­£çœŸæ­£éŠ˜ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå¤–ã‹ã‚‰ä½•ã‚‚ç”¨ã„ã¦ãªã„ã‹ã‚‰ã§ã™ã€‚</strong></p>
<p>ã‚‚ã—å¾Œã»ã© <code class="language-text">getFetchUrl</code> ã‚’ç·¨é›†ã—ã¦ <code class="language-text">query</code> ã® <code class="language-text">state</code> ã‚’ç”¨ã„ã‚‹ã“ã¨ãŒã‚ã‚Œã°ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®ä¸­ã§ç·¨é›†ã—ã¦ã„ã‚‹ã®ã«æ°—ã¥ãã§ã—ã‚‡ã† - ãã—ã¦ã€ <code class="language-text">query</code> ã‚’ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®ä¾å­˜é…åˆ—ã«åŠ ãˆã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã‚‚ã‚ã‹ã‚‹ã¯ãšã§ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">SearchResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>query<span class="token punctuation">,</span> setQuery<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">getFetchUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      <span class="token keyword">return</span> <span class="token string">'https://hn.algolia.com/api/v1/search?query='</span> <span class="token operator">+</span> query<span class="token punctuation">;</span></span>    <span class="token punctuation">}</span>

    <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">axios</span><span class="token punctuation">(</span><span class="token function">getFetchUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setData</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>query<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ… ä¾å­˜é…åˆ—ã¯ã‚ªãƒƒã‚±ãƒ¼</span></span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>(ãƒ‡ãƒ¢ã¯<a href="https://codesandbox.io/s/pwm32zx7z7" target="_blank" rel="nofollow noopener noreferrer">ã“ã¡ã‚‰</a>.)</p>
<p>ä¾å­˜é–¢ä¿‚ã‚’è¶³ã™ã“ã¨ã«ã‚ˆã£ã¦ã€React ã‚’ãªã ã‚ã‚‹ã‚ˆã†ã«æ›¸ãã ã‘ã§ã¯ãªãã€ã‚¯ã‚¨ãƒªãƒ¼ãŒå¤‰ã‚ã‚Œã°ãƒ‡ãƒ¼ã‚¿ã‚’å†å–å¾—ã™ã‚‹ã¨ã„ã†ä¸€é€£ã® <em>ç†å±ˆãŒé€šã£ãŸ</em> ãƒ•ãƒ­ãƒ¼ã«ãªã‚Šã¾ã™ã€‚ <strong><code class="language-text">useEffect</code> ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®å¤‰æ›´ã¨ãã‚Œã«ä¼´ã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãŒã©ã®ã‚ˆã†ã«ã‚·ãƒ³ã‚¯ãƒ­ã™ã‚‹ã‹ã‚’å¼·åˆ¶çš„ã«æ°—ã¥ã‹ã›ã¦ãã‚Œã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒã‚°ã‚’è¸ã‚“ã§ã‹ã‚‰ã‚„ã£ã¨æ°—ä»˜ã„ãŸã‚Šã™ã‚‹å‰ã«ã€‚</strong> </p>
<p><code class="language-text">eslint-plugin-react-hooks</code> ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã® <code class="language-text">exhaustive-deps</code> lint ãƒ«ãƒ¼ãƒ«ã®ãŠã‹ã’ã§ã€ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã«å…¥åŠ›ã™ã‚‹ã¨åŒæ™‚ã«<a href="https://github.com/facebook/react/issues/14920" target="_blank" rel="nofollow noopener noreferrer">ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’åˆ†æã—ã¦</a>ã©ã®ä¾å­˜é–¢ä¿‚ãŒæ¬ ã‘ã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã—ã¦ãã‚Œã¾ã™ã€‚è¨€ã„æ›ãˆã‚‹ã¨ã€ãƒã‚·ãƒ³ãŒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã©ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å¤‰æ›´ãŒæ­£ã—ããƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã•ã‚Œã¦ã„ãªã„ã‹ãƒã‚§ãƒƒã‚¯ã—ã¦ãã‚Œã¾ã™ã€‚</p>
<p><img src="/exhaustive-deps-04a90dcbacb01105d634964880ebed19.gif" alt="lint ãƒ«ãƒ¼ãƒ«ã®gif"></p>
<p>ç´ æ™´ã‚‰ã—ã„ã§ã™ã­ã€‚</p>
<h2 id="ã§ã‚‚ã€ã“ã®é–¢æ•°ã¯ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã«å…¥ã‚Œã‚‰ã‚Œãªã„"><a href="#%E3%81%A7%E3%82%82%E3%80%81%E3%81%93%E3%81%AE%E9%96%A2%E6%95%B0%E3%81%AF%E3%82%A8%E3%83%95%E3%82%A7%E3%82%AF%E3%83%88%E5%86%85%E3%81%AB%E5%85%A5%E3%82%8C%E3%82%89%E3%82%8C%E3%81%AA%E3%81%84" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ã§ã‚‚ã€ã“ã®é–¢æ•°ã¯ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã«å…¥ã‚Œã‚‰ã‚Œãªã„</h2>
<p>é–¢æ•°ã‚’ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã«ç§»ã›ãªã„ã“ã¨ã‚‚æ™‚æŠ˜èµ·ã“ã‚‹ã§ã—ã‚‡ã†ã€‚ä¾‹ãˆã°ã€è¤‡æ•°ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã§åŒã˜é–¢æ•°ã‚’å‘¼ã‚“ã§ãŠã‚Šã€ãã‚Œã‚’ã‚³ãƒ”ãƒšã—ãŸããªã„æ™‚ãªã©ã€‚ã‚ã‚‹ã„ã¯ã€é–¢æ•°è‡ªä½“ãŒ <code class="language-text">prop</code> ã¨ã—ã¦æ¸¡ã•ã‚ŒãŸã‚Šã€‚</p>
<p>ã“ã‚Œã‚‰ã®å ´åˆã¯ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®ä¾å­˜é–¢ä¿‚ã‚’ç„¡è¦–ã—ã¦ã‚‚è‰¯ã„ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿåƒ•ã¯é•ã†ã¨æ€ã„ã¾ã™ã€‚ã‚‚ã†ä¸€åº¦è¨€ã„ã¾ã™ãŒã€<strong>ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ä¾å­˜é–¢ä¿‚ã«ã¤ã„ã¦å˜˜ã‚’ã¤ã„ã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚</strong> ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ã‚ˆã‚ŠåŠ¹ç‡çš„ãªè§£æ±ºæ–¹æ³•ã¯ã‚ã‚Šã¾ã™ã€‚ã€Œé–¢æ•°ã¯å¤‰ã‚ã‚‰ãªã„ã€ã¨ã‚ˆãèãã¾ã™ãŒã€ã“ã‚Œã¯èª¤è§£ã§ã™ã€‚ã“ã®è¨˜äº‹ã‚’èª­ã‚“ã§ãã‚ŒãŸã‚‰ã‚ã‹ã‚‹ã¨æ€ã„ã¾ã™ãŒã€ã€Œé–¢æ•°ãŒå¤‰ã‚ã‚‰ãªã„ã€ã»ã©çœŸå®Ÿã‹ã‚‰é ã„äº‹å®Ÿã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãªãœãªã‚‰ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹é–¢æ•°ã¯æ¯ <code class="language-text">render</code> æ™‚ã«å¤‰ã‚ã‚‹ã®ã§ã™ã‹ã‚‰ã€‚</p>
<p>ã§ã™ãŒã€ãã‚Œã¯ãã‚Œã§å•é¡Œã‚’å¼•ãèµ·ã“ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€äºŒã¤ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãŒ <code class="language-text">getFetchUrl</code> ã‚’å‘¼ã¶ã¨ã—ã¾ã—ã‚‡ã†ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">SearchResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">getFetchUrl</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'https://hn.algolia.com/api/v1/search?query='</span> <span class="token operator">+</span> query<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">getFetchUrl</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ... ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚§ãƒƒãƒã—ã¦ä½•ã‹ã™ã‚‹</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ğŸ”´ getFetchUrlãŒä¾å­˜é…åˆ—ã‹ã‚‰æŠœã‘ã¦ã‚‹</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">getFetchUrl</span><span class="token punctuation">(</span><span class="token string">'redux'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ... ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚§ãƒƒãƒã—ã¦ä½•ã‹ã™ã‚‹</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ğŸ”´ getFetchUrlãŒä¾å­˜é…åˆ—ã‹ã‚‰æŠœã‘ã¦ã‚‹</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ã“ã®å ´åˆã€ <code class="language-text">getFetchUrl</code> ã‚’ã©ã¡ã‚‰ã‹ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã«å®šç¾©ã—ã¦ã—ã¾ã†ã¨ã€å…±é€šãƒ­ã‚¸ãƒƒã‚¯ã‚’ä½¿ç”¨ã§ããªããªã‚‹ãŸã‚å…¥ã‚ŒãŸããªã„ã§ã—ã‚‡ã†ã€‚</p>
<p>ã§ã™ãŒã€é€†ã«ä¾å­˜é–¢ä¿‚ã«å¿ å®Ÿã ã¨ã€ãã‚Œã¯ãã‚Œã§å•é¡Œã‚’èµ·ã“ã—ã¾ã™ã€‚ãªãœã‹ã¨ã„ã†ã¨ã€ä¸¡æ–¹ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ <code class="language-text">getFetchUrl</code> ã«ä¾å­˜ã—ã¦ã‚‹ï¼ˆãã—ã¦ render ã”ã¨ã«é•ã†ï¼‰ã®ã§ã€æˆ‘ã€…ã®ä¾å­˜é…åˆ—ã¯å…¨ãå½¹ã«ç«‹ã¡ã¾ã›ã‚“ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">SearchResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token comment">// ğŸ”´ render ã”ã¨ã«å…¨ã¦ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’å†ãƒˆãƒªã‚¬ãƒ¼ã™ã‚‹</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">function</span> <span class="token function">getFetchUrl</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">return</span> <span class="token string">'https://hn.algolia.com/api/v1/search?query='</span> <span class="token operator">+</span> query<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span></span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">getFetchUrl</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ... ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚§ãƒƒãƒã—ã¦ä½•ã‹ã™ã‚‹</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>getFetchUrl<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ğŸš§ ä¾å­˜é…åˆ—ã¯åˆã£ã¦ã‚‹ãŒé »ç¹ã«å¤‰ã‚ã‚‹</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">getFetchUrl</span><span class="token punctuation">(</span><span class="token string">'redux'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ... ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚§ãƒƒãƒã—ã¦ä½•ã‹ã™ã‚‹</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>getFetchUrl<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ğŸš§ ä¾å­˜é…åˆ—ã¯åˆã£ã¦ã‚‹ãŒé »ç¹ã«å¤‰ã‚ã‚‹</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ç°¡å˜ãªè§£æ±ºæ–¹æ³•ã¨ã—ã¦ã€ <code class="language-text">getFetchUrl</code> ã‚’ä¾å­˜é…åˆ—ã‹ã‚‰æŠœããŸããªã‚‹ã§ã—ã‚‡ã†ã€‚ã§ã™ãŒã€ã“ã‚Œã¯ã‚ã¾ã‚ŠãŠå‹§ã‚ã§ãã‚‹è§£æ±ºç­–ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æŠœã„ã¦ã—ã¾ã†ã¨ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã§ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã¹ãå¤‰æ›´ãŒåŠ ã‚ã£ã¦ã‚‚åˆ†ã‹ã‚Šã¥ã‚‰ã„ã‹ã‚‰ã§ã™ã€‚ã“ã®ã‚ˆã†ãªã“ã¨ãŒå…ˆã»ã©ãŠè¦‹ã›ã—ãŸã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ãŒæ›´æ–°ã•ã‚Œãªã„ã‚ˆã†ãªãƒã‚°ã‚’å¼•ãèµ·ã“ã™ã®ã§ã™ã€‚</p>
<p>ä»£ã‚ã‚Šã¨ã—ã¦ã€ã‚·ãƒ³ãƒ—ãƒ«ãªäºŒã¤ã®è§£æ±ºæ³•ãŒã‚ã‚Šã¾ã™ã€‚</p>
<p><strong>ã¾ãšã€ã‚‚ã—é–¢æ•°ãŒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¹ã‚³ãƒ¼ãƒ—ã‹ã‚‰ä½•ä¸€ã¤ä½¿ç”¨ã—ã¦ã„ãªã„ãªã‚‰ã°ã€é–¢æ•°ã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå¤–ã«ãƒ›ã‚¤ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã—ã¦è‡ªç”±ã«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã§ä½¿ã†æ–¹æ³•ï¼š</strong></p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="gatsby-highlight-code-line"><span class="token comment">// âœ… ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã«å½±éŸ¿ã•ã‚Œãªã„</span></span><span class="gatsby-highlight-code-line"><span class="token keyword">function</span> <span class="token function">getFetchUrl</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">return</span> <span class="token string">'https://hn.algolia.com/api/v1/search?query='</span> <span class="token operator">+</span> query<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"><span class="token punctuation">}</span></span>
<span class="token keyword">function</span> <span class="token function">SearchResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">getFetchUrl</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ... ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚§ãƒƒãƒã—ã¦ä½•ã‹ã™ã‚‹</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ… ä¾å­˜é…åˆ—ã‚‚ã‚ªãƒƒã‚±ãƒ¼</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">getFetchUrl</span><span class="token punctuation">(</span><span class="token string">'redux'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ... ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚§ãƒƒãƒã—ã¦ä½•ã‹ã™ã‚‹</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ… ä¾å­˜é…åˆ—ã‚‚ã‚ªãƒƒã‚±ãƒ¼</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>render ã‚¹ã‚³ãƒ¼ãƒ—ã«é–¢æ•°ãŒãã‚‚ãã‚‚ãªã„ã®ã§ã€ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã«å½±éŸ¿ã•ã‚Œãšä¾å­˜é…åˆ—ã«å…¥ã‚Œã‚‹å¿…è¦ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚é–“é•ã£ã¦ <code class="language-text">props</code> ã‚„ <code class="language-text">state</code> ã«ä¾å­˜ã—ã¦ã—ã¾ã†ã€ã¨ã„ã†ã“ã¨ã‚‚èµ·ãã¾ã›ã‚“ã€‚</p>
<p>ã‚‚ã†ä¸€ã¤ã®æ–¹æ³•ã¨ã—ã¦ã€ <a href="https://ja.reactjs.org/docs/hooks-reference.html#usecallback" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">useCallback</code> ãƒ•ãƒƒã‚¯ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™</a>:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">SearchResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token comment">// âœ… ä¾å­˜é…åˆ—ãŒåŒã˜ã ã¨é–¢æ•°ã®æ•´åˆæ€§ãŒæ‹…ä¿ã•ã‚Œã‚‹</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> getFetchUrl <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">return</span> <span class="token string">'https://hn.algolia.com/api/v1/search?query='</span> <span class="token operator">+</span> query<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// âœ… Callback deps are OK</span></span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">getFetchUrl</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ... ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚§ãƒƒãƒã—ã¦ä½•ã‹ã™ã‚‹</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>getFetchUrl<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ… ä¾å­˜é…åˆ—ã‚‚ã‚ªãƒƒã‚±ãƒ¼</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">getFetchUrl</span><span class="token punctuation">(</span><span class="token string">'redux'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ... ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚§ãƒƒãƒã—ã¦ä½•ã‹ã™ã‚‹</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>getFetchUrl<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ… ä¾å­˜é…åˆ—ã‚‚ã‚ªãƒƒã‚±ãƒ¼</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">useCallback</code> ãŒä½•ã‚’ã—ã¦ã‚‹ã‹ã¨ã„ã†ã¨ã€ä¾å­˜ãƒã‚§ãƒƒã‚¯ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’è¿½åŠ ã—ã¦ã„ã‚‹ã®ã§ã™ã€‚åˆ¥ã®è»¸ã§å•é¡Œã‚’è§£æ±ºã—ã¦ã‚‹ã®ã§ã™ - <strong>é–¢æ•°ã®ä¾å­˜ãƒã‚§ãƒƒã‚¯ã‚’é¿ã‘ã‚‹ã®ã§ã¯ãªãã€é–¢æ•°è‡ªä½“ã‚’ä¾å­˜é–¢ä¿‚ã«å¤‰æ›´ãŒã‚ã£ãŸã‚‰æ™‚ã ã‘å¤‰ãˆã¦ã„ã‚‹ã®ã§ã™ã€‚</strong></p>
<p>ãªãœã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒæœ‰åŠ¹çš„ã‹è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ä»¥å‰ã¯ã€æˆ‘ã€…ã®ä¾‹ã¯äºŒã¤ã®æ¤œç´¢çµæœã‚’è¡¨ç¤ºã—ã¦ã¾ã—ãŸï¼ˆ<code class="language-text">react</code> ã¨ <code class="language-text">redux</code> ã®æ¤œç´¢ã‚¯ã‚¨ãƒªï¼‰ã€‚ã§ã™ãŒã€ä»»æ„ã®ã‚¯ã‚¨ãƒªã‚’å—ã‘å–ã‚‹ãŸã‚ã‚¤ãƒ³ãƒ—ãƒƒãƒˆã‚’è¿½åŠ ã™ã‚‹ã¨ã—ã¾ã—ã‚‡ã†ã€‚è¦ã™ã‚‹ã«ã€ <code class="language-text">query</code> ã‚’å¼•æ•°ã§å—ã‘å–ã‚‹ã®ã§ã¯ãªãã€ <code class="language-text">getFetchUrl</code> ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã® <code class="language-text">state</code> ã‹ã‚‰ã‚¯ã‚¨ãƒªã‚’å—ã‘å–ã‚Šã¾ã™ã€‚</p>
<p><code class="language-text">query</code> ã®ä¾å­˜é…åˆ—ãƒã‚§ãƒƒã‚¯ãŒãªã„ã“ã¨ã«ã™ãæ°—ã¥ã‘ã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">SearchResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>query<span class="token punctuation">,</span> setQuery<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> getFetchUrl <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">// ã‚¯ã‚¨ãƒªã®å¼•æ•°ãŒãªã„</span>
    <span class="token keyword">return</span> <span class="token string">'https://hn.algolia.com/api/v1/search?query='</span> <span class="token operator">+</span> query<span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ğŸ”´ query ãŒä¾å­˜é…åˆ—ã‹ã‚‰æŠœã‘ã¦ã‚‹</span></span>  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">query</code> ã‚’ä¾å­˜é…åˆ—ã«å…¥ã‚Œã‚‹ã‚ˆã† <code class="language-text">useCallback</code> ã‚’ä¿®æ­£ã™ã‚‹ã¨ã€ <code class="language-text">getFetchUrl</code> ãŒä¾å­˜é…åˆ—ã«å«ã¾ã‚Œã‚‹å…¨ã¦ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ <code class="language-text">query</code> ãŒå¤‰æ›´ã—ãŸå ´åˆã ã‘å†å®Ÿè¡Œã•ã‚Œã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">SearchResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>query<span class="token punctuation">,</span> setQuery<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="gatsby-highlight-code-line">  <span class="token comment">// âœ… ä¾å­˜é…åˆ—ãŒåŒã˜ã ã¨é–¢æ•°ã®æ•´åˆæ€§ãŒæ‹…ä¿ã•ã‚Œã‚‹</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> getFetchUrl <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">return</span> <span class="token string">'https://hn.algolia.com/api/v1/search?query='</span> <span class="token operator">+</span> query<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>query<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// âœ… Callback deps are OK</span></span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">getFetchUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ... ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚§ãƒƒãƒã—ã¦ä½•ã‹ã™ã‚‹</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>getFetchUrl<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ… ä¾å­˜é…åˆ—ã‚‚ã‚ªãƒƒã‚±ãƒ¼</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">useCallback</code> ã®ãŠã‹ã’ã§ã€ <code class="language-text">query</code> ãŒåŒã˜ã§ã‚ã‚Œã° <code class="language-text">getFetchUrl</code> ã‚‚åŒã˜ã§ã‚ã‚‹ã“ã¨ãŒæ‹…ä¿ã•ã‚Œã‚‹ã®ã§ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯å†å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“ã€‚ã§ã™ãŒ <code class="language-text">query</code> ãŒå¤‰ã‚ã‚‹ã¨ <code class="language-text">getFetchUrl</code> ã‚‚å¤‰ã‚ã‚‹ã®ã§ãƒ‡ãƒ¼ã‚¿ã‚’å†å–å¾—ã—ã«ã„ãã¾ã™ã€‚ã‚¨ã‚¯ã‚»ãƒ«ã®ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã§ã‚»ãƒ«ã®ä¸­ã‚’å¤‰ãˆã‚‹ã¨ä»–ã®ã‚»ãƒ«ãŒè‡ªå‹•çš„ã«å†è¨ˆç®—ã™ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ä¼¼ã¦ã„ã¾ã™ã€‚</p>
<p>ã“ã‚Œã‚‰ã¯ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã¨ã‚·ãƒ³ã‚¯ãƒ­ã¨ã„ã†ãƒã‚¤ãƒ³ãƒ‰ã‚»ãƒƒãƒˆã‚’æ›ã‘æŒã£ãŸçµæœã«ã™ãã¾ã›ã‚“ã€‚<strong>è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰é–¢æ•°ã‚’æ¸¡ã™å ´åˆã§ã‚‚åŒã˜è§£æ±ºæ–¹æ³•ãŒä½¿ãˆã¾ã™ï¼š</strong></p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>query<span class="token punctuation">,</span> setQuery<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="gatsby-highlight-code-line">  <span class="token comment">// âœ… ä¾å­˜é…åˆ—ãŒåŒã˜ã ã¨é–¢æ•°ã®æ•´åˆæ€§ãŒæ‹…ä¿ã•ã‚Œã‚‹</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> fetchData <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">'https://hn.algolia.com/api/v1/search?query='</span> <span class="token operator">+</span> query<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token comment">// ... ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚§ãƒƒãƒã—ã¦è¿”ã™</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>query<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// âœ… Callback ã®ä¾å­˜é…åˆ—ã¯ã‚ªãƒƒã‚±ãƒ¼</span></span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Child</span> <span class="token attr-name">fetchData</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fetchData<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">{</span> fetchData <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>data<span class="token punctuation">,</span> setData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>setData<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>fetchData<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// âœ… ä¾å­˜é…åˆ—ã¯ã‚ªãƒƒã‚±ãƒ¼</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p> <code class="language-text">fetchData</code> ã¯è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® <code class="language-text">query</code> ãŒå¤‰ã‚ã‚‹ã¾ã§åŒã˜ã§ã‚ã‚‹ã“ã¨ãŒæ‹…ä¿ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯å¿…è¦ã«ãªã‚‹ã¾ã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã«ã„ãã¾ã›ã‚“ã€‚</p>
<h2 id="é–¢æ•°ã¯ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®ä¸€éƒ¨ãªã®ã‹"><a href="#%E9%96%A2%E6%95%B0%E3%81%AF%E3%83%87%E3%83%BC%E3%82%BF%E3%83%95%E3%83%AD%E3%83%BC%E3%81%AE%E4%B8%80%E9%83%A8%E3%81%AA%E3%81%AE%E3%81%8B" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>é–¢æ•°ã¯ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®ä¸€éƒ¨ãªã®ã‹</h2>
<p> èˆˆå‘³æ·±ã„ã®ã¯ã€å…ˆã»ã©ç´¹ä»‹ã—ãŸãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã‚¯ãƒ©ã‚¹ã®å ´åˆã ã¨ã†ã¾ãå‹•ã‹ãªãã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¨ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ‘ãƒ©ãƒ€ã‚¤ãƒ ã®é•ã„ã‚’ã¯ã£ãã‚Šã¨è¦‹ã›ã¦ãã‚Œã¾ã™ã€‚ã“ã®ä¾‹ã‚’ã¿ã¦ã¿ã¦ãã ã•ã„ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    query<span class="token punctuation">:</span> <span class="token string">'react'</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token function-variable function">fetchData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">'https://hn.algolia.com/api/v1/search?query='</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>query<span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token comment">// ... ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚§ãƒƒãƒã—ã¦ä½•ã‹ã™ã‚‹</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Child</span> <span class="token attr-name">fetchData</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>fetchData<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    data<span class="token punctuation">:</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span></span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ä»Šã“ã†æ€ã†ã§ã—ã‚‡ã†ï¼šã€Œã­ã‡ãƒ€ãƒ³ã€<code class="language-text">useEffect</code> ã¯ <code class="language-text">componentDidMount</code> ã¨ <code class="language-text">componentDidUpdate</code> ãŒä¸€ç·’ã«ãªã£ã¦ã„ã‚‹ã ã‘ãªã®çŸ¥ã£ã¦ã‚‹ã‹ã‚‰ï¼ã“ã‚Œä»¥ä¸Šã”ã¾ã‹ã—ã¦ã‚‚ç„¡é§„ï¼ã€ <strong>ã§ã™ãŒã“ã‚Œã¯ <code class="language-text">componentDidUpdate</code> ã§ã‚‚å‹•ãã¾ã›ã‚“ï¼š</strong></p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    data<span class="token punctuation">:</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="gatsby-highlight-code-line">  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span>prevProps<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    <span class="token comment">// ğŸ”´ ã“ã®æ¯”è¼ƒã¯æ­£ã«ã¯ãªã‚‰ãªã„</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>fetchData <span class="token operator">!==</span> prevProps<span class="token punctuation">.</span>fetchData<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span></span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">fetchData</code> ã¯ã‚¯ãƒ©ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ãªã®ã§ã€ã“ã‚Œã¯å½“ãŸã‚Šå‰ã§ã™ï¼ˆãã‚Œã‹ã‚¯ãƒ©ã‚¹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ¼ - ã©ã£ã¡ã§ã‚‚ã„ã„ã‘ã©ï¼‰ã€‚<code class="language-text">state</code> ã®å¤‰æ›´ãŒã‚ã£ãŸã‹ã‚‰ã¨ã„ã£ã¦å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚ãªã®ã§ã€ <code class="language-text">this.props.fetchData</code> ã¯ <code class="language-text">prevProps.fetchData</code> ã¨åŒã˜ã§ã‚ã‚‹ãŸã‚å†ãƒ•ã‚§ãƒƒãƒã•ã‚Œã¾ã›ã‚“ã€‚ãªã‚‰ã€æ¡ä»¶åˆ†å²ã‚’æ¶ˆã—ãŸã‚‰ã©ã†ã§ã—ã‚‡ã†ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span>prevProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code></pre></div>
<p>ã§ã™ãŒã€ã“ã†è¨˜è¿°ã™ã‚‹ã¨ <em>æ¯</em> render æ™‚ã«ãƒ•ã‚§ãƒƒãƒã—ã«ã„ãã¾ã™ã€‚ï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ„ãƒªãƒ¼ã®ä¸Šã«è¿½åŠ ã—ã¦ã‚ã’ã‚‹ã¨åˆ†ã‹ã‚Šã¾ã™ã€‚ï¼‰ãªã‚‰ã°ã€ç‰¹å®šã®ã‚¯ã‚¨ãƒªã« <code class="language-text">bind</code> ã™ã‚‹ã®ã¯ã©ã†ã§ã—ã‚‡ã†ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Child</span> <span class="token attr-name">fetchData</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>fetchData<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>query<span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code></pre></div>
<p>ã§ã™ãŒ <code class="language-text">query</code> ãŒå¤‰ã‚ã£ã¦ãªãã¦ã‚‚ <code class="language-text">this.props.fetchData !== prevProps.fetchData</code> ã¯å¸¸ã«æ­£ã§ã™ï¼ãªã®ã§ã¾ã  <em>æ¯</em> render æ™‚ã«ãƒ•ã‚§ãƒƒãƒã—ã«ã„ãã¾ã™ã€‚</p>
<p>å”¯ä¸€ã®è§£æ±ºæ–¹æ³•ã¨ã—ã¦ã€ <code class="language-text">query</code> è‡ªä½“ã‚’å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«æ¸¡ã™ã—ã‹ã‚ã‚Šã¾ã›ã‚“ã€‚å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ <code class="language-text">query</code> ã‚’å®Ÿéš›ã«ä½¿ã†ã“ã¨ã¯ãªã„ã§ã™ãŒã€å¤‰æ›´ã‚’æ¤œçŸ¥ã—ã¦ãƒ•ã‚§ãƒƒãƒã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    query<span class="token punctuation">:</span> <span class="token string">'react'</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function-variable function">fetchData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">'https://hn.algolia.com/api/v1/search?query='</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>query<span class="token punctuation">;</span>
    <span class="token comment">// ... ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚§ãƒƒãƒã—ã¦ä½•ã‹ã™ã‚‹</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Child</span> <span class="token attr-name">fetchData</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>fetchData<span class="token punctuation">}</span></span> <span class="token attr-name">query</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>query<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span></span>  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    data<span class="token punctuation">:</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span>prevProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>query <span class="token operator">!==</span> prevProps<span class="token punctuation">.</span>query<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span></span>  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>React ã«é–¢ã‚ã£ã¦æ•°å¹´ã€ã‚‚ã†ä¸å¿…è¦ãª <code class="language-text">props</code> ã‚’å­ã«æ¸¡ã—ã¦è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¨ãƒ³ã‚­ãƒ£ãƒ—ã‚¹ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å£Šã™è¡Œç‚ºï¼ˆãã—ã¦æ•°é€±é–“å¾Œã«ãªãœã‚„ã‚‹å¿…è¦ãŒã‚ã£ãŸã®ã‹ã«æ°—ã¥ãï¼‰ã«æ…£ã‚Œã¦ã—ã¾ã„ã¾ã—ãŸã€‚</p>
<p><strong>ã‚¯ãƒ©ã‚¹ã®å ´åˆã€é–¢æ•° props è‡ªä½“ã¯ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®ä¸€éƒ¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</strong> mutable ãª this ã®å€¤ãŒå­˜åœ¨ã™ã‚‹ã®ã§é–¢æ•°ã®æ•´åˆæ€§ãŒæ‹…ä¿ã§ããªã„ã‹ã‚‰ã§ã™ã€‚ãªã®ã§ã€é–¢æ•°ã ã‘æ¸¡ã—ãŸãã¦ã‚‚ç„¡é§„ãªãƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã—ã¦ diff ã‚’ã¨ã‚‹å¿…è¦ãŒå‡ºã¦ãã‚‹ã®ã§ã™ã€‚<code class="language-text">this.props.fetchData</code> ãŒã©ã® <code class="language-text">state</code> ã«ä¾å­˜ã—ã¦ã„ã¦ã€ <code class="language-text">state</code> ãŒã©ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å¤‰æ›´ã•ã‚ŒãŸã‚’çŸ¥ã‚‹ä½™åœ°ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
<p><strong><code class="language-text">useCallback</code> ã«ã‚ˆã‚Šã€é–¢æ•°ã¯ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã«å‚åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</strong> ã‚‚ã—é–¢æ•°ã®ã‚¤ãƒ³ãƒ—ãƒƒãƒˆãŒå¤‰æ›´ã•ã‚Œã‚Œã°é–¢æ•°è‡ªä½“ã‚‚å¤‰æ›´ã•ã‚ŒãŸã¨æ¤œçŸ¥ã§ãã€ã‚¤ãƒ³ãƒ—ãƒƒãƒˆãŒå¤‰æ›´ã•ã‚Œã¦ãªã‘ã‚Œã°åŒã˜ã§ã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚<code class="language-text">useCallback</code> ã®ãŠã‹ã’ã§ã€ <code class="language-text">props.fetchData</code> ãªã©ã® props ã®å¤‰æ›´ã‚‚ã€è‡ªå‹•çš„ã«å­ã¸ä¼ã‚ã£ã¦ã„ãã¾ã™ã€‚</p>
<p><a href="https://ja.reactjs.org/docs/hooks-reference.html#usememo" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">useMemo</code></a> ã‚‚åŒã˜ã‚ˆã†ãªã“ã¨ã‚’è¤‡é›‘ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«é©ç”¨ã—ã¦ãã‚Œã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">ColorPicker</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å­ã® shallow equality check ã«ã¡ã‚ƒã‚“ã¨é€šã‚Šã¾ã™</span>
  <span class="token comment">// color ãŒå¤‰ã‚ã‚‰ãªã„é™ã‚Š</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>color<span class="token punctuation">,</span> setColor<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'pink'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> color <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>color<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Child</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>style<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p><strong><code class="language-text">useCallback</code> ã‚’å·»ãæ•£ã‚‰ã‹ã™ã®ã¯ã‚ã¾ã‚Šã‚ˆããªã„ã“ã¨ã‚’å¼·èª¿ã—ãŸã„ã§ã™ã€‚</strong> è‰¯ã„ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ãƒãƒƒãƒã§ã€é–¢æ•°ãŒå­ã«æ¸¡ã•ã‚Œã¦å­ã®ä¸­ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã§å‘¼ã°ã‚Œã¦ã‚‹å ´åˆãªã©ã§ã¯ã¨ã¦ã‚‚å½¹ã«ç«‹ã¡ã¾ã™ã€‚ãã‚Œã‹å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¡ãƒ¢åŒ–ã‚’å´©ã—ãŸããªã„æ™‚ãªã©ã€‚ã§ã™ãŒã€Hooks ã¯ãã‚‚ãã‚‚ <a href="https://ja.reactjs.org/docs/hooks-faq.html#how-to-avoid-passing-callbacks-down" target="_blank" rel="nofollow noopener noreferrer">é–¢æ•°ã‚’ props ã¨ã—ã¦æ¸¡ã™è¡Œç‚ºã‚’ã‚ã¾ã‚Šæ¨è–¦ã—ã¦ã„ã¾ã›ã‚“ã€‚</a> </p>
<p>ä¸Šè¨˜ã®ä¾‹ã®å ´åˆã€å€‹äººçš„ã«ã¯ <code class="language-text">fetchData</code> ã‚’ã‚¨ãƒ•ã‚§ã‚¯ãƒˆå†…ã«å®šç¾©ã™ã‚‹ã‹ï¼ˆãã—ã¦ãã‚Œè‡ªä½“ã‚’ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã¨ã—ã¦æŠ½å‡ºã§ãã‚‹ï¼‰ã€ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«ã™ã‚‹æ–¹ã‚’å¥½ã¿ã¾ã™ã€‚ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ä¿ã¡ãŸã„ã®ã«ã€ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒã‚ã‚‹ã¨è¤‡é›‘åŒ–ã—ã¦ã—ã¾ã„ã¾ã™ï¼ˆä¾‹ãˆã°ã€ <code class="language-text">props.onComplete</code> ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆä¸­ã«å¤‰ã‚ã£ãŸã‚Šã¨ã‹ï¼‰ã€‚<a href="#swimming-against-the-tide">ã‚¯ãƒ©ã‚¹ã§ã®æŒ¯ã‚‹èˆã„</a>ã¯å†ç¾ã§ãã¾ã™ãŒã€ãƒ¬ãƒ¼ã‚¹ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã¯è§£æ±ºã•ã‚Œã¾ã›ã‚“ã€‚</p>
<h2 id="ãƒ¬ãƒ¼ã‚¹ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦"><a href="#%E3%83%AC%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%B3%E3%83%87%E3%82%A3%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ãƒ¬ãƒ¼ã‚¹ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦</h2>
<p>å…¸å‹çš„ãªãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ã‚’ã™ã‚‹ã‚¯ãƒ©ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€ã“ã‚Œã«ä¼¼ã¦ã‚‹ã§ã—ã‚‡ã†ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Article</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    article<span class="token punctuation">:</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">async</span> <span class="token function">fetchData</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> article <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">fetchArticle</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> article <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ã¿ãªã•ã‚“ã”å­˜çŸ¥ã®é€šã‚Šã€ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ãƒã‚°ã‚’å¼•ãèµ·ã“ã—ã¾ã™ã€‚ãªãœãªã‚‰ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã—ã¦ã„ãªã„ã‹ã‚‰ã€‚ãªã®ã§ã€ã‚‚ã†ä¸€ã¤å…¸å‹çš„ãªã‚¯ãƒ©ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦ã€æ¬¡ã®ã‚ˆã†ãªä¾‹ã‚’ã‚ˆãè¦‹ã‚‹ã§ã—ã‚‡ã†ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Article</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    article<span class="token punctuation">:</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="gatsby-highlight-code-line">  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span>prevProps<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>prevProps<span class="token punctuation">.</span>id <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line">  <span class="token punctuation">}</span></span>  <span class="token keyword">async</span> <span class="token function">fetchData</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> article <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">fetchArticle</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> article <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>ã„ã„ã§ã™ã­ã€‚ã§ã™ãŒã€ã¾ã ãƒã‚°ã‚’å¼•ãèµ·ã“ã›ã¾ã™ã€‚ãªãœãªã‚‰ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®é †ç•ªãŒæ‹…ä¿ã•ã‚Œã¦ã„ãªã„ã‹ã‚‰ã§ã™ã€‚ä¾‹ãˆã°ã€ <code class="language-text">{id: 10}</code> ã‚’ãƒ•ã‚§ãƒƒãƒã—ã¦ã„ã¦ <code class="language-text">{id: 20}</code> ã«å¤‰æ›´ã—ã¦ãã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå…ˆã«è¿”ã£ã¦ããŸå ´åˆã€æœ€åˆã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ã¦å¾Œã‹ã‚‰çµ‚ã‚ã£ãŸå‡¦ç†ã¯ <code class="language-text">state</code> ã‚’ä¸æ­£ã«ä¸Šæ›¸ãã—ã¦ã—ã¾ã„ã¾ã™ã€‚</p>
<p>ã“ã‚ŒãŒãƒ¬ãƒ¼ã‚¹ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã§ã™ã€‚ãã—ã¦ã€ã“ã‚Œã¯ <code class="language-text">async</code> / <code class="language-text">await</code> ã‚’å«ã‚€ã‚³ãƒ¼ãƒ‰ï¼ˆçµæœãŒæˆ»ã‚‹ã¾ã§å¾…ã¤ã“ã¨ãŒå‰æï¼‰ã¨ãƒˆãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãªãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ï¼ˆéåŒæœŸé–¢æ•°ã®å‡¦ç†ä¸­ã« <code class="language-text">state</code> ã‚„ <code class="language-text">props</code> ãŒä»£ã‚ã‚Šå¾—ã‚‹ï¼‰ã‚’æ··ãœãŸã‚³ãƒ¼ãƒ‰ã§ã‚ˆãèµ·ã“ã‚‹ç¾è±¡ã§ã™ã€‚</p>
<p>ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¯ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ éåŒæœŸé–¢æ•°ã‚’ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã«æ¸¡ãã†ã¨ã™ã‚‹ã¨æ³¨æ„ã—ã¦ãã‚Œã¾ã™ã€‚ï¼ˆã©ã®ã‚ˆã†ãªå•é¡Œã«ç›´é¢ã™ã‚‹ã‹ã‚‚ã£ã¨ã¯ã£ãã‚Šã•ã›ã‚‹ã‚ˆã†ã«æ³¨æ„æ–‡è¨€ã‚’æ”¹å–„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€‚ï¼‰</p>
<p>ã‚‚ã—éåŒæœŸå‡¦ç†ãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«å¯èƒ½ãªã‚‰ã°ã€cleanup é–¢æ•°ã§éåŒæœŸãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã§ãã‚‹ã®ã§ã€è§£æ±ºã§ãã¾ã™ã­ã€‚</p>
<p>ã‚ã‚‹ã„ã¯ã€boolean ã‚’ç”¨ã„ã¦ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã™ã‚‹ã¨ã„ã†ãã®å ´ã—ã®ãã®è§£æ±ºæ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ï¼š</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Article</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>article<span class="token punctuation">,</span> setArticle<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">    <span class="token keyword">let</span> didCancel <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
    <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> article <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">fetchArticle</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="gatsby-highlight-code-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>didCancel<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>        <span class="token function">setArticle</span><span class="token punctuation">(</span>article<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="gatsby-highlight-code-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      didCancel <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p>å…·ä½“çš„ã«ã©ã®ã‚ˆã†ã«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚„ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¦ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã«æŠ½å‡ºã§ãã‚‹ã‹ã«èˆˆå‘³ãŒã‚ã‚‹äººã¯ã“ã¡ã‚‰ã®<a href="(https://www.robinwieruch.de/react-hooks-fetch-data/)">è¨˜äº‹</a>ã‚’èª­ã‚€ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚</p>
<h2 id="ãƒãƒ¼ãƒ‰ãƒ«ã‚’ã‚ã’ã‚‹"><a href="#%E3%83%8F%E3%83%BC%E3%83%89%E3%83%AB%E3%82%92%E3%81%82%E3%81%92%E3%82%8B" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ãƒãƒ¼ãƒ‰ãƒ«ã‚’ã‚ã’ã‚‹</h2>
<p>ã‚¯ãƒ©ã‚¹ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒã‚¤ãƒ³ãƒ‰ã‚»ãƒƒãƒˆã ã¨ã€render ã§å‡ºåŠ›ã•ã‚Œã‚‹ã‚‚ã®ã¨å‰¯ä½œç”¨ã¯ç•°ãªã£ã¦ã¿ãˆã¾ã™ã€‚UIã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¯ <code class="language-text">props</code> ã‚„ <code class="language-text">state</code> ãƒ‰ãƒªãƒ–ãƒ³ã§å¼•ãèµ·ã“ã•ã‚Œã¦ãŠã‚Šæ•´åˆæ€§ã¯å–ã‚Œã¦ã„ã‚‹ã®ã¯ä¿è¨¼ã•ã‚Œã¦ã¾ã™ãŒã€å‰¯ä½œç”¨ã¯é•ã„ã¾ã™ã€‚ã“ã‚ŒãŒãƒã‚°ãŒèµ·ã“ã‚‹ç†ç”±ã§ã™ã€‚</p>
<p>ã§ã™ãŒã€ <code class="language-text">useEffect</code> ã®ãƒã‚¤ãƒ³ãƒ‰ã‚»ãƒƒãƒˆã ã¨ã€å…¨ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚·ãƒ³ã‚¯ãƒ­ã•ã‚Œã¦ã„ã¾ã™ã€‚å‰¯ä½œç”¨ã¯ React ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã®ä¸€éƒ¨ã¨ãªã‚Šã¾ã™ã€‚<code class="language-text">useEffect</code> ã§èµ·ã“ã‚‹å‡¦ç†ã‚’ä¸Šæ‰‹ãã‚„ã‚Œã°ã€ã‚ãªãŸã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã«ã‚ˆã‚Šå¯¾å¿œã—ã‚„ã™ããªã‚Šã¾ã™ã€‚</p>
<p>ã—ã‹ã—ã€æ­£ç¢ºã«ã™ã‚‹ã¨ã„ã†ã“ã¨ã¯ã€ã‚ˆã‚ŠåŠ´åŠ›ã‚’è²»ã‚„ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã‹ãªã‚Šé¢å€’ã§ã™ã€‚ã‚·ãƒ³ã‚¯ãƒ­ã‚’è»¸ã«ç½®ã„ã¦æ›¸ãã‚³ãƒ¼ãƒ‰ã¯ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨ã¯ã‚·ãƒ³ã‚¯ãƒ­ã—ãªã„ä¸€åº¦é™ã‚Šã®å‰¯ä½œç”¨ã®ç™ºç«ã•ã›ã‚‹ã‚³ãƒ¼ãƒ‰ã‚ˆã‚Šé›£ã—ã„ã®ã¯å½“ãŸã‚Šå‰ã§ã™ã€‚</p>
<p>ã‚‚ã—ã‚ãªãŸã¯ <code class="language-text">useEffect</code> ã‚’ä¸»è¦ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ä½¿ç”¨ã—ã¦ã„ã‚‹ãªã‚‰ã€å°‘ã—å¿ƒé…ã§ã™ã€‚ã§ã™ãŒã€ <code class="language-text">useEffect</code> ã¯ä½ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ãƒ–ãƒ­ãƒƒã‚¯ã§ã™ã€‚ã¾ã  Hooks ãŒå‡ºã¦é–“ã‚‚ãªã„ã®ã§ã€ç‰¹ã«ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãªã©ã§ã¿ã‚“ãªä½ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ã‚ã‚‹ã‚‚ã®ã‚’ä¹±ç”¨ã—ã¦ã„ã¾ã™ã€‚æ™‚é–“ãŒç«‹ã¤ã«ã¤ã‚Œã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ¼ã¯é«˜ãƒ¬ãƒ™ãƒ«ãª Hooks ã«ç§»ã£ã¦ã„ãã§ã—ã‚‡ã†ã€‚</p>
<p>å¤šç¨®å¤šæ§˜ãªã‚¢ãƒ—ãƒªãŒã€èªè¨¼ãƒ­ã‚¸ãƒƒã‚¯ã‚’ã‚«ãƒ–ã‚»ãƒ«åŒ–ã—ãŸ <code class="language-text">useFetch</code> ã‚„ theme context ã‚’ä½¿ç”¨ã™ã‚‹ <code class="language-text">useTheme</code> ãªã©ã® Hooks ã‚’ä½œæˆã—ã¦ã‚‹ã®ã‚’è¦‹ã¦ãã¾ã—ãŸã€‚ã“ã‚Œã‚‰ã®ãƒ„ãƒ¼ãƒ«ãƒœãƒƒã‚¯ã‚¹ãŒä¸€åº¦å‡ºæ¥ä¸ŠãŒã‚‹ã¨ã€ãã“ã¾ã§ <code class="language-text">useEffect</code> ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ç„¡ããªã£ã¦ãã‚‹ã§ã—ã‚‡ã†ã€‚ã§ã™ãŒã€ <code class="language-text">useEffect</code> ãŒã‚‚ãŸã‚‰ã™å¼·é­æ€§ã¯ã€ãã‚Œã‚‰ã‚’ä¸Šã«ä½œæˆã•ã‚Œã‚‹ Hooks å…¨ã¦ãŒæ©æµã‚’å—ã‘ã‚‰ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚</p>
<p>ã“ã‚Œã¾ã§ã«ã€ <code class="language-text">useEffect</code> ã¯ä¸»ã«ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ç”¨ã¨ã—ã¦ä½¿ã‚ã‚Œã¦ã„ã¾ã—ãŸã€‚ã§ã™ãŒã€ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ã¯æ­£ç¢ºã«ã¯ã‚·ãƒ³ã‚¯ãƒ­å•é¡Œã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ç”¨ã®ä¾å­˜é…åˆ—ã¯ä¸»ã« <code class="language-text">[]</code> ãªã®ã§ã€ã‚ˆã‚Šæ˜ç¢ºã§ã™ã€‚ãã‚‚ãã‚‚ä½•ã‚’ã‚·ãƒ³ã‚¯ãƒ­ã—ã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p>
<p>å°†æ¥çš„ã«ã€<a href="https://reactjs.org/blog/2018/11/27/react-16-roadmap.html#react-16x-mid-2019-the-one-with-suspense-for-data-fetching" target="_blank" rel="nofollow noopener noreferrer">ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ç”¨ã® Suspense</a> ãŒ React ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’éåŒæœŸå‡¦ç†ä¸­ã¯ä¸­æ–­ã™ã‚‹ã¨ã„ã£ãŸã‚µãƒãƒ¼ãƒˆã‚’ã—ã¾ã™ã€‚</p>
<p>Suspense ãŒä»Šå¾Œãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ã‚±ãƒ¼ã‚¹ã‚’ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã—ã¦ã„ãã«ã¤ã‚Œã€<code class="language-text">useEffect</code> ã¯è¡¨èˆå°ã‹ã‚‰ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆã—ã¦ã€æœ¬å½“ã« <code class="language-text">props</code> ã‚„ <code class="language-text">state</code> ã‚’ä½•ã‹ã—ã‚‰ã®å‰¯ä½œç”¨ã«ã‚·ãƒ³ã‚¯ãƒ­ã—ãŸã„æ™‚ã ã‘ã«ä½¿ã‚ã‚Œã‚‹ã¨æ€ã„ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ã¨ã¯é•ã„ã€ã“ã®ã‚ˆã†ãªã‚±ãƒ¼ã‚¹ã¯è‡ªç„¶ã«å¯¾å¿œã§ãã¾ã™ã€‚ãªãœãªã‚‰ã€ãã®ãŸã‚ã«ä½œã‚‰ã‚ŒãŸã‹ã‚‰ã§ã™ã€‚ã§ã™ãŒSuspense ãŒãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ã‚±ãƒ¼ã‚¹ã‚’ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã™ã‚‹ã¾ã§ã¯ã€<a href="https://www.robinwieruch.de/react-hooks-fetch-data/" target="_blank" rel="nofollow noopener noreferrer">ã“ã‚Œã®ã‚ˆã†ãª</a>ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã‚’ç”¨ã„ã¦ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ³ã‚°ã‚’ã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p>
<h2 id="çµ‚ã‚ã‚Šã«"><a href="#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB" aria-hidden class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>çµ‚ã‚ã‚Šã«</h2>
<p>ã‚ãªãŸã¯ã‚‚ã†ç§ãŒçŸ¥ã£ã¦ã‚‹ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®å…¨ã¦ã‚’çŸ¥ã£ã¦ã‚‹ã¯ãšãªã®ã§ã€ä¸€åº¦æœ€åˆã®<a href="#tldr">TLDR</a>ã«æˆ»ã£ã¦ã¿ã¦ãã ã•ã„ã€‚ã¡ã‚ƒã‚“ã¨ä¼ã‚ã‚Šã¾ã™ã§ã—ã‚‡ã†ã‹ï¼ŸæŠœã‘æ¼ã‚Œã¨ã‹ãªã„ã§ã™ã‹ï¼Ÿ</p>
<p>ãƒ„ã‚¤ãƒƒã‚¿ãƒ¼ã§æ„è¦‹èããŸã„ã§ã™ï¼èª­ã‚“ã§ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚</p></div><footer><p><a href="https://mobile.twitter.com/search?q=https%3A%2F%2Foverreacted.io%2Fa-complete-guide-to-useeffect%2F" target="_blank" rel="noopener noreferrer">Discuss on Twitter</a> â€¢ <a href="https://github.com/gaearon/overreacted.io/edit/master/src/pages/a-complete-guide-to-useeffect/index.ja.md" target="_blank" rel="noopener noreferrer">Edit on GitHub</a></p></footer></article></main><aside><div style="margin:90px 0 40px 0;font-family:system-ui, -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;,
    &quot;Roboto&quot;, &quot;Oxygen&quot;, &quot;Ubuntu&quot;, &quot;Cantarell&quot;, &quot;Fira Sans&quot;,
    &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif"><form action="https://app.convertkit.com/forms/812047/subscriptions" class="seva-form formkit-form" method="post" min-width="400 500 600 700 800" style="background-color:rgb(255, 255, 255);border-radius:6px"><div data-style="full"><div data-element="column" class="formkit-column" style="background-color:rgb(249, 250, 251)"><h1 class="formkit-header" data-element="header" style="color:rgb(77, 77, 77);font-size:20px;font-weight:700">Join the Newsletter</h1><div data-element="subheader" class="formkit-subheader" style="color:rgb(104, 104, 104)"><p>Subscribe to get my latest content by email.</p></div><div class="formkit-image"><svg xmlns="http://www.w3.org/2000/svg" width="46" height="46" viewBox="0 0 46 46" style="max-width:100%"><g fill="none" fill-rule="evenodd"><path fill="#DD92AB" d="M23,36 C22.813,36 22.627,35.948 22.463,35.844 L0.463,21.844 C0.159,21.651 -0.017,21.308 0.001,20.948 C0.02,20.589 0.23,20.266 0.553,20.105 L23,6 L45.447,20.105 C45.769,20.266 45.98,20.588 45.999,20.948 C46.018,21.308 45.841,21.65 45.537,21.844 L23.537,35.844 C23.373,35.948 23.187,36 23,36 Z"></path><path fill="#FFF" d="M38,37 L8,37 L8,1 C8,0.448 8.448,0 9,0 L37,0 C37.552,0 38,0.448 38,1 L38,37 Z"></path><path fill="#FFA7C4" d="M45,46 C44.916,46 44.831,45.989 44.748,45.968 L21.748,39.968 L22,33 L46,21 L46,45 C46,45.31 45.856,45.602 45.611,45.792 C45.435,45.928 45.219,46 45,46 Z"></path><path fill="#FFC3D7" d="M45,46 L1,46 C0.447,46 0,45.552 0,45 L0,21 L45.479,44.122 C45.88,44.341 46.083,44.804 45.969,45.247 C45.856,45.69 45.457,46 45,46 Z"></path><path fill="#FFA7C4" d="M19 20.414L14.293 15.707C13.902 15.316 13.902 14.684 14.293 14.293L19 9.586 20.414 11 16.414 15 20.414 19 19 20.414zM27 20.414L25.586 19 29.586 15 25.586 11 27 9.586 31.707 14.293C32.098 14.684 32.098 15.316 31.707 15.707L27 20.414z"></path></g></svg></div></div><div data-element="column" class="formkit-column"><ul class="formkit-alert formkit-alert-error" data-element="errors" data-group="alert"></ul><div data-element="fields" class="seva-fields formkit-fields"><div class="formkit-field"><input type="text" class="formkit-input" aria-label="Your first name" name="fields[first_name]" placeholder="Your first name" style="border-color:rgb(227, 227, 227);border-radius:4px;color:rgb(0, 0, 0);font-weight:400"/></div><div class="formkit-field"><input type="email" class="formkit-input" name="email_address" aria-label="Your email address" placeholder="Your email address" style="border-color:rgb(227, 227, 227);border-radius:4px;color:rgb(0, 0, 0);font-weight:400"/></div><button data-element="submit" class="formkit-submit formkit-submit" style="background-color:hsl(340, 63%, 55%);border-radius:24px;color:white;font-weight:700"><div class="formkit-spinner"></div><span>Subscribe</span></button></div><div data-element="guarantee" class="formkit-guarantee" style="color:rgb(77, 77, 77);font-size:13px;font-weight:400"><p>I wonâ€™t send you spam.</p><p>Unsubscribe at <em>any</em> time.</p></div></div></div></form></div><h3 style="font-family:Montserrat, sans-serif;margin-top:0.4375rem"><a style="box-shadow:none;text-decoration:none;color:var(--pink)" href="/">Overreacted</a></h3><div style="display:flex;margin-bottom:3.5rem"><img src="/static/profile-pic-69c77131fd248a7aaaf26fab021f469f.png" alt="Yusuf Unlu" style="margin-right:0.875rem;margin-bottom:0;height:3.5rem;border-radius:50%"/><p style="max-width:310px">Personal blog by <a href="https://mobile.twitter.com/yufusunlu">Yusuf Unlu</a>.<!-- --> <!-- -->IÂ explain with words and code.</p></div><nav><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li></li><li></li></ul></nav></aside></div></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-130227707-1', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"ja-a-complete-guide-to-useeffect-ae9","path":"/ja/a-complete-guide-to-useeffect/"};window.dataPath="472/path---ja-a-complete-guide-to-useeffect-ae-9-e23-LvXwMLbvzwf7aFMogprKT2cg6dg";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-83825dcbe188439d174e.js"],"component---src-templates-blog-index-js":["/component---src-templates-blog-index-js-1d061c91bf8b4d1ed13d.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js.f3aea2f29a9b96501823.css","/component---src-templates-blog-post-js-5ff9d93420b5b2cefece.js"],"component---src-pages-404-js":["/component---src-pages-404-js.e9c5c3b80c5e9b8c6fa0.css","/component---src-pages-404-js-6115a896c1bd484b3973.js"],"component---src-pages-confirm-js":["/component---src-pages-confirm-js.e9c5c3b80c5e9b8c6fa0.css","/component---src-pages-confirm-js-e5c8bcda280c240e1d6e.js"],"component---src-pages-thanks-js":["/component---src-pages-thanks-js.e9c5c3b80c5e9b8c6fa0.css","/component---src-pages-thanks-js-bd098f6660863fbb8af2.js"],"pages-manifest":["/pages-manifest-f3e11a74ebf6959e04be.js"]};/*]]>*/</script><script src="/webpack-runtime-dea655677e505366ecd7.js" async=""></script><script src="/1-1b550cd61a5e170131aa.js" async=""></script><script src="/2-31a6021f1637c5720eda.js" async=""></script><script src="/0-b197e8c6c7ff26484233.js" async=""></script><script src="/app-83825dcbe188439d174e.js" async=""></script><script src="/component---src-templates-blog-post-js-5ff9d93420b5b2cefece.js" async=""></script></body></html>